try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="ddba296e-b254-4258-a419-4a0125460935",e._sentryDebugIdIdentifier="sentry-dbid-ddba296e-b254-4258-a419-4a0125460935")}catch(e){}(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1795,3084],{83:(e,t,n)=>{"use strict";n(66024)},171:(e,t,n)=>{"use strict";n(74230)},297:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(t,n);(!r||("get"in r?!t.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,r)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),r(n(49641),t)},1181:(e,t,n)=>{"use strict";n(53421),n(67219)},1468:(e,t,n)=>{"use strict";n(66024)},2202:(e,t,n)=>{"use strict";n(66024),n(48309),n(49394),n(8777),n(51227),n(95212)},2288:(e,t,n)=>{"use strict";var i;!function(e){e.Turnkey="turnkey",e.Turnkeyhd="turnkeyhd",e.DynamicWaas="dynamicWaas"}(i||(i={}))},2527:(e,t,n)=>{"use strict";function i(e){return e}n.d(t,{U:()=>i})},3049:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OKXInjectWalletName=t.OKXMiniWalletName=t.OKXWalletName=void 0,t.creatOKXWalletInfo=function(){return{appName:"okxAppWallet",name:t.OKXWalletName,imageUrl:"https://static.okx.com/cdn/assets/imgs/247/58E63FEA47A2B7D7.png"}},t.creatOKXMiniAppWalletInfo=function(){return{appName:"okxMiniApp",name:t.OKXMiniWalletName,imageUrl:"https://static.okx.com/cdn/assets/imgs/247/58E63FEA47A2B7D7.png"}},t.creatOKXInjectWalletInfo=function(){return{appName:"okxInjectWallet",name:t.OKXInjectWalletName,imageUrl:""}},t.OKXWalletName="OKX Wallet",t.OKXMiniWalletName="OKX Mini Wallet",t.OKXInjectWalletName="OKX Inject Wallet"},3314:(e,t,n)=>{"use strict";var i;!function(e){e.Email="email",e.Id="id",e.ExternalUserId="externalUserId",e.PhoneNumber="phoneNumber",e.SocialUsername="socialUsername"}(i||(i={}))},4179:(e,t,n)=>{"use strict";var i;n.d(t,{CH:()=>i,aV:()=>o,hI:()=>r});let r="0x6A6F069E2a08c2468e7724Ab3250CdBFBA14D4FF",o="0x67b436caD8a6D025DF6C82C5BB43fbF11fC5B9B7";!function(e){e.FOR_ALL_VALIDATION="0x0000",e.NOT_FOR_VALIDATE_USEROP="0x0001",e.NOT_FOR_VALIDATE_SIG="0x0002"}(i||(i={}))},4461:(e,t,n)=>{"use strict";var i;!function(e){e.All="all",e.Id="id",e.WalletPublicKey="walletPublicKey"}(i||(i={}))},4775:(e,t,n)=>{"use strict";"function"==typeof SuppressedError&&SuppressedError},5844:(e,t,n)=>{"use strict";n(66024),n(91206)},5949:(e,t,n)=>{"use strict";n(66024),n(18322)},6430:(e,t,n)=>{"use strict";n.d(t,{VD:()=>i});var i=()=>null},7053:function(e,t){"use strict";var n=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((i=i.apply(e,t||[])).next())})};function i(e,t){return n(this,void 0,void 0,function*(){return new Promise((n,i)=>{var r,o;if(null===(r=null==t?void 0:t.signal)||void 0===r?void 0:r.aborted){i(Error("Delay aborted"));return}let s=setTimeout(()=>n(),e);null===(o=null==t?void 0:t.signal)||void 0===o||o.addEventListener("abort",()=>{clearTimeout(s),i(Error("Delay aborted"))})})})}Object.defineProperty(t,"__esModule",{value:!0}),t.callForSuccess=function(e,t){return n(this,void 0,void 0,function*(){var n,r;let o;let s=null!==(n=null==t?void 0:t.attempts)&&void 0!==n?n:3,a=null!==(r=null==t?void 0:t.delayMs)&&void 0!==r?r:800;if("function"!=typeof e)throw Error(`Expected a function, got ${typeof e}`);let c=0;for(;c<s;)try{return yield e()}catch(e){o=e,++c<s&&(yield i(a))}throw o})},t.delay=i},7175:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((i=i.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.Eip155Provider=void 0;let r=n(64675),o=n(9407),s=n(86745),a=n(97724),c=n(32881);class l{constructor(e,t,n){this.name="eip155",this.namespace=e.namespace,this.events=n,this.client=t,this.chainId=parseInt(this.getDefaultChain()),this.httpProviders=this.createHttpProviders(),(0,s.logDebug)("eip155 constructor --opts.namespace--\x3e",e.namespace)}isRecord(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}isArray(e){return"object"==typeof e&&null!==e&&Array.isArray(e)}updateRequestParams(e){let t=e.params&&"object"==typeof e.params&&!Array.isArray(e.params);if("wallet_switchEthereumChain"===e.method){let n=e.chainId.split(":")[1],i=parseInt(n,10);if(isNaN(i))throw new s.OKXConnectError(s.OKX_CONNECT_ERROR_CODES.NOT_CONNECTED_ERROR,`Invalid decimal number,  chainId: '${n}' `);if(e.params){if(t){let t=e.params;"chainId"in t||(t.chainId="0x"+i.toString(16),e.params=t)}else throw new s.OKXConnectError(s.OKX_CONNECT_ERROR_CODES.NOT_CONNECTED_ERROR,`Request params error ,  method: '${e.method}' `)}else e.params={chainId:"0x"+i.toString(16)}}else if("personal_sign"===e.method||"eth_signTypedData_v4"===e.method||"eth_sendTransaction"===e.method||"wallet_watchAsset"===e.method){if(!e.params)throw new s.OKXConnectError(s.OKX_CONNECT_ERROR_CODES.NOT_CONNECTED_ERROR,`Request params is nil, method: '${e.method}'`);if(this.isRecord(e.params)){let t=e.params;if((0,s.logDebug)("eip155 updateRequestParams params>",JSON.stringify(t)),"chainId"in t){let n;let i=parseInt(e.chainId.split(":")[1],10),r=String(t.chainId);if(r.startsWith(this.name)&&e.chainId===r)n=i;else if(r.startsWith("0x"))n=parseInt(r,16);else if(isNaN(Number(r)))throw new s.OKXConnectError(s.OKX_CONNECT_ERROR_CODES.NOT_CONNECTED_ERROR,`Invalid params.chainId format, method: '${e.method}'`);else n=parseInt(r,10);if(i!==n)throw new s.OKXConnectError(s.OKX_CONNECT_ERROR_CODES.NOT_CONNECTED_ERROR,`Request params.chainId not equal chain,  method: '${e.method}' `)}}else throw new s.OKXConnectError(s.OKX_CONNECT_ERROR_CODES.NOT_CONNECTED_ERROR,`Invalid request params type, method: '${e.method}'`)}}adaptArray(e){if("wallet_switchEthereumChain"===e.method||"wallet_addEthereumChain"===e.method||"wallet_watchAsset"===e.method||"eth_sendTransaction"===e.method||"kaia_signTransaction"===e.method||"klay_signTransaction"===e.method){if(this.isArray(e.params)){let t=e.params;if(t){if(1===t.length){let t=e.params[0];this.isRecord(t)&&(e.params=t)}else if(t.length>1)throw new s.OKXConnectError(s.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`Request params only Support one data,  method: '${e.method}' `);else throw new s.OKXConnectError(s.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`Request params is nil,  method: '${e.method}' `)}}}else if("eth_signTypedData_v4"===e.method){if(this.isArray(e.params)){let t=e.params;if(t&&t.length>2)throw new s.OKXConnectError(s.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`Request params only Support one data,  method: '${e.method}' `);if(t&&0===t.length)throw new s.OKXConnectError(s.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`Request params is nil,  method: '${e.method}' `);let n={};if(t&&2===t.length){let t=e.params[0];if(t&&"string"==typeof t){let i=!1;if(this.namespace.accounts.forEach(e=>{(0,r.fromAccountToAddress)(e).toLowerCase()===t.toLowerCase()&&(i=!0)}),(0,s.logDebug)("eip155 adaptArray eth_signTypedData_v4 >>>isEqual: ",i),!i)throw new s.OKXConnectError(s.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`Request params address error, not equal,  method: '${e.method}' `);if(this.isRecord(e.params[1]))n=e.params[1];else throw new s.OKXConnectError(s.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`Request params message data error,  method: '${e.method}' `)}else throw new s.OKXConnectError(s.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`Request params address error , not string,  method: '${e.method}' `)}else if(t&&1===t.length){if(this.isRecord(e.params[0]))n=e.params[0];else throw new s.OKXConnectError(s.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`Request params message data error,  method: '${e.method}' `)}try{e.params={typedDataJson:JSON.stringify(n)}}catch(t){throw new s.OKXConnectError(s.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`Request params call JSON.stringify() failed,  method: '${e.method}' `)}}}else if("personal_sign"===e.method&&this.isArray(e.params)){if(e.params&&e.params.length>2)throw new s.OKXConnectError(s.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`Request params error,  method: '${e.method}' `);if(e.params&&0===e.params.length)throw new s.OKXConnectError(s.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`Request params is nil,  method: '${e.method}' `);let t=e.params[0],n=e.params[1];if(n&&"string"==typeof n){let t=!1;if(this.namespace.accounts.forEach(e=>{(0,r.fromAccountToAddress)(e).toLowerCase()===n.toLowerCase()&&(t=!0)}),(0,s.logDebug)("eip155 adaptArray personal_sign >>>isEqual: ",t),!t)throw new s.OKXConnectError(s.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`Request params address error,  method: '${e.method}' `)}if(t&&"string"==typeof t)e.params={message:t};else throw new s.OKXConnectError(s.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`Request params is error,  method: '${e.method}' `)}}showRequestModal(e){switch(e.method){case"eth_requestAccounts":case"eth_accounts":case"eth_chainId":break;case"eth_sendTransaction":case"eth_signTransaction":case"eth_sign":case"personal_sign":case"eth_signTypedData":case"wallet_addEthereumChain":case"wallet_watchAsset":case"eth_signTypedData_v4":return!0;case"wallet_switchEthereumChain":{this.adaptArray(e),this.updateRequestParams(e);let{parsedChainId:t,hexChainId:n}=this.getHexChainIdFromRequest(e);return!this.isChainApproved(t)}}return!1}configAddressAdaptInjectWallet(e){this.namespace.accounts.forEach(t=>{t.includes(e.chainId)&&(e.address=(0,r.fromAccountToAddress)(t))})}request(e){return i(this,void 0,void 0,function*(){if("eth_signLegacy"===e.method||"eth_sign"===e.method)throw new s.OKXConnectError(s.OKX_CONNECT_ERROR_CODES.METHOD_NOT_SUPPORTED,`${e.method} method not supported`);switch(e.injectParams=e.params,this.adaptArray(e),this.client.needCheckRequestMethod()&&"klay_signTransaction"===e.method&&(e.method="kaia_signTransaction"),(0,s.logDebug)("eip155 request --args--string>",JSON.stringify(e)),this.updateRequestParams(e),(0,s.logDebug)("eip155 request --params--string>",JSON.stringify(e)),this.configAddressAdaptInjectWallet(e),e.method){case"eth_requestAccounts":case"eth_accounts":return this.getAccounts();case"eth_chainId":return parseInt(this.getDefaultChain());case"wallet_switchEthereumChain":return yield this.handleSwitchChain(e);case"wallet_addEthereumChain":return this.addEthereumChain(e)}if(!(!this.client.needCheckRequestMethod()||this.namespace.methods.includes(e.method)))return(0,s.logDebug)("[RPC] request begin"),yield this.getHttpProvider().request(e);if(this.client.needCheckRequestMethod()&&("eth_sendTransaction"===e.method||"kaia_signTransaction"===e.method))try{if(e.params&&"object"==typeof e.params&&!Array.isArray(e.params)){let t=e.params;"string"==typeof t.input&&""!==t.input.trim()?t.data&&("string"!=typeof t.data||""!==t.data.trim())?(0,s.logDebug)("eip155 sendTransaction:  data not empty"):(t.data=t.input,(0,s.logDebug)("eip155 sendTransaction:  replace data with input")):(0,s.logDebug)("eip155 sendTransaction:  input empty")}}catch(e){(0,s.logDebug)("eip155 sendTransaction:  replace error")}try{let t=yield this.client.request(e);if((0,s.logDebug)("eip155 request --response----string>",JSON.stringify(t)),this.isRecord(t)&&"result"in t){let e=t.result;if(e&&"string"==typeof e&&("true"===e||"false"===e))return(0,s.logDebug)("eip155 request --wallet_watchAsset>>>>","true"===e),"true"===e;return t.result}return t}catch(e){throw(0,s.logDebug)(`eip155 request --response --error--string> e instanceof OKXConnectError ${e instanceof s.OKXConnectError}`,JSON.stringify(e)),e}})}addEthereumChain(e){return i(this,void 0,void 0,function*(){let t=yield this.client.request(e);try{if("result"in t){let n=t.result;if(n){let t=n.split(":")[0],i=n.split(":")[1];if(this.namespace,this.namespace.accounts.push(n),this.namespace.chains.push(t+":"+i),this.isRecord(e.params)&&"rpcUrls"in e.params){let t=e.params.rpcUrls,n=t?t[0]:void 0;n&&(this.namespace.rpcMap?this.namespace.rpcMap[i]=n:this.namespace.rpcMap={[i]:n},this.setHttpProvider(i,n))}this.events.emit(o.PROVIDER_EVENTS.UPDATE_NAMESPACES,{eip155:this.namespace})}}else new s.OKXConnectError(s.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`the method ${e.method} request error`)}catch(t){throw new s.OKXConnectError(s.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`the method ${e.method} request  error`)}return null})}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,t){if(this.chainId=parseInt(e),!this.httpProviders[e]){let n=t||(0,r.getRpcUrl)(`${this.name}:${e}`,this.namespace);n?this.setHttpProvider(e,n):(0,s.logError)(`No RPC url provided for chainId: ${e}`)}this.events.emit(o.PROVIDER_EVENTS.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw Error("ChainId not found");return e.split(":")[1]}getAccounts(){let e=this.namespace.accounts;return((0,s.logDebug)("eip155 getAccounts ",e,this.chainId),e)?[...new Set(e.filter(e=>e.split(":")[1]===this.chainId.toString()).map(e=>(0,r.fromAccountToAddress)(e)))]:[]}getHexChainIdFromRequest(e){let t=e.params,n="0x0";t&&"chainId"in t&&(n=t.chainId),n=n.startsWith("0x")?n:`0x${n}`,(0,s.logDebug)("handleSwitchChain --\x3eargs ",e),(0,s.logDebug)("handleSwitchChain --\x3ehexChainId ",n);let i=parseInt(n,16);return(0,s.logDebug)("handleSwitchChain --\x3eparsedChainId ",i),{parsedChainId:i,hexChainId:n}}handleSwitchChain(e){return i(this,void 0,void 0,function*(){let{parsedChainId:t,hexChainId:n}=this.getHexChainIdFromRequest(e);if(this.isChainApproved(t))this.setDefaultChain(`${t}`);else throw new s.OKXConnectError(s.OKX_CONNECT_ERROR_CODES.CHAIN_NOT_SUPPORTED,`the method ${e.method} request  error`)})}isChainApproved(e){return this.namespace.chains.includes(`${this.name}:${e}`)}createHttpProvider(e,t){if(t)return new a.JsonRpcProvider(new c.JsonRpcConnection(t,(0,r.getGlobal)("disableProviderPing")));(0,s.logError)(`No RPC url provided for chainId: ${e}`)}createHttpProviders(){let e={};return this.namespace.chains.forEach(t=>{let n=(0,r.getChainId)(t),i=(0,r.getRpcUrl)(t,this.namespace);(0,s.logDebug)("get parsed chain and rpc:",n,i);let o=this.createHttpProvider(n,i);o&&(e[n]=o)}),(0,s.logDebug)("get http providermap:",e),e}setHttpProvider(e,t){let n=this.createHttpProvider(e,t);n&&(this.httpProviders[e]=n)}getHttpProvider(){let e=`${this.chainId}`,t=this.httpProviders[e];if((0,s.logDebug)("[RPC] get http provider:",e,t),void 0===t)throw Error(`JSON-RPC provider for ${e} not found`);return t}}t.Eip155Provider=l,t.default=l},7792:(e,t,n)=>{"use strict";n(66024)},7807:(e,t,n)=>{"use strict";n(66024)},8212:function(e,t,n){"use strict";var i,r=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(t,n);(!r||("get"in r?!t.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,r)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||(i=function(e){return(i=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t})(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=i(e),s=0;s<n.length;s++)"default"!==n[s]&&r(t,e,n[s]);return o(t,e),t}),a=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((i=i.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.WalletConnectionManager=void 0;let c=n(63065),l=n(12502),d=n(54934),u=n(16146),h=n(32945),p=n(93106),g=n(9277),f=n(22585),m=n(21309),v=n(34554),O=n(83646),_=n(46617),C=n(86094),y=s(n(86273)),E=n(86273),b=n(83819);class N{constructor(){this.events=new f.EventEmitter,this.communicateEvents=new f.EventEmitter,this.splitManager=new g.ConnectionSplitPackages("wallet"),y.logDebug("connect manager construct"),this.connectStorage=new m.Storage(d.OKXCONNECTOR_CACHE_KEY),this.jwtKeyPair=this.getCachedJWTKeyPair(),this.saveJWTKeyPair(this.jwtKeyPair),this.connector=new c.OKXWalletConnector(h.OKXCONNECTOR_WS_URL_1),this.packageId=Date.now(),this.sessionCryptoInfoMap=new Map,this.inLogin=!1,this.isLogined=!1}refreshPackageId(e=0){let t=Date.now()+e;t==this.packageId&&(this.packageId=t+1),this.packageId=t}saveCryptoKeyPair(e,t){let n=(0,C.safeJsonStringify)(t);this.connectStorage.encryptStoreMsg(n,d.OKXCONNECTOR_CRYPTO_KEY+e)}getCachedCryptoKeyPair(e){let t=this.connectStorage.getAndDecrypt(d.OKXCONNECTOR_CRYPTO_KEY+e);return"string"==typeof t?(y.logDebug("get cached crypto key:"),y.logDebug(t),(0,C.safeJsonParse)(t)):(this.connectStorage.clearCache(),null)}saveJWTKeyPair(e){var t={publicKey:(0,v.toHexString)(e.publicKey),secretKey:(0,v.toHexString)(e.secretKey)};y.logDebug("save jwt kp");let n=(0,C.safeJsonStringify)(t);y.logDebug(n),this.connectStorage.encryptStoreMsg(n,d.OKXCONNECTOR_JWT_KEY),y.logDebug("after save jwt kp")}getCachedJWTKeyPair(){let e=this.connectStorage.getAndDecrypt(d.OKXCONNECTOR_JWT_KEY);if("string"!=typeof e)return(0,_.generateKeyPair)();{y.logDebug("get cached jwt kp:"),y.logDebug(e);let t=(0,C.safeJsonParse)(e);return y.logDebug("save jwt kp"),y.logDebug(t),{publicKey:(0,v.hexToByteArray)(t.publicKey),secretKey:(0,v.hexToByteArray)(t.secretKey)}}}isTopicPublicKeyExist(e){return y.logDebug(`isTopicPublicKeyExist  ===> ${e}`),this.sessionCryptoInfoMap.get(e)}makeJWT(e){return a(this,void 0,void 0,function*(){return yield(0,_.signJWT)(e,u.OKXCONNECTOR_JWT_WALLET_SIDE,u.OKXCONNECTOR_JWT_TTL,this.jwtKeyPair)})}parseInternalMsg(e){try{let t=(0,C.safeJsonParse)(e)["ivur-igbfft-ptjip"];if(t&&t.length>0)return(0,b.base64decode)(t,!0).toString()}catch(e){y.logError("parse internal msg",e)}}updateClientId(e,t){let n=this.sessionCryptoInfoMap.get(e);if((0,E.logDebug)("updateClientId",n,e,t),n&&t&&t.length>0){if(n.cid){let i=(0,v.getLastSixMd5Hash)(t);n.cid==i?n.dappPublicKey=t:y.logError("cid check failed",n,e,t)}else n.dappPublicKey=t;this.syncCacheSessionInfo()}return!1}parsePackage(e,t){return a(this,arguments,void 0,function*(e,t,n=!1){var i,r,o,s,c,l,d,u,h,p,g,f,m,v,O,_,N;this.events.emit(t.id,t);let R=this.sessionCryptoInfoMap.get(e);y.logDebug("get sessionInfo for decrypt topic:",e),y.logDebug("get sessionInfo for decrypt:",t.id,e,R,this.sessionCryptoInfoMap);let w=!1;if(R&&t.params.data&&(null===(i=t.params.data)||void 0===i?void 0:i.message)){if(null===(r=t.params.data)||void 0===r?void 0:r.isInternalData){let e=null===(o=t.params.data)||void 0===o?void 0:o.message,n=null===(s=t.params.data)||void 0===s?void 0:s.topic,i=this.parseInternalMsg(e);(0,E.logDebug)("parse internal origin: ",i),i&&i.length>0&&this.communicateEvents.emit("origin",i,n)}else try{let n=null===(c=t.params.data)||void 0===c?void 0:c.message;if(n.trimStart().startsWith("{")){let i=this.splitManager.tryParseMessageSplitPayload(n);if(i){(0,E.logDebug)("parse split msg object: ",i),w=!0;let n={topicId:null===(d=null===(l=t.params)||void 0===l?void 0:l.data)||void 0===d?void 0:d.topic,messageId:null===(h=null===(u=t.params)||void 0===u?void 0:u.data)||void 0===h?void 0:h.messageId,messageObject:i,publishedAt:null===(g=null===(p=t.params)||void 0===p?void 0:p.data)||void 0===g?void 0:g.publishedAt},r=yield this.splitManager.onReceivedPackageCheck(n);if(r.completeMessageIdList&&r.completeMessageIdList.forEach(t=>a(this,void 0,void 0,function*(){this.refreshPackageId(),yield this.sendReceive(this.packageId.toString(),t,e)})),r.finalMessage){let t=R.crypto.decryptWallet(r.finalMessage,R.dappPublicKey);(0,E.logDebug)("<<< receive msg from split:",e,t),this.communicateEvents.emit(e,t)}}else{let t=(0,C.safeJsonParse)(n);if(t.method){if("session_info"==t.method){let n=t.params.sessionInfo,i=(0,b.base64decode)(n,!1);(0,E.logDebug)("wallet connection manager requset base64Content:",i),(0,E.logDebug)("base64Content:"+i);let r=i.toObject();this.updateClientId(e,r.clientId)}(0,E.logDebug)("<<< parse raw msg:",e,t),this.communicateEvents.emit(e,n)}}}else{let n=R.crypto.decryptWallet(null===(f=t.params.data)||void 0===f?void 0:f.message,R.dappPublicKey);(0,E.logDebug)("<<< receive msg:",e,n),this.communicateEvents.emit(e,n)}}catch(i){let n=R.crypto.decryptWallet(null===(m=t.params.data)||void 0===m?void 0:m.message,R.dappPublicKey);(0,E.logDebug)("<<< receive msg:",e,n),this.communicateEvents.emit(e,n)}}!n&&(yield this.sendACK(t.id,!0),e&&!w&&(null===(O=null===(v=t.params)||void 0===v?void 0:v.data)||void 0===O?void 0:O.messageId)&&(this.refreshPackageId(),yield this.sendReceive(this.packageId.toString(),null===(N=null===(_=t.params)||void 0===_?void 0:_.data)||void 0===N?void 0:N.messageId,e)))})}recovrySessionInfoFromCache(){let e=this.connectStorage.getAndDecrypt(p.WalletConnectionManagerTopicInfoCacheKey);if(y.logDebug("get cached sessionInfos:",e),e){let t=(0,C.safeJsonParse)(e);for(let e in t){let n=t[e];y.logDebug("make topicItem:",n);let i={topic:e,crypto:new O.SessionCrypto({publicKey:n.cryptoKeyPair.publicKey,secretKey:n.cryptoKeyPair.secretKey}),dappPublicKey:n.dappPublicKey,cid:n.cid};this.sessionCryptoInfoMap.set(e,i)}}y.logDebug("get cached sessionInfos map:",this.sessionCryptoInfoMap)}syncCacheSessionInfo(){let e={};for(let[t,n]of this.sessionCryptoInfoMap)y.logDebug("for each Keys",t),n&&(e[t]={cryptoKeyPair:n.crypto.stringifyKeypair(),dappPublicKey:n.dappPublicKey,cid:n.cid});let t=(0,C.safeJsonStringify)(e);y.logDebug("sync cache sessionInfos:",t),this.connectStorage.encryptStoreMsg(t,p.WalletConnectionManagerTopicInfoCacheKey)}cacheSessionInfo(e,t,n=!0){let i=t.dappPublicKey,r=[];for(let[e,t]of this.sessionCryptoInfoMap)y.logDebug("for each Keys",e),t.dappPublicKey==i&&(y.logDebug("duplicated dapp public key:",e,i),r.push(e));for(let[e,t]of this.sessionCryptoInfoMap)r.includes(e)&&this.sessionCryptoInfoMap.delete(e);return y.logDebug("cleaned connect session cache:",this.sessionCryptoInfoMap),this.sessionCryptoInfoMap.set(e,t),y.logDebug("cache sessionInfo:",e,t,this.sessionCryptoInfoMap),n&&this.syncCacheSessionInfo(),r}updateProtocolVersion(e,t){this.splitManager.updateTopicSenderVersion(e,t)}appendTopic(e,t,n){return a(this,void 0,void 0,function*(){return(0,E.logDebug)("4.1. get append Topic:",e),new Promise((i,r)=>a(this,void 0,void 0,function*(){if(!this.isLogined){var o=Error();o.message="connection is not logined",o.name="append error",r(o);return}let s={topic:e,crypto:new O.SessionCrypto,dappPublicKey:t||"",cid:n},a=this.cacheSessionInfo(e,s,!1);yield this.subscribeTopics(Array.from([e])),this.refreshPackageId(),y.logDebug(`5. subscribe callback then fetch append message: ${this.packageId}, ${e}`),y.reportLog("5. subscribe callback then fetch append message");let c=new Date().getTime();(0,E.logDebug)("Append --subscribe callback->",c-this.timeLog),i(a)}))})}confirmAppendingTopics(){this.syncCacheSessionInfo()}connect(){return a(this,void 0,void 0,function*(){this.timeLog=new Date().getTime(),(0,E.logDebug)("[Wallet] ConnectTime---enter->",this.timeLog),y.reportLog("wallet connect connect called");let e=Date.now().toString();var t=yield this.makeJWT(e);return y.logDebug(`generate jwt token: ${t}`),this.connectStorage.saveContent(t,"jwt"),this.recovrySessionInfoFromCache(),new Promise((e,n)=>{this.inLogin=!0,this.connector.onOpen(()=>a(this,void 0,void 0,function*(){y.logDebug("1. connector on open"),y.reportLog("1. wallet connect connect on open");let i=new Date().getTime();(0,E.logDebug)("ConnectTime---open->",i-this.timeLog),this.events.once(this.packageId.toString(),t=>a(this,void 0,void 0,function*(){if(t&&t.error){y.logError("failed when login"),yield this.connector.disconnect();var i=Error();i.message=t.error.message,i.name=t.error.code.toString(),n(i)}else this.isLogined=!0,e(),y.logDebug("3. subscribe cached topics",this.sessionCryptoInfoMap),y.reportLog("3. wallet connect connect subscribe cached topics"),this.sessionCryptoInfoMap.size>0&&(yield this.subscribeTopics(Array.from(this.sessionCryptoInfoMap.keys())))})),y.logDebug("2. login called"),y.reportLog("2. wallet connect login called"),yield this.connector.send(()=>a(this,void 0,void 0,function*(){return y.logDebug("CONNECT: reconnect before send"),yield this.connector.connect()}),{id:this.packageId.toString(),jsonrpc:h.CONNECT_JSONRPC_VER,method:l.CONNECT_METHOD_LOGIN,params:{token:t}})})),this.connector.connect().catch(e=>{(0,E.logDebug)("WalletConnectionManager connect error",e),n(e)}),this.connector.addPackageParse(e=>{var t,n;if(y.logDebug("connect: parse package"),y.logDebug(e),!("params"in e)||!("data"in e.params)){this.parsePackage("",e,!0);return}(null===(t=e.params.data)||void 0===t?void 0:t.topic)&&this.parsePackage(null===(n=e.params.data)||void 0===n?void 0:n.topic,e,e.method===l.CONNECT_METHOD_RECEIVE)})})})}getSessionPublicKey(e){if(this.isTopicPublicKeyExist(e)){let t=this.sessionCryptoInfoMap.get(e);if(t)return(0,v.toHexString)(t.crypto.keyPair.publicKey)}}getCurrentCachedTopicIdList(){return Array.from(this.sessionCryptoInfoMap.keys())}disconnect(){return a(this,arguments,void 0,function*(e=!1){yield this.connector.disconnect(),this.connectStorage.clearCache(d.OKXCONNECTOR_TOKEN_CACHE),e||this.connectStorage.clearCache(d.OKXCONNECTOR_CRYPTO_SENDER_PK_CACHE)})}sendRaw(e,t){return a(this,void 0,void 0,function*(){t&&(yield this.sendMsg(t,e,h.OKXCONNECTOR_MESSAGE_TTL))})}sendMsg(e,t,n){return a(this,void 0,void 0,function*(){if(t){this.refreshPackageId();let i={id:this.packageId.toString(),method:l.CONNECT_METHOD_PUBLISH,jsonrpc:h.CONNECT_JSONRPC_VER,params:{message:{topic:e,message:t,ttl:n}}};this.events.once(this.packageId.toString(),e=>a(this,void 0,void 0,function*(){e&&e.error?y.logError(`@${new Date().toUTCString()} >>> failed when send msg`):e&&!e.error&&y.logDebug(`CONNECTION @[${new Date().toUTCString()}] >>> send msg with id ${this.packageId} successed`)})),yield this.connector.send(()=>a(this,void 0,void 0,function*(){return y.logDebug("CONNECT: reconnect before send"),yield this.connector.connect()}),i)}})}send(e,t){return a(this,arguments,void 0,function*(e,t,n=!1,i=h.OKXCONNECTOR_MESSAGE_TTL,r=!1){var o,s;let a;if(y.logDebug(`message send =====> ${t}`),!this.isTopicPublicKeyExist(e))throw Error("connection not finish");let c=null===(o=this.sessionCryptoInfoMap.get(e))||void 0===o?void 0:o.dappPublicKey,l=null===(s=this.sessionCryptoInfoMap.get(e))||void 0===s?void 0:s.crypto;r&&(a={message:t});let d=!1;if(l&&c&&!r&&(d=!0,a={message:l.encryptWallet(t,c)}),a){n&&l&&(a.clientId=(0,v.toHexString)(l.keyPair.publicKey));let t=(0,C.safeJsonStringify)(a);!r&&d?yield this.splitManager.sendSplitPackages(e,t,this.sendMsg.bind(this),this.sendRaw.bind(this)):yield this.sendMsg(e,t,i)}})}sendACK(e,t){return a(this,arguments,void 0,function*(e,t,n){if(!0===t){let t={id:e,jsonrpc:h.CONNECT_JSONRPC_VER,result:!0};yield this.connector.send(()=>a(this,void 0,void 0,function*(){return y.logDebug("CONNECT: reconnect before send"),yield this.connector.connect()}),t)}else if(n){let t={id:e,jsonrpc:h.CONNECT_JSONRPC_VER,error:{code:n.code,message:n.message}};yield this.connector.send(()=>a(this,void 0,void 0,function*(){return y.logDebug("CONNECT: reconnect before send"),yield this.connector.connect()}),t)}})}sendReceive(e,t,n){return a(this,void 0,void 0,function*(){let i={id:e,jsonrpc:h.CONNECT_JSONRPC_VER,method:l.CONNECT_METHOD_RECEIVE,params:{data:{messageId:t,topic:n}}};yield this.connector.send(()=>a(this,void 0,void 0,function*(){return y.logDebug("CONNECT: reconnect before send"),yield this.connector.connect()}),i)})}sendUnsubscribe(e){return a(this,void 0,void 0,function*(){yield this.connector.send(()=>a(this,void 0,void 0,function*(){return y.logDebug("CONNECT: reconnect before send"),yield this.connector.connect()}),{id:this.packageId.toString(),jsonrpc:h.CONNECT_JSONRPC_VER,method:l.CONNECT_METHOD_UNSUB,params:{topic:e}}),this.sessionCryptoInfoMap.delete(e),this.syncCacheSessionInfo()})}sendFetchAndConsumeMessages(e,t){return a(this,void 0,void 0,function*(){this.events.once(e,e=>a(this,void 0,void 0,function*(){var n,i;if(e.result){var r=e.result.hasMore,o=e.result.data;if(o)for(let e=0;e<o.length;e++){let n=o[e];if(n&&n.topic==t){let e=n.messageId;yield this.connector.getMsgPayloadFromHistory(n),this.refreshPackageId(),yield this.sendReceive(this.packageId.toString(),e,t)}}r&&(this.refreshPackageId(),yield this.sendFetchAndConsumeMessages(this.packageId.toString(),t))}else y.logDebug(`CONNECT: get error rsp ${null===(n=e.error)||void 0===n?void 0:n.code} : ${null===(i=e.error)||void 0===i?void 0:i.message}`)})),y.logDebug("5. send fetch more");let n=new Date().getTime();(0,E.logDebug)("ConnectTime---5->",n-this.timeLog);let i={id:e,jsonrpc:h.CONNECT_JSONRPC_VER,method:l.CONNECT_METHOD_FETCHMSG,params:{data:{topic:t}}};yield this.connector.send(()=>a(this,void 0,void 0,function*(){return y.logDebug("CONNECT: reconnect before send"),yield this.connector.connect()}),i)})}sendBatchFetchAndConsumeMessages(e,t){return a(this,void 0,void 0,function*(){this.events.once(e,e=>a(this,void 0,void 0,function*(){var n,i;if(e.result){var r=e.result.hasMore,o=e.result.data;if(o)for(let e=0;e<o.length;e++){let t=o[e];if(t&&t.topic){if(this.splitManager.tryParseMessageSplitPayload(t.message))yield this.connector.getMsgPayloadFromHistory(t);else{let n=t.messageId;yield this.connector.getMsgPayloadFromHistory(t),this.refreshPackageId(e),yield this.sendReceive(this.packageId.toString(),n,t.topic)}}}r&&(this.refreshPackageId(),yield this.sendBatchFetchAndConsumeMessages(this.packageId.toString(),t))}else y.logDebug(`CONNECT: get error rsp ${null===(n=e.error)||void 0===n?void 0:n.code} : ${null===(i=e.error)||void 0===i?void 0:i.message}`)})),y.logDebug("5. send fetch more"),y.reportLog("5. send fetch more");let n=new Date().getTime();(0,E.logDebug)("ConnectTime---5->",n-this.timeLog);let i={id:e,jsonrpc:h.CONNECT_JSONRPC_VER,method:l.CONNECT_METHOD_BATCH_FETCHMSG,params:{topics:t,withInternalData:!0}};yield this.connector.send(()=>a(this,void 0,void 0,function*(){y.logDebug("CONNECT: reconnect before send"),yield this.connector.connect()}),i)})}cleanCache(){return a(this,void 0,void 0,function*(){this.connectStorage.clearCache()})}saveSessionContent(e,t){t||this.connectStorage.clearCache(d.OKXCONNECTOR_SESSION_PREFIX_KEY+e);let n=(0,C.safeJsonStringify)(t);this.connectStorage.encryptStoreMsg(n,d.OKXCONNECTOR_SESSION_PREFIX_KEY+e)}getSessionContent(e){let t=this.connectStorage.getAndDecrypt(d.OKXCONNECTOR_SESSION_PREFIX_KEY+e);if(t)return(0,C.safeJsonParse)(t)}subscribeTopics(e){return a(this,void 0,void 0,function*(){(0,E.logDebug)("4. topicid list",e),y.reportLog("4. topicid list"),this.refreshPackageId();let t=new Date().getTime();return(0,E.logDebug)("ConnectTime--subscribe callback->",t-this.timeLog),new Promise((t,n)=>a(this,void 0,void 0,function*(){let n=0;for(let i=0;i<e.length;++i){let r=e[i];this.refreshPackageId(i),this.events.once(this.packageId.toString(),o=>a(this,void 0,void 0,function*(){if(o&&o.error){y.logError("failed when subscribe"),yield this.connector.disconnect();var s=Error();s.message=o.error.message,s.name=o.error.code.toString(),(n+=1)==e.length&&t()}this.refreshPackageId(i);let a=new Date().getTime();(0,E.logDebug)("ConnectTime--subscribe callback->",a-this.timeLog),(n+=1)==e.length&&(y.logDebug(`5. send fetch msg: ${this.packageId}, ${r}`),yield this.sendBatchFetchAndConsumeMessages(this.packageId.toString(),e),yield this.splitManager.init(this.sendRaw.bind(this)),t())})),y.logDebug(`3. login callback then send subscribe: ${this.packageId}, ${r}`),y.reportLog("3. login callback then send subscribe");let o=new Date().getTime();(0,E.logDebug)("ConnectTime---login callback->",o-this.timeLog),yield this.connector.send(()=>a(this,void 0,void 0,function*(){return y.logDebug("CONNECT: reconnect before send"),yield this.connector.connect()}),{id:this.packageId.toString(),jsonrpc:h.CONNECT_JSONRPC_VER,method:l.CONNECT_METHOD_SUB,params:{topic:r}})}}))})}}t.WalletConnectionManager=N},8487:(e,t,n)=>{"use strict";n(66024)},8777:(e,t,n)=>{"use strict";var i;!function(e){e.V6="v6",e.V7="v7"}(i||(i={}))},9035:(e,t,n)=>{"use strict";n(66024)},9277:function(e,t,n){"use strict";var i,r=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(t,n);(!r||("get"in r?!t.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,r)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||(i=function(e){return(i=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t})(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=i(e),s=0;s<n.length;s++)"default"!==n[s]&&r(t,e,n[s]);return o(t,e),t}),a=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((i=i.apply(e,t||[])).next())})},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectionSplitPackages=void 0;let l=n(54934),d=c(n(331)),u=n(34554),h=n(86094),p=s(n(86273)),g=n(86273),f="ConnectionReceiveKey",m="ConnectionSendKey",v="ConnectionSenderVersionKey";class O{constructor(e){this.splitMessageSendArray=new Map,this.splitMessageReceivedArray=new Map,this.splitMessageSenderVersionMap=new Map,this.splitPackageCache=d.default.createInstance({name:l.OKXCONNECTOR_STORAGE_PROTOCOL_CACHE+e})}init(e){return a(this,void 0,void 0,function*(){if(yield this.recoverFromCache(),this.splitMessageSendArray.size>0){for(let[t,n]of this.splitMessageSendArray.entries())for(let i=0;i<n.length;){let r=n[i];try{yield e((0,h.safeJsonStringify)(r),t),p.logDebug(`Successfully sent payload: ${(0,h.safeJsonStringify)(r)} to topic: ${t}`),n.splice(i,1)}catch(e){p.logError(`Failed to send payload: ${(0,h.safeJsonStringify)(r)} to topic: ${t}`,e),r.retryCount=(r.retryCount||0)+1,r.retryCount>3?(p.logError(`Payload failed after 3 retries: ${(0,h.safeJsonStringify)(r)}`),n.splice(i,1)):i++}}yield this.syncCache()}})}tryParseMessageSplitPayload(e){var t;let n;try{if(e.trimStart().startsWith("{")){let i=(0,h.safeJsonParse)(e);i&&i.protocol_version&&i.protocol_version>=2&&i.package_group_id&&(null===(t=i.package_group_id)||void 0===t?void 0:t.length)>0&&(n=i)}else(0,g.logDebug)("not split packages")}catch(e){(0,g.logDebug)("not split packages")}return n}updateTopicSenderVersion(e,t){return a(this,void 0,void 0,function*(){this.splitMessageSenderVersionMap.set(e,t),yield this.syncCache(),(0,g.logDebug)("get update topic sender version: ",e,t)})}sendSplitPackages(e,t,n,i){return a(this,void 0,void 0,function*(){if(!e){p.logError("sendSplitPackages invalid topic");return}let r=this.splitMessageSenderVersionMap.get(e),o=t.length;try{if(o<63e3)throw Error(`no need to split (size:${o})`);if(!r||r&&r<2)throw Error(`version not support split (version: ${r})`);let n=[];for(let e=0;e<t.length;e+=63e3)e+63e3<t.length?n.push(t.slice(e,e+63e3)):n.push(t.slice(e));let s=(0,u.generateGroupId)(),a=n.map((t,i)=>({topicId:e,protocol_version:2,total_count:n.length,package_index:i,package_group_id:s,content:t}));this.mergePackageArray(!0,a);for(let t=0;t<a.length;){let n=a[t],r=(0,h.safeJsonStringify)(n);try{yield i(r,e),p.logDebug(`Successfully sent payload: ${r} to topic: ${e}`),a.splice(t,1)}catch(i){p.logError(`Failed to send payload: ${r} to topic: ${e}`,i),n.retryCount=(n.retryCount||0)+1,n.retryCount>3?(p.logError(`Payload failed after 3 retries: ${r}`),a.splice(t,1)):t++}}this.splitMessageSendArray.set(e,[]),yield this.syncCache()}catch(i){(0,g.logDebug)("send split packages no split"),(0,g.logDebug)(i),yield n(e,t)}})}onReceivedPackageCheck(e){return a(this,void 0,void 0,function*(){this.mergePackageArray(!1,[e]);let t=new Map,n=e.topicId;this.splitMessageReceivedArray.forEach((n,i)=>{i==e.topicId&&n.forEach(e=>{if(e.messageObject.package_group_id){let n=t.get(e.messageObject.package_group_id);n||(n=[]),n.push(e),t.set(e.messageObject.package_group_id,n)}})}),(0,g.logDebug)("on received message, check message cache");let i={isSplitPackage:!1};if(e.messageObject.package_group_id){i.isSplitPackage=!0;let r=t.get(e.messageObject.package_group_id);if(null==r?void 0:r.length){let t=new Set;if(r.forEach(e=>{void 0!==e.messageObject.package_index&&t.add(e.messageObject.package_index)}),t.size==e.messageObject.total_count){r.sort((e,t)=>(e.messageObject.package_index||0===e.messageObject.package_index)&&(t.messageObject.package_index||0===t.messageObject.package_index)?e.messageObject.package_index-t.messageObject.package_index:0);let e=r.reduce((e,t)=>(e.push(t.messageObject.content),e),[]),t=r.reduce((e,t)=>(e.push(t.messageId),e),[]);i.isSplitPackage=!0,i.finalMessage=e.join(""),i.completeMessageIdList=t;let o=this.splitMessageReceivedArray.get(n);o&&(o=o.filter(e=>!t.includes(e.messageId)),this.splitMessageReceivedArray.set(n,o)),yield this.syncCache()}}}return i})}mergePackageArray(e,t){return a(this,void 0,void 0,function*(){if((0,g.logDebug)("append sending array"),e){let e=t.filter(e=>{let t=e.topicId,n=!0,i=this.splitMessageSendArray.get(t);return null==i||i.forEach(t=>{t.package_group_id==e.package_group_id&&t.total_count==e.total_count&&t.package_index==e.package_index&&(n=!1)}),n});if(e.length>0){let t=e[0].topicId,n=this.splitMessageSendArray.get(t);n||(n=[]),n=n.concat(e),this.splitMessageSendArray.set(t,n),(0,g.logDebug)("append sending array (after filted): ",n)}}else{let e=t.filter(e=>{let t=e.topicId,n=!0,i=this.splitMessageReceivedArray.get(t);return null==i||i.forEach(t=>{t.messageId==e.messageId&&(n=!1)}),n});if(e.length>0){let t=e[0].topicId,n=this.splitMessageReceivedArray.get(t);n||(n=[]),n=n.concat(e),this.splitMessageReceivedArray.set(t,n),(0,g.logDebug)("append received array (after filted): ",n)}}})}syncCache(){return a(this,void 0,void 0,function*(){(0,g.logDebug)("sync split message cache"),yield this.splitPackageCache.setItem(f,this.splitMessageReceivedArray),yield this.splitPackageCache.setItem(m,this.splitMessageSendArray),yield this.splitPackageCache.setItem(v,this.splitMessageSenderVersionMap)})}recoverFromCache(){return a(this,void 0,void 0,function*(){let e=yield this.splitPackageCache.getItem(f);e?this.splitMessageReceivedArray=e:this.splitMessageReceivedArray=new Map;let t=yield this.splitPackageCache.getItem(m);t?this.splitMessageSendArray=t:this.splitMessageSendArray=new Map;let n=yield this.splitPackageCache.getItem(v);n?this.splitMessageSenderVersionMap=n:this.splitMessageSenderVersionMap=new Map})}}t.ConnectionSplitPackages=O},9294:(e,t,n)=>{"use strict";n(66024),n(42329),n(16812),n(22334)},9407:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(t,n);(!r||("get"in r?!t.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,r)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),r(n(77551),t),r(n(17172),t)},10002:(e,t,n)=>{"use strict";n(66024)},10019:(e,t,n)=>{"use strict";n(66024),n(58762)},10660:(e,t,n)=>{"use strict";n(66024),n(70078),n(37124),n(99109),n(93367)},11082:(e,t,n)=>{"use strict";n(66024),n(53421),n(29163)},11147:(e,t,n)=>{"use strict";n(66024)},12240:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NameSpaceKeyStarknet=t.NameSpaceKeyTron=t.NameSpaceKeyCosmos=t.NameSpaceKeyAptos=t.NameSpaceKeyBtc=t.NameSpaceKeySui=t.NameSpaceKeyTON=t.NameSpaceKeySOL=t.NameSpaceKeyEip155=void 0,t.NameSpaceKeyEip155="eip155",t.NameSpaceKeySOL="solana",t.NameSpaceKeyTON="ton",t.NameSpaceKeySui="sui",t.NameSpaceKeyBtc="btc",t.NameSpaceKeyAptos="aptos",t.NameSpaceKeyCosmos="cosmos",t.NameSpaceKeyTron="tron",t.NameSpaceKeyStarknet="starknet"},12502:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CONNECT_METHOD_BATCH_FETCHMSG=t.CONNECT_METHOD_FETCHMSG=t.CONNECT_METHOD_RECEIVE=t.CONNECT_METHOD_UNSUB=t.CONNECT_METHOD_SUB=t.CONNECT_METHOD_PUBLISH=t.CONNECT_METHOD_LOGIN=t.CONNECT_METHOD_PUSH=void 0,t.CONNECT_METHOD_PUSH="push",t.CONNECT_METHOD_LOGIN="login",t.CONNECT_METHOD_PUBLISH="publish",t.CONNECT_METHOD_SUB="subscribe",t.CONNECT_METHOD_UNSUB="unsubscribe",t.CONNECT_METHOD_RECEIVE="receive",t.CONNECT_METHOD_FETCHMSG="fetchMessages",t.CONNECT_METHOD_BATCH_FETCHMSG="batchFetchMessages"},12597:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getRpcUrl=function(e,t,n){var i;let o=r(e);return(null===(i=t.rpcMap)||void 0===i?void 0:i[o.reference])||""},t.getChainId=function(e){return e.includes(":")?e.split(":")[1]:e},t.fromAccountToAddress=function(e){if(!e)return"";try{let t=e.split(":").slice(2),n=t.length>0?t.join(":"):"";return(0,i.logDebug)("fromAccountToAddress address and account:",n,e),n}catch(t){return(0,i.logError)("fromAccountToAddress error:",e),""}},t.convertChainIdToNumber=function(e){return"number"==typeof e?e:e.includes("0x")?parseInt(e,16):isNaN(Number(e=e.includes(":")?e.split(":")[1]:e))?e:Number(e)},t.parseChainId=r,t.mergeArrays=function(e=[],t=[]){return[...new Set([...e,...t])]},t.syncAddressAvailable=function(e){return!(!e||"OKX Wallet"!==e.appName||(0,i.versionCompare)("6.97.0",e.appVersion)>0)&&o()},t.syncAddressHostAvailable=o;let i=n(86745);function r(e){let[t,n]=e.split(":");return{namespace:t,reference:n}}function o(){try{return!!window.okxGlobal}catch(e){return!1}}},12861:(e,t,n)=>{"use strict";var i;!function(e){e.V1="V1",e.V2="V2",e.V3="V3"}(i||(i={}))},12904:(e,t,n)=>{"use strict";n(24840)},13095:(e,t,n)=>{"use strict";n.d(t,{V:()=>o});var i=n(27116),r=n(4179);function o({policyAddress:e=r.aV,policyFlag:t=r.CH.FOR_ALL_VALIDATION}){return{getPolicyData:()=>"0x",getPolicyInfoInBytes:()=>(0,i.aP)([t,e]),policyParams:{type:"sudo",policyAddress:e,policyFlag:t}}}},13160:(e,t,n)=>{"use strict";n(66024)},13239:(e,t,n)=>{"use strict";n(66024),n(53421),n(21256),n(91206),n(5949),n(97730)},13891:(e,t,n)=>{"use strict";var i;!function(e){e.Blockchain="blockchain",e.Email="email",e.Oauth="oauth",e.Passkey="passkey",e.PhoneNumber="phoneNumber",e.ExternalUser="externalUser"}(i||(i={}))},14066:(e,t,n)=>{"use strict";n(38949)},14285:(e,t,n)=>{"use strict";n(36389)},14937:(e,t,n)=>{"use strict";var i;!function(e){e.Direct="direct",e.Enterprise="enterprise",e.Indirect="indirect",e.None="none"}(i||(i={}))},15283:(e,t,n)=>{"use strict";n(66024)},15299:(e,t,n)=>{"use strict";n.d(t,{R:()=>a});var i=n(52987),r=n(43126);let o="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";BigInt(0);let s=BigInt(58);function a(e){let t=(0,i.q5)(e),n=(0,r.Dg)(t),a="";for(;n;)a=o[Number(n%s)]+a,n/=s;for(let e=0;e<t.length&&!t[e];e++)a=o[0]+a;return a}},15423:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BtcMethods=t.SuiMethods=t.TONMethods=t.AptosMethods=t.SOLANAMethods=t.Eip55Methods=void 0,t.hasOKXInjectedProvider=function(){return void 0!==function(e){let t=(e,n)=>{let[i,...r]=n.split("."),o=e[i];if(o)return 0===r.length?o:t(o,r.join("."))};if("undefined"!=typeof window)return t(window,e)}("okxwallet")},t.Eip55Methods=["personal_sign","eth_signTypedData_v4","eth_sendTransaction","wallet_addEthereumChain","wallet_watchAsset","wallet_switchEthereumChain","eth_requestAccounts","eth_accounts","eth_chainId"],t.SOLANAMethods=["solana_signTransaction","solana_signMessage","solana_signAllTransactions","solana_signAndSendTransaction"],t.AptosMethods=["aptos_signMessage","aptos_signTransaction","aptos_signAndSubmitTransaction"],t.TONMethods=["ton_sendTransaction"],t.SuiMethods=["sui_signMessage","sui_signPersonalMessage","sui_signTransactionBlock","sui_signAndExecuteTransactionBlock"],t.BtcMethods=["btc_signMessage","btc_signPsbts","btc_send","btc_sendInscription","btc_signAndPushPsbt","btc_inscribeTransfer","btc_sendRunes"]},15933:(e,t,n)=>{"use strict";n(66024),n(11082)},15983:(e,t,n)=>{"use strict";var i;n(66024),function(e){e.Custom="custom",e.Default="default"}(i||(i={}))},16024:(e,t,n)=>{"use strict";n(66024)},16146:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OKXCONNECTOR_JWT_TTL=t.OKXCONNECTOR_JWT_WALLET_SIDE=t.OKXCONNECTOR_JWT_SIDE=void 0,t.OKXCONNECTOR_JWT_SIDE="wallet",t.OKXCONNECTOR_JWT_WALLET_SIDE="dapp",t.OKXCONNECTOR_JWT_TTL=864e5},16188:(e,t,n)=>{"use strict";var i;!function(e){e.Ethereum="ethereum",e.Solana="solana"}(i||(i={}))},16812:(e,t,n)=>{"use strict";var i;!function(e){e.Pending="pending",e.Complete="complete"}(i||(i={}))},16949:(e,t,n)=>{"use strict";n.d(t,{default:()=>r.a});var i=n(42150),r=n.n(i)},17172:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PROVIDER_EVENTS=void 0,t.PROVIDER_EVENTS={DEFAULT_CHAIN_CHANGED:"default_chain_changed",UPDATE_NAMESPACES:"update_name_spaces",SESSION_CONNECTING:"session_connecting"}},17228:(e,t,n)=>{"use strict";n(59293),n(83166)},18322:(e,t,n)=>{"use strict";var i;!function(e){e.Ordinals="ordinals",e.Payment="payment",e.Cosmos="cosmos",e.Evm="evm"}(i||(i={}))},18534:(e,t,n)=>{"use strict";n(66024)},18627:(e,t,n)=>{"use strict";var i;!function(e){e.Ok="OK",e.Blocked="BLOCKED",e.Failed="FAILED"}(i||(i={}))},18794:(e,t,n)=>{"use strict";var i;!function(e){e.Email="email",e.Username="username",e.NameServiceSubdomainHandle="name-service-subdomain-handle"}(i||(i={}))},18974:(e,t,n)=>{"use strict";n.d(t,{F:()=>v});var i=n(52336),r=n(78476),o=n(55250),s=n(2700),a=n(27116),c=n(5406),l=n(46507),d=n(35997),u=n(11945),h=n(73531),p=n(87083),g=n(4179);let f=e=>(0,s.h)([{name:"policiesData",type:"bytes[]"}],[e.map(e=>(0,a.xW)([e.getPolicyInfoInBytes(),e.getPolicyData()]))]),m=e=>(0,s.h)([{name:"signerData",type:"bytes"}],[(0,a.xW)([e.signerContractAddress,e.getSignerData()])]);async function v(e,{signer:t,policies:n,entryPoint:v,kernelVersion:O,flag:_=g.CH.FOR_ALL_VALIDATION}){let C=await (0,u.T)(e);if("v0.7"!==(0,r.Fn)(v))throw Error("Only EntryPoint 0.7 is supported");let y=async e=>(0,s.h)([{name:"policyAndSignerData",type:"bytes[]"}],[[...n.map(e=>(0,a.xW)([e.getPolicyInfoInBytes(),e.getPolicyData()])),(0,a.xW)([_,t.signerContractAddress,t.getSignerData()])]]),E=()=>{let e=(0,s.h)([{name:"policyAndSignerData",type:"bytes[]"}],[[f(n),_,m(t)]]);return(0,c.di)((0,l.S)(e),0,4)};return{...t.account,supportedKernelVersions:">=0.3.0",validatorType:"PERMISSION",address:d.Xd,source:"PermissionValidator",getEnableData:y,getIdentifier:E,signMessage:async({message:e})=>(0,a.xW)(["0xff",await t.account.signMessage({message:e})]),signTypedData:async e=>(0,a.xW)(["0xff",await t.account.signTypedData(e)]),signUserOperation:async e=>{let n=(0,o.Z)({userOperation:{...e,signature:"0x"},entryPoint:v,chainId:C}),i=await t.account.signMessage({message:{raw:n}});return(0,a.xW)(["0xff",i])},getNonceKey:async(e,t)=>t||0n,getDummySignature:async e=>(0,a.xW)(["0xff",t.getDummySignature()]),getPluginSerializationParams:()=>({policies:n}),isEnabled:async(n,r)=>{try{return(await (0,p.T)(e,h.J,"readContract")({abi:i.aU,address:n,functionName:"permissionConfig",args:[E()]})).signer===t.signerContractAddress}catch(e){return!1}}}}},19207:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((i=i.apply(e,t||[])).next())})},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.OKXReporter=t.OKXReportSide=t.OKXReportType=t.versionStr=void 0;let o=r(n(52315)),s=n(86273),a=n(80098),c=n(83819),l=r(n(331)),d=r(n(87124));t.versionStr="1.7.8";let u=["https://www.okx.com/dappstat/wallet-connect","https://www.okx.ac/dappstat/wallet-connect"],h="OKX_RP_UUID_CK",p={headers:{Accept:"*/*","Content-Type":"text/plain"},method:"POST"};t.OKXReportType={PAGE_IN:"page_in",PAGE_OUT:"page_out",CLICK:"click",LOG:"log"},t.OKXReportSide={DAPP:"dapp",WALLET:"wallet"};let g=(e,...t)=>i(void 0,[e,...t],void 0,function*(e,t={},n=5e3){for(let i of e)try{let e=new AbortController,r=e.signal,s=(0,o.default)(i,Object.assign(Object.assign({},t),{signal:r})),a=new Promise((t,i)=>setTimeout(()=>{e.abort(),i(Error("Request timed out"))},n)),c=yield Promise.race([s,a]);if(c.ok)return c;if(502==c.status)return console.error("Fetch error status 502",i),c}catch(e){console.error(`Fetch error for ${i}:`,e)}throw console.error("'All fetch attempts failed.'"),Error("All fetch attempts failed.")});class f{constructor(){this.currentSide=t.OKXReportSide.DAPP,this.currentVersion=t.versionStr,this.storage=l.default.createInstance({name:"OKXReporter"}),this.recordList=[],this.currentUUID=(0,c.toHexString)(d.default.randomBytes(16))}configVersionAndSide(e,t,n){this.currentVersion=e+s.logVersion,this.currentSide=t,this.appName=n}get recordCacheKey(){return"OKX_RP_CK@"+this.appName}get reportPlatform(){return(0,c.isMobileUserAgent)()?(0,c.isIos)()?"iOS":"android":"pc"}beginReport(){return i(this,void 0,void 0,function*(){this.startErrorCatching();let e=yield this.storage.getItem(this.recordCacheKey),t=yield this.storage.getItem(h);t?this.currentUUID=t:this.storage.setItem(h,this.currentUUID),e&&(this.recordList=e,(0,s.logDebug)("resume records from cache length: ",this.recordList.length),yield this.sendCachedRecords())})}startErrorCatching(){(0,a.getWindow)()&&(0,s.logDebug)("begin capture console error")}cachedErrors(){return this.recordList}sendRecord(e){return i(this,void 0,void 0,function*(){return new Promise((t,n)=>i(this,void 0,void 0,function*(){try{let i=JSON.stringify(e);(0,s.logDebug)("[REPORT] record: ",i);let r=yield g(u,Object.assign(Object.assign({},p),{body:i}));(0,s.logDebug)("[REPORT] get rsp:",r),r&&r.status&&200==r.status?(this.recordList=this.recordList.filter(t=>t.timestamp!=e.timestamp||t.content!=e.content),yield this.storage.setItem(this.recordCacheKey,this.recordList),t(!0)):n(!1)}catch(e){(0,s.logDebug)("send record error:",e),t(!0)}}))})}sendRecordContent(e,t,n){return i(this,void 0,void 0,function*(){var i,r,o,s;let c=null===(i=(0,a.getWindow)())||void 0===i?void 0:i.location.pathname,l=null===(r=(0,a.getWindow)())||void 0===r?void 0:r.location.origin;c&&l&&(l+=c);let d=null===(o=(0,a.getWindow)())||void 0===o?void 0:o.navigator.language,u=null===(s=(0,a.getWindow)())||void 0===s?void 0:s.navigator.userAgent,h=this.reportPlatform,p={uuid:this.currentUUID,version:this.currentVersion,content:e,action:n,side:this.currentSide,timestamp:new Date().getTime(),url:l,lang:d,type:t,platform:h,"user-agent":u};yield this.markRecordItem(p),yield this.sendRecord(p)})}sendCachedRecords(){return i(this,void 0,void 0,function*(){return new Promise((e,t)=>i(this,void 0,void 0,function*(){let n=this.recordList.map(e=>this.sendRecord(e));(0,s.logDebug)("[REPORT] submit & clean recorded caches begin @",new Date().toUTCString()),Promise.allSettled(n).then(n=>{(0,s.logDebug)("[REPORT] submit & clean recorded caches ends @",new Date().toUTCString());let i=[];n.forEach((e,t)=>{"rejected"==e.status&&i.push(t)}),this.recordList=this.recordList.filter((e,t)=>!i.includes(t)),this.storage.setItem(this.recordCacheKey,this.recordList).then(function(t){e()}).catch(function(e){t(e)})})}))})}markRecordItem(e){return i(this,void 0,void 0,function*(){if(this.recordList.push(e),this.recordList.length>100){let e=this.recordList.length-100;this.recordList.splice(0,e)}return new Promise((t,n)=>{this.storage.setItem(this.recordCacheKey,this.recordList).then(function(n){t(e)}).catch(function(e){n(e)})})})}markRecord(e,t,n,r){return i(this,void 0,void 0,function*(){var i,o,s,c;let l=null===(i=(0,a.getWindow)())||void 0===i?void 0:i.location.pathname,d=null===(o=(0,a.getWindow)())||void 0===o?void 0:o.location.origin;l&&d&&(d+=l);let u=null===(s=(0,a.getWindow)())||void 0===s?void 0:s.navigator.language,h=this.reportPlatform,p=null===(c=(0,a.getWindow)())||void 0===c?void 0:c.navigator.userAgent,g={uuid:this.currentUUID,version:this.currentVersion,content:e,action:n,side:r,timestamp:new Date().getTime(),url:d,lang:u,type:t,platform:h,"user-agent":p};return yield this.markRecordItem(g)})}}t.OKXReporter=f},19425:(e,t,n)=>{"use strict";n(66024)},19561:(e,t,n)=>{"use strict";n(66024)},20630:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((i=i.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.OkxwalletInjectTonsdkConnector=void 0;let r=n(25840),o=n(59564),s=n(83819),a=n(55263);class c extends r.InjectConnector{constructor(){super(),this.walletName="OKX Wallet extension",this.walletNameKey="walletModal.mobileConnectionModal.connectInjected"}checkWalletMatch(){return i(this,void 0,void 0,function*(){var e,t,n;let i;null===(e=this.connectionManager)||void 0===e||e.tonsdkConnectStorage.synchronizedCache();let r=null===(t=this.connectionManager)||void 0===t?void 0:t.tonsdkConnectStorage.getItem("ton_connect_info_adapter_universal");if(!r||!(null==r?void 0:r.content))throw new o.OKXConnectError(o.OKX_CONNECT_ERROR_CODES.NOT_CONNECTED_ERROR);let c=JSON.parse(null==r?void 0:r.content),l=c.connectEvent.payload.items.find(e=>"name"in e&&"ton_addr"===e.name);if(this.dappInfo=c.dappInfo,l&&"address"in l&&(i=l.address),!i)throw new o.OKXConnectError(o.OKX_CONNECT_ERROR_CODES.WALLET_NOT_SUPPORTED);if((0,s.logDebug)(`inject-connector localTonaddress : ${i}`),(0,a.isDevice)("mobile")){let e;e={namespace:o.NameSpaceKeyTON,chains:[o.TON_CHAINS.MAINNET],params:{ton_addr:{name:"ton_addr"}}};let t=yield this.getAccountByRequestWallets(!1,!1,!1,[e],[]);if(t&&1==t.length){let e=null===(n=t[0].data)||void 0===n?void 0:n.ton_addr;if(i===(null==e?void 0:e.address))return}}else{let e=yield window.okxTonWallet.tonconnect.restoreConnection();if("connect"===e.event&&e.payload.items.find(e=>"ton_addr"===e.name).address==i)return}throw new o.OKXConnectError(o.OKX_CONNECT_ERROR_CODES.WALLET_NOT_SUPPORTED)})}}t.OkxwalletInjectTonsdkConnector=c},20771:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((i=i.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.WsConnector=void 0;let r=n(86094),o=n(86273);class s{constructor(){this.disconnectListener=[],this.walletName="",this.walletNameKey="",this.enable=!0,this.pendingRequests=new Map,(0,o.getDefaultReporter)().beginReport()}setAccountChangeListener(e){this.accountChangeListener=e}setConnectionManager(e){this.connectionManager=e}addConnectionListener(){var e;null===(e=this.connectionManager)||void 0===e||e.addListener("sdk_response",(e,t)=>{var n=(0,r.safeJsonParse)(t);(0,o.logDebug)(`Engine ==>> addListener ==> success ==> ${n}`),this.handleResponse(e,n)},function(){})}addDisconnectListener(e){this.disconnectListener.push(e)}connectManagerDisconnect(){return i(this,arguments,void 0,function*(e=!1){var t;yield null===(t=this.connectionManager)||void 0===t?void 0:t.disconnect(e)})}openWallet(e){}bindRequestForPromise(e,t){this.pendingRequests.set(e,t)}send(e,t,n){return i(this,void 0,void 0,function*(){var i,s;try{delete e.injectParams}catch(e){}(0,o.logDebug)("Engine ==>> send  request==>",JSON.stringify(e));let a=this.getRequestId();try{let c=yield null===(i=this.connectionManager)||void 0===i?void 0:i.send(JSON.stringify(Object.assign(Object.assign({},e),{requestId:a})),n);c&&(null===(s=this.connectionManager)||void 0===s||s.events.once(c.toString(),e=>{var n;(0,o.logDebug)(`Engine ==> send => onAck => ${(0,r.safeJsonStringify)(e)}`),e&&e.result&&(null===(n=t.onAck)||void 0===n||n.call(t))})),t.resolve&&this.bindRequestForPromise(a,t.resolve)}catch(e){return Promise.reject(e)}})}restoreconnect(e,t){return i(this,void 0,void 0,function*(){var n;yield null===(n=this.connectionManager)||void 0===n?void 0:n.restoreConnect(e.topic),t(e)})}restoreconnectFromTopic(e){return i(this,void 0,void 0,function*(){var t;yield null===(t=this.connectionManager)||void 0===t?void 0:t.restoreConnect(e)})}getRequestId(){let e=Date.now().toString();return(0,o.logDebug)("Engine ==>> getRequestId ==>",e),e}handleResponse(e,t){if((0,o.logDebug)(`Engine ==>> handleResponse_1  ======>response: ${(0,r.safeJsonStringify)(t)}`,e),"requestId"in t){(0,o.logDebug)("Engine ==>> handleResponse_2  ===> in response");let e=t.requestId,n=this.pendingRequests.get(e);n?((0,o.logDebug)("Engine ==>> handleResponse_3  ===> find resolve:",n),n(t),this.pendingRequests.delete(e)):((0,o.logDebug)("Engine ==>> handleResponse_3  ===> not find resolve:"),"disconnect"===t.method&&(this.disconnectListener.forEach(e=>e()),this.disconnectListener=[],this.clearData()))}}getCurrentConnectionReady(){var e;return!!(null===(e=this.connectionManager)||void 0===e?void 0:e.getCurrentConnectionReady())}saveSessionContent(e,t){var n;null===(n=this.connectionManager)||void 0===n||n.saveSessionContent(e,t)}getSessionContent(e){var t;return null===(t=this.connectionManager)||void 0===t?void 0:t.getSessionContent(e)}setOnConnectResultListener(e){this.connectResultListener=e}getTag(){return""}toJSON(){return"ws-connector"}clearData(){this.pendingRequests.clear()}}t.WsConnector=s},21250:(e,t,n)=>{"use strict";n(85666)},21256:(e,t,n)=>{"use strict";n(66024),n(51227)},21309:function(e,t,n){"use strict";var i,r=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(t,n);(!r||("get"in r?!t.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,r)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||(i=function(e){return(i=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t})(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=i(e),s=0;s<n.length;s++)"default"!==n[s]&&r(t,e,n[s]);return o(t,e),t}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Storage=void 0;let c=n(54934),l=a(n(87124)),d=n(34554),u=n(83819),h=s(n(86273)),p=n(83819),g=n(15563);class f{constructor(e,t){let n=(0,d.resolveLocalStorage)();this.storeKey="",this.cipherIV="",this.subKey=e,h.logDebug("--------get current local storage --------"),h.logDebug(n),this.synchronizedCache()}checkAndUpgradeCache(e,t){if(e&&e.length>0&&t&&t.length>0){h.logDebug("--------get current local storage --------"),h.logDebug(localStorage);let n=localStorage.getItem(f.cacheKey+e);if(null==n){h.logDebug("no pre cache content");return}h.logDebug(n),(null==n?void 0:n.length)>0&&(h.logDebug("write in cache content: ",e,"->",t),localStorage.setItem(f.cacheKey+t,n),h.logDebug("clean in cache content: ",e),localStorage.removeItem(f.cacheKey+e))}else h.logDebug("no pre cache key:",e)}saveContent(e,t,n="-"){let i={id:n,timestamp:Date.now().toString(),content:e};this.saveItem(i,t)}saveItem(e,t){let n=f.cacheKey+this.subKey,i=(0,d.resolveLocalStorage)();h.logDebug(this.cache),h.logDebug(`get cache obj: ${this.cache}, ${t}, ${e}`),this.cache[t]=e;let r=(0,u.safeJsonStringify)(this.cache);h.logDebug(`STORAGE: ${t} @ ${this.cache}`),i.setItem(n,r)}getItem(e){return h.logDebug(`STORAGE >> getItem: ${e} @ ${this.cache}`),this.cache[e]}synchronizedCache(){let e=localStorage.getItem(f.cacheKey+this.subKey);if(null==e){h.logDebug("with no cache"),this.cache={};return}if(h.logDebug(e),(null==e?void 0:e.length)>0){var t=(0,u.safeJsonParse)(e);this.cache=t}h.logDebug(`get cache obj: ${this.cache}`),(void 0===this.cache||null==this.cache)&&(this.cache={})}getCachedPBKDF2InfoKey(){var e,t,n,i;if(this.storeKey.length>0&&(null===(e=this.cipherIV)||void 0===e?void 0:e.length)>0)return{pw:this.storeKey,iv:this.cipherIV};let r=null===(t=this.getItem(c.OKXCONNECTOR_STORAGER_CRYPTO_SALT))||void 0===t?void 0:t.content;r||(r=(0,d.toHexString)(l.default.randomBytes(24)),this.saveContent(r,c.OKXCONNECTOR_STORAGER_CRYPTO_SALT));let o=null===(n=this.getItem(c.OKXCONNECTOR_STORAGE_CRYPTO_PASSWORD))||void 0===n?void 0:n.content;o||(o=(0,d.toHexString)(l.default.randomBytes(32)),this.saveContent(o,c.OKXCONNECTOR_STORAGE_CRYPTO_PASSWORD));let s=null===(i=this.getItem(c.OKXCONNECTOR_STORAGE_CRYPTO_CIPHERIV))||void 0===i?void 0:i.content;if(!s){let e=l.default.randomBytes(16);s=(0,d.toHexString)(e),this.saveContent(s,c.OKXCONNECTOR_STORAGE_CRYPTO_CIPHERIV)}return this.cipherIV=s,this.storeKey=(0,g.PBKDF2)(o,r,{iterations:10}).toString(),{pw:this.storeKey,iv:this.cipherIV}}encryptStoreMsg(e,t){(0,p.logDebug)(`encryptStoreMsg  encryptStoreMsg start ${Date.now()}`);let n=this.getCachedPBKDF2InfoKey();(0,p.logDebug)(`encryptStoreMsg  encryptStoreMsg mid ${Date.now()}`);var i=g.AES.encrypt(e,n.pw).toString();this.saveContent(i,t),(0,p.logDebug)(`encryptStoreMsg  encryptStoreMsg end ${Date.now()}`)}getAndDecrypt(e){(0,p.logDebug)(`encryptStoreMsg  getAndDecrypt start ${Date.now()}`);let t=this.getItem(e);if(t&&t.content){let e=this.getCachedPBKDF2InfoKey();(0,p.logDebug)(`encryptStoreMsg  getAndDecrypt mid ${Date.now()}`);let n=g.AES.decrypt(t.content,e.pw).toString(g.enc.Utf8);return(0,p.logDebug)(`encryptStoreMsg  getAndDecrypt end ${Date.now()}`),n}return null}clearCache(e){if(void 0===e){let e=(0,d.resolveLocalStorage)();this.cache={};let t=f.cacheKey+this.subKey;e.setItem(t,"")}else{let t=f.cacheKey+this.subKey,n=(0,d.resolveLocalStorage)();h.logDebug(this.cache),this.cache[e]=null;let i=(0,u.safeJsonStringify)(this.cache);h.logDebug(`STORAGE: clean key ${e} @ ${this.cache}`),n.setItem(t,i)}}}t.Storage=f,f.cacheKey="OKXStorageKey"},21680:(e,t,n)=>{"use strict";n(66024),n(21891),n(39328)},21891:(e,t,n)=>{"use strict";n(66024),n(33236),n(71995)},22321:(e,t,n)=>{"use strict";var i;!function(e){e.Pending="pending",e.Rejected="rejected",e.Accepted="accepted"}(i||(i={}))},22334:(e,t,n)=>{"use strict";n(66024),n(61316),n(54274),n(91492)},23668:(e,t,n)=>{"use strict";n.d(t,{o:()=>P});var i=n(14627),r=n(24059),o=n(97707),s=n(78033),a=n(89861),c=n(71167);function l(e,t,n,i){return new(n||(n=Promise))(function(r,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((i=i.apply(e,t||[])).next())})}"function"==typeof SuppressedError&&SuppressedError;var d=n(2527),u=n(80130),h=n(96519),p=n(40432);let g=e=>{let{connectorId:t,wallet:n}=e;return(0,d.U)(e=>({connect(){return l(this,void 0,void 0,function*(){if(!n.connector)throw Error("WalletConnector is not defined");return n.connector.on("accountChange",this.handleAccountsChange.bind(this)),n.connector.on("chainChange",this.handleChainChange.bind(this)),n.connector.on("disconnect",this.onDisconnect.bind(this)),{accounts:yield this.getAccounts(),chainId:yield this.getChainId()}})},disconnect(){return l(this,void 0,void 0,function*(){n.connector.off("accountChange",this.handleAccountsChange.bind(this)),n.connector.off("chainChange",this.handleChainChange.bind(this)),n.connector.off("disconnect",this.onDisconnect.bind(this))})},getAccounts(){return l(this,void 0,void 0,function*(){return[(0,u.b)(n.address)]})},getChainId(){return l(this,void 0,void 0,function*(){let e=yield n.connector.getNetwork();if(!e)throw Error("Network is not defined");return Number(e)})},getClient(t){return l(this,void 0,void 0,function*(){var i,r;let o=yield n.getWalletClient();return o.account&&o.chain?o:(0,h.F)({account:o.account||(null===(i=yield this.getAccounts())||void 0===i?void 0:i[0]),chain:null!==(r=o.chain||e.chains.find(e=>e.id===(null==t?void 0:t.chainId)))&&void 0!==r?r:e.chains[0],transport:(0,p.I)(o)})})},getProvider(){return l(this,void 0,void 0,function*(){return n.getWalletClient()})},handleAccountsChange(e){let{accounts:t}=e;this.onAccountsChanged(t)},handleChainChange(e){let{chain:t}=e;this.onChainChanged(t)},id:t,isAuthorized(){return l(this,void 0,void 0,function*(){var e,t;return(null!==(t=yield null===(e=n.connector)||void 0===e?void 0:e.getConnectedAccounts())&&void 0!==t?t:[]).includes(n.address)})},name:"Dynamic",onAccountsChanged(e){},onChainChanged(t){e.emitter.emit("change",{chainId:Number(t)})},onDisconnect(){},switchChain(t){return l(this,arguments,void 0,function*(t){let{chainId:i}=t,r=e.chains.find(e=>e.id===i);if(!r)throw Error("Chain ".concat(i," is not supported"));return yield n.switchNetwork(i),r})},type:"dynamic"}))};var f=n(84630),m=n(98559);async function v(e,t){let n;if((n="function"==typeof t.connector?e._internal.connectors.setup(t.connector):t.connector).uid===e.state.current)throw new m.nM;try{e.setState(e=>({...e,status:"connecting"})),n.emitter.emit("message",{type:"connecting"});let{connector:i,...r}=t,o=await n.connect(r),s=o.accounts;return n.emitter.off("connect",e._internal.events.connect),n.emitter.on("change",e._internal.events.change),n.emitter.on("disconnect",e._internal.events.disconnect),await e.storage?.setItem("recentConnectorId",n.id),e.setState(e=>({...e,connections:new Map(e.connections).set(n.uid,{accounts:s,chainId:o.chainId,connector:n}),current:n.uid,status:"connected"})),{accounts:s,chainId:o.chainId}}catch(t){throw e.setState(e=>({...e,status:e.current?"connected":"disconnected"})),t}}var O=n(71241);let _=[];function C(e){let t=e.connectors;return(0,O.b)(_,t)?_:(_=t,t)}async function y(e,t={}){let n;if(t.connector)n=t.connector;else{let{connections:t,current:i}=e.state,r=t.get(i);n=r?.connector}let i=e.state.connections;n&&(await n.disconnect(),n.emitter.off("change",e._internal.events.change),n.emitter.off("disconnect",e._internal.events.disconnect),n.emitter.on("connect",e._internal.events.connect),i.delete(n.uid)),e.setState(e=>{if(0===i.size)return{...e,connections:new Map,current:null,status:"disconnected"};let t=i.values().next().value;return{...e,connections:new Map(i),current:t.connector.uid}});{let t=e.state.current;if(!t)return;let n=e.state.connections.get(t)?.connector;if(!n)return;await e.storage?.setItem("recentConnectorId",n.id)}}let E=[];function b(e){let t=[...e.state.connections.values()];return"reconnecting"===e.state.status||(0,O.b)(E,t)?E:(E=t,t)}var N=n(53775);let R=e=>{let{children:t,connector:n,wallet:i}=e,{state:{status:c}}=(0,s.U)(),{connect:d}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{mutation:t}=e,n=(0,s.U)(e),{mutate:i,mutateAsync:r,...a}=(0,f.useMutation)({...t,mutationFn:e=>v(n,e),mutationKey:["connect"]});return(0,o.useEffect)(()=>n.subscribe(e=>{let{status:t}=e;return t},(e,t)=>{"connected"===t&&"disconnected"===e&&a.reset()}),[n,a.reset]),{...a,connect:i,connectAsync:r,connectors:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,s.U)(e);return(0,o.useSyncExternalStore)(e=>(function(e,t){let{onChange:n}=t;return e._internal.connectors.subscribe((e,t)=>{n(Object.values(e),t)})})(t,{onChange:e}),()=>C(t),()=>C(t))}({config:n})}}(),{disconnect:u}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{mutation:t}=e,n=(0,s.U)(e),{mutate:i,mutateAsync:r,...a}=(0,f.useMutation)({...t,mutationFn:e=>y(n,e),mutationKey:["disconnect"]});return{...a,connectors:(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,s.U)(e);return(0,o.useSyncExternalStore)(e=>(function(e,t){let{onChange:n}=t;return e.subscribe(()=>b(e),n,{equalityFn:O.b})})(t,{onChange:e}),()=>b(t),()=>b(t))})({config:n}).map(e=>e.connector),disconnect:i,disconnectAsync:r}}(),h=(0,o.useRef)(void 0),p=!!h.current,g=(0,o.useCallback)(()=>{N.vF.logVerboseTroubleshootingMessage("[SyncDynamicWagmi] disconnecting wagmi - previous status: ",c),"disconnected"!==c&&(u(),h.current=void 0)},[u,c]),m=(0,o.useCallback)((e,t,n)=>{N.vF.logVerboseTroubleshootingMessage("[SyncDynamicWagmi] connecting wagmi - previous status: ",c),("disconnected"===c||n)&&(h.current=t,d({connector:e}))},[d,c]),_=(0,o.useCallback)(()=>l(void 0,void 0,void 0,function*(){if(!n||!(null==i?void 0:i.address)){g();return}let e="".concat(n.id,"-").concat(i.address);e!==h.current&&(p&&g(),m(n,e,p))}),[m,n,g,p,null==i?void 0:i.address]);return(0,a.kN)(null==i?void 0:i.connector,"accountChange",()=>{_()}),(0,o.useEffect)(()=>{_()},[_,c]),(0,r.jsx)(r.Fragment,{children:t})},w=new(n(30968)).V("DynamicWagmiConnector"),S=function(){let{suppress:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{suppress:!1},t=(0,s.U)(),{networkConfigurations:n}=(0,a.Ww)();(0,o.useEffect)(()=>{if(!(null==n?void 0:n.evm)||e)return;let i=t.chains,r=i.map(e=>e.id),o=n.evm,s=o.map(e=>e.chainId);i.forEach(e=>{if(!s.includes(e.id)){let t="Chain (id: ".concat(e.id," name: ").concat(e.name,") is present in the Wagmi config, but is not present in the Dynamic configuration.")+" Please make sure to enable the chain in your Dynamic Dashboard, or add it to the evmNetworks prop on DynamicContextProvider. For more information, see: https://docs.dynamic.xyz/guides/frameworks/wagmi-v2#chain-configuration";w.warn(t)}}),o.forEach(e=>{if(!r.includes(Number(e.chainId))){let t="Chain (id: ".concat(e.chainId," name: ").concat(e.name,") is present in the Dynamic config, but is not present in the Wagmi configuration.")+" Please make sure to add the chain to the chains prop on the Wagmi createConfig function. For more information, see: https://docs.dynamic.xyz/guides/frameworks/wagmi-v2#chain-configuration";w.warn(t)}})},[t.chains,n,e])},T=()=>{let e=(0,o.useRef)(void 0),t=(0,o.useRef)(0);return(0,o.useCallback)(n=>(n!==e.current&&(e.current=n,t.current+=1),"dynamic-".concat(n.key,"-").concat(t.current)),[])},P=e=>{let{suppressChainMismatchError:t=!1,children:n}=e;return(0,r.jsx)(a.HB,{children:(0,r.jsx)(I,{suppressChainMismatchError:t,children:n})})},D=e=>e&&(0,c.p)(e)?e:null,I=e=>{let{suppressChainMismatchError:t=!1,children:n}=e,i=(0,s.U)(),{primaryWallet:c}=(0,a.Ww)();S({suppress:t});let l=D(c),d=T(),u=(0,o.useMemo)(()=>{if(!l)return;let e=d(l.connector);return i._internal.connectors.setup(g({connectorId:e,wallet:l}))},[i._internal.connectors,d,l]);return(0,o.useEffect)(()=>{i._internal.connectors.setState(u?[u]:[])},[i._internal.connectors,u]),(0,r.jsx)(R,{connector:u,wallet:l,children:(0,r.jsx)(a.dR,{children:n})})};(0,i.R)("@dynamic-labs/wagmi-connector","4.9.3")},23802:(e,t,n)=>{"use strict";var i;!function(e){e.Nft="nft",e.Token="token"}(i||(i={}))},24686:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((i=i.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.Engine=void 0;let r=n(59564),o=n(32945),s=n(83819),a=n(67189),c=n(86095),l=n(30193),d=n(3049);class u{constructor(e){this.connectors=[],this.useConnector=void 0,this.connectionManager=new c.ConnectionManager(e),this.addConnectionListener()}getConnector(){if(this.useConnector)return this.useConnector}setAccountChangeListener(e){for(let t of(this.accountChangeListener=e,(0,s.logDebug)("setAccountChangeListener: engine",e),this.connectors))t.setAccountChangeListener(e)}registerConnector(e){for(let t of(this.connectors=e,e))t.setConnectionManager(this.connectionManager)}hasWsConnector(){for(let e of this.connectors)if(this.isWsConnector(e))return!0;return!1}isWsConnector(e){return!!e&&(e.getTag()===a.OKX_TG_WALLET||e.getTag()===a.OKX_APP_WALLET)}isInjectedConnector(e){return!!e&&e.getTag()===a.OKX_INJECT_WALLET}universalConnect(e,t,n){return i(this,void 0,void 0,function*(){return this.addConnectionListener(),new Promise((o,c)=>i(this,void 0,void 0,function*(){var i,u,h,p;try{(0,s.logDebug)("engine universalConnect request :",JSON.stringify(e)),(0,s.logDebug)("engine universalConnect sessionConfig :",JSON.stringify(t));let f=[];e.forEach(e=>{let t=e.name;(t.startsWith("requestAccounts")||t.startsWith("ton"))&&f.push(e)}),(0,s.logDebug)("engine universalConnect universalRequest :",JSON.stringify(f));let m=this.connectionManager.getConnectInfo(),v=Date.now().toString(),O=null!==(i=t.openUniversalUrl)&&void 0!==i&&i,_={protocolVer:Number(r.tonConnectSdkVersion),topic:m.channelId,clientId:m.clientId,requestId:v,dAppInfo:this.fixDappName(t.dappInfo),requests:f,redirect:null!==(u=null==t?void 0:t.redirect)&&void 0!==u?u:"none"},C=(0,s.encodeConnectParams)(_);_.redirect=null!==(h=null==t?void 0:t.redirect)&&void 0!==h?h:"none",(0,s.logDebug)("engine universalConnect ==>>universalConnectRequest:",JSON.stringify(_));var g="";O&&(g=(0,s.getOKXLink)(_,t.useMini,t.tmaReturnUrl),(0,s.logDebug)("engine universalConnect ==>>openOKXLink:",g));let y=()=>1==this.connectors.length&&this.connectors[0].getTag()===a.OKX_INJECT_WALLET?this.connectors[0].openWallet({connectRequest:_}):t.useMini?(0,s.openOKXTMAWalletlinkWithFallback)(g):(0,s.useShortLink)()?(0,s.openOKXUniversalLink)(g):(0,s.openOKXDeeplinkWithFallback)(g);(0,s.logDebug)("engine universalConnect ==>>openOKXLink:",g);let E=(0,s.isIos)();if(E&&O&&((0,s.logDebug)(`engine universalConnect ==>>isIOS: ${E}   openUniversalLink: ${O}`),y()),this.addOnConnectResultListener(e=>{var n,i,u,h;try{if(this.addOnConnectResultListener(void 0),"connect"==e.method){(0,s.logDebug)("engin  universalConnect success connectResponse:>>>",JSON.stringify(e));let c=(0,l.buildNameSpacesByConnectResponse)(e);if(c){let l;switch((null===(i=null===(n=e.payload)||void 0===n?void 0:n.responses)||void 0===i?void 0:i[0])&&"walletName"in e.payload.responses[0]&&(l=e.payload.responses[0].walletName),null===(u=e.payload)||void 0===u?void 0:u.wallet.appName){case d.OKXWalletName:p=a.OKX_APP_WALLET;break;case d.OKXMiniWalletName:p=a.OKX_TG_WALLET;break;case d.OKXInjectWalletName:p=a.OKX_INJECT_WALLET}var p,g=this.connectors.find(e=>e.getTag()===p);if(!g)throw new r.OKXConnectError(r.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR);let h=Object.assign({topic:m.channelId,sessionConfig:t,namespaces:c},e.payload&&{wallet:Object.assign(Object.assign({},e.payload.wallet),{walletName:l})}),f=e.payload.responses.find(e=>"requestAccounts"===e.name);f&&f.connectRequestMethods&&(h.signResponse=f.connectRequestMethods),(0,s.logDebug)("engin  universalConnect success session:>>>",JSON.stringify(h)),this.isWsConnector(g)&&((0,s.logDebug)("engine update protocol version"),this.connectionManager.updateProtocolVersion(m.channelId,e.payload.wallet.maxProtocolVersion)),o(h),this.setUseConnector(g)}else throw new r.OKXConnectError(r.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR)}else if("connect_error"==e.method&&(null===(h=e.payload)||void 0===h?void 0:h.code)!=void 0)throw new r.OKXConnectError(e.payload.code)}catch(e){c(e)}}),this.hasWsConnector()){yield null===(p=this.connectionManager)||void 0===p?void 0:p.disconnect(!1);try{yield this.connectionManager.connect()}catch(e){throw(0,s.logDebug)("Engine universalConnect error",e),e}(0,s.logDebug)("engin  universalConnect ==>> connectInfoAndUrl:",n),this.sendSession(C)}if(!E&&O&&y(),(0,s.logDebug)("engin  universalConnect ==>> connectInfoAndUrl:",n),n){let e={connectRequest:_,redirect:t.redirect,tmaReturnUrl:t.tmaReturnUrl};(0,s.logDebug)("universalConnect connectInfoAndUrl info :",JSON.stringify(e)),n(e)}}catch(e){(0,s.logDebug)("Engine universalConnect catch error",e),c(e)}}))})}fixDappName(e){try{if("dapp portal"===e.name.toLowerCase()){let t=document.title;if(t||(t=this.getOGSiteName()),t)return Object.assign(Object.assign({},e),{name:e.name+" - "+t})}return e}catch(t){return e}}getOGSiteName(){let e=document.getElementsByTagName("meta"),t=["og:site_name","og:title","twitter:title"];for(let n of e){let e=n.getAttribute("property");for(let i of t)if(e==i)return n.getAttribute("content")}}addOnConnectResultListener(e){for(let t of this.connectors)this.isInjectedConnector(t)&&t.setOnConnectResultListener(e);this.connectResultListener=e}openWallet(e,t){var n;t?t.openWallet(e):null===(n=this.getConnector())||void 0===n||n.openWallet(e)}send(e,t,n){return i(this,void 0,void 0,function*(){var i;return null===(i=this.getConnector())||void 0===i?void 0:i.send(e,t,n)})}clearData(){var e;null===(e=this.getConnector())||void 0===e||e.clearData()}addDisconnectListener(e){var t;null===(t=this.getConnector())||void 0===t||t.addDisconnectListener(e)}saveSessionContent(e,t){this.connectionManager.saveSessionContent(e,t)}getSessionContent(e){var t,n=this.connectionManager.getSessionContent(e);if(n){var i="";if("object"==typeof n&&(i=(0,a.getTagByappName)(null===(t=n.wallet)||void 0===t?void 0:t.appName)),this.connectors.find(e=>e.getTag()===i))return n}}setConnectConnector(e){var t=(0,a.getTagByappName)(null==e?void 0:e.appName);t&&this.setUseConnector(this.connectors.find(e=>e.getTag()===t))}setUseConnector(e){this.useConnector=e,this.isWsConnector(e)&&e.addConnectionListener()}setSessionConnectingListener(e){this.sessionConnectingListener=e}restoreconnect(e,t){return i(this,void 0,void 0,function*(){var n;yield null===(n=this.getConnector())||void 0===n?void 0:n.restoreconnect(e,t)})}restoreconnectFromTopic(e){return i(this,void 0,void 0,function*(){this.isWsConnector(this.getConnector())&&(yield this.getConnector().restoreconnectFromTopic(e))})}getCurrentConnectionReady(e){var t;return!!(null===(t=this.getConnector())||void 0===t?void 0:t.getCurrentConnectionReady(e))}connectManagerDisconnect(){return i(this,arguments,void 0,function*(e=!1){var t;yield null===(t=this.getConnector())||void 0===t?void 0:t.connectManagerDisconnect(e)})}sendSession(e){return i(this,void 0,void 0,function*(){(0,s.logDebug)("[Connect] sendSession called:",e);let t=Date.now().toString(),n={method:"session_info",params:{protocolVersion:o.CONNECT_PROTOCOL_VER,sessionInfo:e}};yield this.connectionManager.sendRaw(JSON.stringify(Object.assign(Object.assign({},n),{requestId:t})))})}addConnectionListener(){var e;null===(e=this.connectionManager)||void 0===e||e.addListener("sdk_response",(e,t)=>{var n=(0,s.safeJsonParse)(t);(0,s.logDebug)(`Engine ==>> addListener ==> success ==> ${n}`),"connect"===n.method||"connect_error"===n.method?this.connectResultListener&&this.connectResultListener(n):"session_connecting"===n.method&&((0,s.logDebug)("Engine ==>> handleResponse_4  ===> sessionConnectingListener"),this.sessionConnectingListener&&((0,s.logDebug)("Engine ==>> handleResponse_4  ===> sessionConnectingListener not null"),this.sessionConnectingListener(),this.sessionConnectingListener=void 0))},function(){})}}t.Engine=u},24734:(e,t,n)=>{"use strict";var i;!function(e){e.Discouraged="discouraged",e.Preferred="preferred",e.Required="required"}(i||(i={}))},24840:(e,t,n)=>{"use strict";var i;(i||(i={})).PublicKey="public-key"},25389:(e,t,n)=>{"use strict";n(66024),n(77663),n(85854),n(24734)},25840:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((i=i.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.InjectConnector=void 0;let r=n(59564),o=n(83819),s=n(67189),a=n(73134),c=n(3049),l=n(77549),d=n(55263),u=n(76873),h=n(69405),p=n(62548),g=n(34554),f=n(30193),m=n(31208);class v{constructor(){this.disconnectListener=[],this.providerMap=new Map,this.disconnectHandler=null,this.walletName="",this.walletNameKey="",this.enable=!0,this.providerMap.set(r.NameSpaceKeyEip155,new h.Eip155Provider),this.providerMap.set(r.NameSpaceKeySOL,new a.SolProvider),this.providerMap.set(r.NameSpaceKeyAptos,new l.AptosProvider),this.providerMap.set(r.NameSpaceKeyTON,new u.TONProvider),this.providerMap.set(r.NameSpaceKeySui,new p.SuiProvider),this.providerMap.set(r.NameSpaceKeyBtc,new m.BtcProvider)}setAccountChangeListener(e){(0,o.logDebug)("setAccountChangeListener: inject",e),this.accountChangeListener=e}setConnectionManager(e){this.connectionManager=e}getInjectProvider(e){if(e){for(let[t,n]of this.providerMap.entries())if(e.includes(t))return n}}openWallet(e){return i(this,void 0,void 0,function*(){if((0,o.logDebug)("InjectEngine connect begin:",JSON.stringify(e)),!e)throw new r.OKXConnectError(r.OKX_CONNECT_ERROR_CODES.BAD_REQUEST_ERROR);this.dappInfo=e.connectRequest.dAppInfo;var t,n,i,s=e.connectRequest;try{if(window&&window.okxwallet){if(s.requests){let e=s.requests.find(e=>"requestAccounts"===e.name),l=yield window.okxwallet.getVersion(),u={method:"connect",requestId:s.requestId,payload:{wallet:{platform:null!==(t=navigator.platform)&&void 0!==t?t:"/",appName:c.OKXInjectWalletName,appVersion:null!=l?l:"1.0.0",maxProtocolVersion:1},responses:[]}},h={name:"requestAccounts",accounts:[]};u.payload.responses.push(h),yield this.disconnect();let p=null!==(n=e.requiredNamespaces)&&void 0!==n?n:[],g=null!==(i=e.optionalNamespaces)&&void 0!==i?i:[],f=!0,m=!1;if(p.length+g.length===1&&!(0,d.isDevice)("mobile")){let e=1===p.length?p[0]:g[0],t=this.getInjectProvider(e.namespace);(yield null==t?void 0:t.singleConnect(e,this.dappInfo))&&(m=!0,f=!1)}var a=yield this.getAccountByRequestWallets(f,!1,m,p,g);if(a){if(h.accounts.push(...a),0===h.accounts.length)throw new r.OKXConnectError(r.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"connect connectAccounts is null")}else throw new r.OKXConnectError(r.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"connect requestWallets is null");this.connectResultListener&&(this.disconnectHandler&&window.okxwallet.removeListener("disconnect",this.disconnectHandler),this.disconnectHandler=()=>{console.log("window.okxwallet disconnect:"),this.disconnectListener.forEach(e=>e()),this.disconnectListener=[]},window.okxwallet.on("disconnect",this.disconnectHandler),(0,o.reportEvent)(o.OKXReportType.PAGE_IN,o.Report_OKXConnectSDKExtension_ConnectDapp_ConnectSuccess_View,""),this.connectResultListener(u))}}else throw new r.OKXConnectError(r.OKX_CONNECT_ERROR_CODES.BAD_REQUEST_ERROR)}catch(e){var l=r.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR;e instanceof r.OKXConnectError&&(l=e.code,e.message),this.connectResultListener&&this.connectResultListener({requestId:"-1",method:"connect_error",payload:{code:l}})}})}disconnect(){return i(this,void 0,void 0,function*(){(0,o.logDebug)("InjectEngine ==>> disconnect  okxwallet.disconnect()"),window.okxwallet&&(yield window.okxwallet.disconnect(),(0,o.logDebug)("InjectEngine ==>> disconnect end okxwallet.disconnect()"))})}getRequestId(){let e=Date.now().toString();return(0,o.logDebug)("InjectEngine ==>> getRequestId ==>",e),e}send(e,t){return i(this,void 0,void 0,function*(){var n;try{if((0,o.logDebug)("InjectEngine send  > request:",(0,o.safeJsonStringify)(e)),"disconnect"===e.method){yield this.disconnect(),this.disconnectListener.forEach(e=>e()),this.disconnectListener=[],null===(n=t.onAck)||void 0===n||n.call(t);return}yield this.checkWalletMatch();let i=this.getInjectProvider((0,o.getNamespaceKeyByChain)(e.chainId));if(i){i.send(e).then(e=>{var n;(0,o.logDebug)("InjectEngine ==>> send > result:",e),null===(n=t.resolve)||void 0===n||n.call(t,e)}).catch(n=>{var i;let s=n.code;4001===s&&(s=r.OKX_CONNECT_ERROR_CODES.USER_REJECTS_ERROR);let a={requestId:this.getRequestId(),method:e.method,error:{code:s,message:n.message}};(0,o.logDebug)("InjectEngine ==>> send > errorResponse:",JSON.stringify(a)),null===(i=t.resolve)||void 0===i||i.call(t,a)});return}throw new r.OKXConnectError(r.OKX_CONNECT_ERROR_CODES.CHAIN_NOT_SUPPORTED)}catch(e){return(0,o.logDebug)("InjectEngine ==>> send  ===> error:",e),Promise.reject(e)}})}checkWalletMatch(){return i(this,void 0,void 0,function*(){return new Promise((e,t)=>{var n;let i=null===(n=this.connectionManager)||void 0===n?void 0:n.getSessionContent("connectSession");i||t(new r.OKXConnectError(r.OKX_CONNECT_ERROR_CODES.WALLET_NOT_SUPPORTED)),this.restoreconnect(i,n=>{n?e():t(new r.OKXConnectError(r.OKX_CONNECT_ERROR_CODES.WALLET_NOT_SUPPORTED))})})})}checkAccountChanged(){return i(this,void 0,void 0,function*(){var e;try{let t=null===(e=this.connectionManager)||void 0===e?void 0:e.getSessionContent("connectSession");if(!t)throw new r.OKXConnectError(r.OKX_CONNECT_ERROR_CODES.WALLET_NOT_SUPPORTED);(0,o.logDebug)("inject-connector checkAccountChanged --sessionInfo:",JSON.stringify(t));let n=this.getRequireNameSpaceFromSession(t);(0,o.logDebug)("inject-connector checkAccountChanged --requiredNamespaces:",JSON.stringify(n));let i=yield this.getAccountByRequestWallets(!1,!0,!1,n,[]);if((0,o.logDebug)("inject-connector checkAccountChanged --accounts:",JSON.stringify(i)),i){let e={};(0,f.buildAccountNameSpaces)(i,e),this.compareAndModifyNamespaces(t.namespaces,e)||((0,o.logDebug)("inject-connector checkAccountChanged --result sessionLocal:",JSON.stringify(t)),this.accountChangeListener?((0,o.logDebug)("inject-connector checkAccountChanged -accountChangeListener:",this.accountChangeListener),this.accountChangeListener(t)):((0,o.logDebug)("inject-connector checkAccountChanged disconnect:"),yield this.disconnect()))}else throw new r.OKXConnectError(r.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"connect requestWallets is null")}catch(e){throw(0,o.logDebug)("inject-connector restoreconnect catch error",JSON.stringify(e)),e}})}compareAndModifyNamespaces(e,t){let n=!0;for(let i in e)if(t[i]){let r=e[i],s=t[i];(0,o.logDebug)("inject-connector checkAccountChanged ns1:",JSON.stringify(r)),(0,o.logDebug)("inject-connector checkAccountChanged ns2:",JSON.stringify(s)),JSON.stringify([...r.accounts].sort())!==JSON.stringify([...s.accounts].sort())&&(n=!1,r.accounts=[...s.accounts],r.extra=Object.assign({},s.extra),r.payload=Object.assign({},s.payload)),(0,o.logDebug)("inject-connector checkAccountChanged new ns1:",JSON.stringify(r))}return(0,o.logDebug)(`inject-connector checkAccountChanged compareAndModifyNamespaces ===> ${n}`),n}clearData(){this.connectResultListener=void 0}addDisconnectListener(e){this.disconnectListener.push(e)}setOnConnectResultListener(e){this.connectResultListener=e}connectManagerDisconnect(){return i(this,arguments,void 0,function*(e=!1){})}getCurrentConnectionReady(e){return!!e&&e.every(e=>{var t;return null===(t=this.getInjectProvider(e))||void 0===t?void 0:t.connectReady()})}getTag(){return s.OKX_INJECT_WALLET}toJSON(){return"inject-connector"}getRequireNameSpaceFromSession(e){var t,n,i=[];for(let o in e.namespaces){let s=e.namespaces[o],a={namespace:o,chains:s.chains};if(o===r.NameSpaceKeyAptos){let e=[];s.chains.forEach(t=>{let n=(0,g.replaceChainNameToChainId)(t);e.push(n)}),a={namespace:o,chains:e}}else if(o===r.NameSpaceKeyTON){let e,i;(null===(t=s.payload)||void 0===t?void 0:t.ton_proof)&&(e=null===(n=s.payload)||void 0===n?void 0:n.ton_proof).proof.payload&&(i={name:"ton_proof",payload:e.proof.payload}),a={namespace:o,chains:s.chains,params:{ton_addr:{name:"ton_addr"},ton_proof:i}}}i.push(a)}return i}restoreconnect(e,t){if(!window.okxwallet){t(null);return}this.dappInfo=null===(n=e.sessionConfig)||void 0===n?void 0:n.dappInfo,(0,o.logDebug)("inject-connector restoreconnect --sessionInfo:",JSON.stringify(e));var n,i=this.getRequireNameSpaceFromSession(e);(0,o.logDebug)("inject-connector restoreconnect --requiredNamespaces:",JSON.stringify(i)),this.getAccountByRequestWallets(!1,!1,!1,i,[]).then(n=>{(0,o.logDebug)("inject-connector restoreconnect --accounts:",JSON.stringify(n));let i=!0;for(let t in e.namespaces){var s=n.find(e=>e.namespace===t),a=e.namespaces[t].accounts;if(!s)throw new r.OKXConnectError(r.OKX_CONNECT_ERROR_CODES.BAD_REQUEST_ERROR,"resotreconnect error: accountItem error");let c=a;t===r.NameSpaceKeyAptos&&c&&c.length>0&&(c=a.map(e=>(0,g.replaceChainNameToChainId)(e))),s.addresses.length===c.length&&s.addresses.slice().sort().every((e,n)=>{if(t!==r.NameSpaceKeyAptos)return e===c.slice().sort()[n];{let t=c.slice().sort()[n];return(0,o.logDebug)("check aptos address -value and aptosAdd--",e,t),t===e}})||(i=!1)}if(i)(0,o.reportEvent)(o.OKXReportType.PAGE_IN,o.Report_OKXConnectSDKExtension_ConnectDapp_ConnectSuccess_View,""),t(e);else throw new r.OKXConnectError(r.OKX_CONNECT_ERROR_CODES.BAD_REQUEST_ERROR,"resotreconnect error: address not as same as session")}).catch(e=>{(0,o.logDebug)("inject-connector restoreconnect catch error",JSON.stringify(e)),t(null)})}getAccountByRequestWallets(e,t,n,s,a){return i(this,void 0,void 0,function*(){try{let h;var i=[],c=[];if((0,d.isDevice)("mobile")){var l=yield window.okxwallet.connectWallet(e,{requiredNamespaces:s,optionalNamespaces:a});i.push(l)}else i=yield window.okxwallet.requestWallets(e);var u=[...null!=s?s:[],...null!=a?a:[]];let p=i[0];if((0,o.logDebug)(" InjectEngine connect connectAccounts:",JSON.stringify(p)),u&&p&&p.address)for(let[i,r]of this.providerMap.entries()){let o=yield r.parseConnectResponse(e,t,n,u,p,this.dappInfo);o&&(h=i,c.push(o))}let g=s.every(e=>{let t=c.find(t=>t.namespace===e.namespace);return!!t&&e.chains.every(e=>!!t.addresses.find(t=>t.startsWith(e+":")))});if((0,o.logDebug)("InjectEngine connect requiredNamespaces:",JSON.stringify(s)),(0,o.logDebug)("InjectEngine connect accountResult:",JSON.stringify(c)),!g)throw yield this.disconnect(),new r.OKXConnectError(r.OKX_CONNECT_ERROR_CODES.CHAIN_NOT_SUPPORTED);return(0,d.isDevice)("mobile")||(this.configEventWithKey(h),yield window.okxwallet.requestWallets(e)),c}catch(e){if(e&&"object"==typeof e&&"code"in e&&4001===e.code)throw new r.OKXConnectError(r.OKX_CONNECT_ERROR_CODES.USER_REJECTS_ERROR);throw new r.OKXConnectError(r.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR)}})}configEventWithKey(e){var t,n;for(let e in this.providerMap)null===(t=this.providerMap.get(e))||void 0===t||t.removeListener();null===(n=this.getInjectProvider(e))||void 0===n||n.addListener(()=>{this.checkAccountChanged().catch(e=>{console.log("window.okxwallet configEventWithKey error: ",e)})})}}t.InjectConnector=v},26354:(e,t,n)=>{"use strict";n(66024)},26367:(e,t,n)=>{"use strict";n(66024)},26493:(e,t,n)=>{"use strict";n(91492)},26965:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((i=i.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.OKXTonProvider=void 0;let r=n(43797),o=n(86745);class s{constructor(e){this.statusChangeSubscriptions=[],this.statusChangeErrorSubscriptions=[],this.provider=e,this.provider.on("connect",()=>{let e=this.wallet();(0,o.logDebug)("OKXTONProvider event connect:",JSON.stringify(e)),this.statusChangeSubscriptions.forEach(t=>t(e))}),this.provider.on("reconnect",()=>{let e=this.wallet();(0,o.logDebug)("OKXTONProvider event reconnect:",JSON.stringify(e)),this.statusChangeSubscriptions.forEach(t=>t(e))}),this.provider.on("disconnect",()=>{(0,o.logDebug)("OKXTONProvider event disconnect:"),this.statusChangeSubscriptions.forEach(e=>e(null))}),this.provider.on("connect_error",e=>{(0,o.logDebug)("OKXTONProvider event connect_error:",JSON.stringify(e)),this.statusChangeErrorSubscriptions.forEach(t=>t(e))})}connected(){return!!this.provider.connected()&&!!this.provider.session.namespaces.ton}account(){try{if(!this.provider.session)return null;let e=this.provider.session.namespaces.ton;if(!e||!e.payload||!e.payload.ton_addr)return null;let t=e.payload.ton_addr;return{address:t.address,chain:t.network,walletStateInit:t.walletStateInit,publicKey:t.publicKey}}catch(e){return(0,o.logDebug)("OKXTONProvider account  error:",JSON.stringify(e)),null}}wallet(){if(this.connected())try{let e=this.provider.session.wallet,t={device:{platform:e.platform,appName:e.appName,appVersion:e.appVersion,maxProtocolVersion:e.maxProtocolVersion,features:["ton_sendTransaction"]},provider:"http",account:this.account()},n=this.provider.session.namespaces.ton;return n&&n.payload&&n.payload.ton_proof&&(t.connectItems={tonProof:n.payload.ton_proof}),(0,o.logDebug)("OKXTONProvider wallet :",JSON.stringify(t)),t}catch(e){(0,o.logDebug)("OKXTONProvider wallet  error:",JSON.stringify(e))}return null}onStatusChange(e,t){return this.statusChangeSubscriptions.push(e),t&&this.statusChangeErrorSubscriptions.push(t),()=>{this.statusChangeSubscriptions=this.statusChangeSubscriptions.filter(t=>t!==e),t&&(this.statusChangeErrorSubscriptions=this.statusChangeErrorSubscriptions.filter(e=>e!==t))}}sendTransaction(e){return i(this,void 0,void 0,function*(){if(e.network&&e.network!==o.TONCHAIN.MAINNET)throw new r.OKXConnectError(r.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"OKXTONProvider sendTransaction network error");e.network||(e.network=o.TONCHAIN.MAINNET),this.provider.session&&!e.from&&(e.from=this.provider.requestAccountsWithNamespace("ton")[0]);let t={method:"ton_sendTransaction",params:e},n="ton:"+o.TONCHAIN.MAINNET;return(0,o.logDebug)("OKXTONProvider sendTransaction transaction----:",n,JSON.stringify(t)),this.provider.request(t,n)})}}t.OKXTonProvider=s,t.default=s},27145:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getAccountsChains=function(e){let t=[];return e.forEach(e=>{let[n,i]=e.split(":");t.push(`${n}:${i}`)}),t},t.nameSpaceToConnectWalletNameSpace=function(e){var t=[];return e&&Object.keys(e).forEach(n=>{(n===i.NameSpaceKeyEip155||n===i.NameSpaceKeySOL||n===i.NameSpaceKeySui||n===i.NameSpaceKeyAptos||n==i.NameSpaceKeyBtc||n===i.NameSpaceKeyTON||n===i.NameSpaceKeyCosmos||n===i.NameSpaceKeyTron||n===i.NameSpaceKeyStarknet)&&e[n].chains&&t.push({namespace:n,chains:e[n].chains,params:e[n].params})}),t},t.fillParamsToSession=function(e,t,n,r){let o=(e,t)=>{Object.assign(e,t)},s=(e,t)=>{for(let n in t)t.hasOwnProperty(n)&&t[n].rpcMap&&(t[n].rpcMap&&(e[n].rpcMap||(e[n].rpcMap={}),o(e[n].rpcMap,t[n].rpcMap)),t[n].defaultChain&&void 0===e[n].defaultChain&&e[n].chains.some(e=>e.split(":")[1]===t[n].defaultChain)&&(e[n].defaultChain=t[n].defaultChain))};for(let i in t&&s(e.namespaces,t),n&&s(e.namespaces,n),e.namespaces){let t=e.namespaces[i];(null==t?void 0:t.accounts)&&0!==t.accounts.length||delete e.namespaces[i]}e.namespaces[i.NameSpaceKeyBtc]&&e.wallet.appName===i.OKXWalletName&&function(e){try{if(e&&e.extra){var t=e.extra;Object.keys(t).forEach(e=>{let n=t[e];6===Number(n.addressType)?n.publicKey=n.compressedPublicKey.slice(2):n.publicKey=n.compressedPublicKey})}}catch(e){(0,i.logDebug)("namespaces fixMobileBtcSession error")}}(e.namespaces[i.NameSpaceKeyBtc]),e.sessionConfig=r},t.isCaipNamespace=r,t.parseNamespaceKey=function(e){return r(e)?e.split(":")[0]:e};let i=n(86745);function r(e){return e.includes(":")}},27303:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CONNECT_ITEM_ERROR_CODES=t.TONCHAIN=void 0;var i=n(41625);Object.defineProperty(t,"TONCHAIN",{enumerable:!0,get:function(){return i.TONCHAIN}});var r=n(54224);Object.defineProperty(t,"CONNECT_ITEM_ERROR_CODES",{enumerable:!0,get:function(){return r.CONNECT_ITEM_ERROR_CODES}})},27583:(e,t,n)=>{"use strict";n(66024)},28081:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OkxwalletInjectTonsdkConnector=t.OkxwalletInjectConnector=t.WsConnector=t.TgwalletConnector=t.InjectConnector=t.getTagByappName=t.OKX_INJECT_WALLET=t.OKX_APP_WALLET=t.OKX_TG_WALLET=t.AppwalletConnector=void 0;var i=n(51789);Object.defineProperty(t,"AppwalletConnector",{enumerable:!0,get:function(){return i.AppwalletConnector}});var r=n(67189);Object.defineProperty(t,"OKX_TG_WALLET",{enumerable:!0,get:function(){return r.OKX_TG_WALLET}}),Object.defineProperty(t,"OKX_APP_WALLET",{enumerable:!0,get:function(){return r.OKX_APP_WALLET}}),Object.defineProperty(t,"OKX_INJECT_WALLET",{enumerable:!0,get:function(){return r.OKX_INJECT_WALLET}}),Object.defineProperty(t,"getTagByappName",{enumerable:!0,get:function(){return r.getTagByappName}});var o=n(25840);Object.defineProperty(t,"InjectConnector",{enumerable:!0,get:function(){return o.InjectConnector}});var s=n(49517);Object.defineProperty(t,"TgwalletConnector",{enumerable:!0,get:function(){return s.TgwalletConnector}});var a=n(20771);Object.defineProperty(t,"WsConnector",{enumerable:!0,get:function(){return a.WsConnector}});var c=n(77098);Object.defineProperty(t,"OkxwalletInjectConnector",{enumerable:!0,get:function(){return c.OkxwalletInjectConnector}});var l=n(20630);Object.defineProperty(t,"OkxwalletInjectTonsdkConnector",{enumerable:!0,get:function(){return l.OkxwalletInjectTonsdkConnector}})},28447:(e,t,n)=>{"use strict";n(66024),n(37657)},28535:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};function r(e){return"object"==typeof e&&"id"in e&&"jsonrpc"in e&&"2.0"===e.jsonrpc}function o(e){return"result"in e}function s(e){return"error"in e}Object.defineProperty(t,"__esModule",{value:!0}),t.isJsonRpcPayload=r,t.isJsonRpcRequest=function(e){return r(e)&&"method"in e},t.isJsonRpcResponse=function(e){return r(e)&&(o(e)||s(e))},t.isJsonRpcResult=o,t.isJsonRpcError=s,t.payloadId=h,t.getBigIntRpcId=function(){return BigInt(Date.now())*BigInt(1e6)+BigInt(u.getNextValue())},t.formatJsonRpcRequest=function(e,t,n){return{id:n||h(),jsonrpc:"2.0",method:e,params:t}},t.formatJsonRpcResult=function(e,t){return{id:e,jsonrpc:"2.0",result:t}},t.formatJsonRpcError=function(e,t,n){return{id:e,jsonrpc:"2.0",error:m(t,n)}},t.isReservedErrorCode=p,t.getError=g,t.getErrorByCode=f,t.formatErrorMessage=m,t.isHttpUrl=function(e){return v(e,"^https?:")},t.isWsUrl=function(e){return v(e,"^wss?:")},t.parseConnectionError=function(e,t,n){return e.message.includes("getaddrinfo ENOTFOUND")||e.message.includes("connect ECONNREFUSED")?Error(`Unavailable ${n} RPC url at ${t}`):e};let a=n(71720),c=i(n(87124));class l{constructor(e){this.i=1,8===e?new Uint8Array(1):16===e?new Uint16Array(1):new Uint32Array(1),e?this.initialValue=c.default.randomBytes(e/8)[0]:this.initialValue=0}getNextValue(){return this.initialValue+this.i++}}let d=new l(8),u=new l(16);function h(){return 1e3*Date.now()+d.getNextValue()}function p(e){return a.RESERVED_ERROR_CODES.includes(e)}function g(e){return Object.keys(a.STANDARD_ERROR_MAP).includes(e)?a.STANDARD_ERROR_MAP[e]:a.STANDARD_ERROR_MAP[a.DEFAULT_ERROR]}function f(e){let t=Object.values(a.STANDARD_ERROR_MAP).find(t=>t.code===e);return t||a.STANDARD_ERROR_MAP[a.DEFAULT_ERROR]}function m(e,t){return void 0===e?g(a.INTERNAL_ERROR):("string"==typeof e&&(e=Object.assign(Object.assign({},g(a.SERVER_ERROR)),{message:e})),void 0!==t&&(e.data=t),p(e.code)&&(e=f(e.code)),e)}function v(e,t){let n=function(e){let t=e.match(RegExp(/^\w+:/,"gi"));if(t&&t.length)return t[0]}(e);return void 0!==n&&new RegExp(t).test(n)}},29051:(e,t,n)=>{"use strict";n(66024),n(80642),n(9294)},29063:(e,t,n)=>{"use strict";n(66024)},29163:(e,t,n)=>{"use strict";n(66024),n(70725)},29399:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((i=i.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.SuiProvider=void 0;let r=n(9407),o=n(86745),s=n(64675),a=n(32881),c=n(97724);class l{constructor(e,t,n){this.name=o.NameSpaceKeySui,this.namespace=e.namespace,this.events=n,this.client=t,this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}request(e){return i(this,void 0,void 0,function*(){return((0,o.logDebug)("sui request --args--string>",JSON.stringify(e)),(0,o.logDebug)("sui provider namespace: ",this.namespace),!this.client.needCheckRequestMethod()||this.namespace.methods.includes(e.method))?this.client.request(e):this.getHttpProvider().request(e)})}requestAccounts(){return this.getAccounts()}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(r.PROVIDER_EVENTS.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw Error("ChainId not found");return e.split(":")[1]}getAccounts(){let e=this.namespace.accounts;return e?[...new Set(e.filter(e=>e.split(":")[1]===this.chainId.toString()).map(e=>e.split(":")[2]))]:[]}createHttpProviders(){let e={};return this.namespace.chains.forEach(t=>{let n=(0,s.getChainId)(t),i=(0,s.getRpcUrl)(t,this.namespace),r=this.createHttpProvider(n,i);r&&(e[n]=r)}),e}getHttpProvider(){let e=`${this.chainId}`,t=this.httpProviders[e];if((0,o.logDebug)("[RPC] get http provider:",e,t),void 0===t)throw Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){let n=this.createHttpProvider(e,t);n&&((0,o.logDebug)("setHttpProvider",e,t),this.httpProviders[e]=n)}createHttpProvider(e,t){if(t)return new c.JsonRpcProvider(new a.JsonRpcConnection(t,(0,s.getGlobal)("disableProviderPing")));(0,o.logError)(`No RPC url provided for chainId: ${e}`)}getPubkey(e){return this.getWalletAddress(e)}getWalletAddress(e){return e||(null==(e=this.namespace.defaultChain)?void 0:e.startsWith("sui"))||(e=`sui:${e}`),this.namespace.accounts.filter(function(t){return t.split(":").length>2&&t.startsWith(e)}).map(function(e){return e.split(":")[2]})[0]}showRequestModal(e){switch(e.method){case"sui_signMessage":case"sui_signPersonalMessage":case"sui_signTransactionBlock":case"sui_signAndExecuteTransactionBlock":return!0}return!1}}t.SuiProvider=l,t.default=l},29532:(e,t,n)=>{"use strict";var i;!function(e){e.Banxa="banxa",e.CoinbaseOnramp="coinbaseOnramp"}(i||(i={}))},30193:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.buildNameSpacesByConnectResponse=function(e){return r(e)},t.buildRequestAccountNameSpacesByConnectResponse=r,t.buildAccountNameSpaces=o;let i=n(86273);function r(e){let t={};(0,i.logDebug)("buildRequestAccountNameSpacesByConnectResponse start connectResponse111>>",JSON.stringify(e));let n=e.payload.responses.find(e=>"requestAccounts"===e.name);if(n&&n.accounts){let e=[];for(let t of n.accounts)"ton"===t.namespace?t.data&&t.data.ton_addr&&t.data.ton_addr.address&&t.data.ton_addr.address.length>0&&((0,i.logDebug)("buildRequestAccountNameSpacesByConnectResponse start TON>>",JSON.stringify(t)),e.push(t)):((0,i.logDebug)("buildRequestAccountNameSpacesByConnectResponse start other>>",JSON.stringify(t)),e.push(t));n.accounts=e}let r=e.payload.responses.find(e=>"ton_addr"===e.name),s=e.payload.responses.find(e=>"ton_proof"===e.name);if(r&&!n){(0,i.logDebug)("buildRequestAccountNameSpacesByConnectResponse adapt ton data >>");let e=r.address;e="ton:"+r.network+":"+e;let t={ton_addr:r};s&&(t.ton_proof=s),n={name:"requestAccounts",accounts:[{namespace:"ton",addresses:[e],methods:["ton_sendTransaction"],extra:{},data:t}]}}return(0,i.logDebug)("buildRequestAccountNameSpacesByConnectResponse end universalResponse>>>",JSON.stringify(n)),o(n.accounts,t),t}function o(e,t){e.forEach(e=>{var n=[],r=[];e.addresses.forEach(e=>{var t=e.split(":");if((0,i.logDebug)("buildRequestAccountNameSpacesByConnectResponse addressArr>>",t.length),t.length>=3){let o=t.slice(0,2).join(":");n.push(o),r.push(e),(0,i.logDebug)("buildRequestAccountNameSpacesByConnectResponse chain:>>",o,"addressItem:",e)}}),e.data&&e.data.ton_addr&&(e.data.ton_addr.name="ton_addr"),e.data&&e.data.ton_proof&&(e.data.ton_proof.name="ton_proof"),t[e.namespace]={chains:n,accounts:r,methods:e.methods,extra:e.extra,payload:e.data},(0,i.logDebug)("buildRequestAccountNameSpacesByConnectResponse result>>",JSON.stringify(t))})}},30347:(e,t,n)=>{"use strict";n(66024),n(29063),n(99300),n(15283)},30561:(e,t,n)=>{"use strict";var i;!function(e){e.Free="free",e.Advanced="advanced",e.Enterprise="enterprise",e.Standard="standard"}(i||(i={}))},31208:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((i=i.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.BtcProvider=void 0;let r=n(59564),o=n(83819),s=n(15423),a=n(55263);class c{constructor(){this.accountChangedBtcHandler=null}connect(){return window.okxwallet.unisat.connect()}switchChain(e){return i(this,void 0,void 0,function*(){let t=window.okxwallet.unisat;switch(e){case r.BTC_CHAINS.MAINNET:yield t.switchChain("BITCOIN_MAINNET");break;case r.BTC_CHAINS.FRACTAL:yield t.switchChain("FRACTAL_BITCOIN_MAINNET")}})}connectReady(){return!0}parseConnectResponse(e,t,n,o,a){return i(this,void 0,void 0,function*(){try{let e=[];o.forEach(t=>{t.namespace===r.NameSpaceKeyBtc&&e.push(...t.chains)});let t=[],n={};if(0==e.length)return;let c=(e,t)=>e.find(e=>{let n="bitcoin"===e.name&&t===r.BTC_CHAINS.MAINNET||"fractalbitcoin"===e.name&&t===r.BTC_CHAINS.FRACTAL;return 0===e.coinType&&n||e.namespaceChainId===t}),l=e.map(e=>i(this,void 0,void 0,function*(){let i=c(a.address,e);if(!i)return;t.push(e+":"+i.address);let r=yield this.connect();n[e]={publicKey:r.publicKey,compressedPublicKey:r.compressedPublicKey}}));if(yield Promise.all(l),t&&t.length>0)return{namespace:r.NameSpaceKeyBtc,addresses:t,methods:[...s.BtcMethods],extra:n};return}catch(e){throw e}})}restoreConnect(){return i(this,void 0,void 0,function*(){return(0,a.isDevice)("mobile")?this.connect():Promise.resolve()})}send(e){return i(this,void 0,void 0,function*(){try{(0,o.logDebug)("btcProvider send request:",JSON.stringify(e));let t=e.method,n=e.chainId;if(yield this.restoreConnect(),yield this.switchChain(n),e.params)switch(t){case"btc_signMessage":{let{signStr:t,type:n}=e.params||{},i=yield window.okxwallet.unisat.signMessage(t,n);return{method:e.method,result:i}}case"btc_send":{let{from:t,to:n,value:i,satBytes:r}=e.params||{},o=yield window.okxwallet.unisat.send({from:t,to:n,value:i,satBytes:r});return{method:e.method,result:o}}case"btc_signPsbts":{let t;let{psbtHexs:n,options:i}=e.params||{};if(Array.isArray(n)&&1===n.length){let e;t=[Array.isArray(i)?yield window.okxwallet.unisat.signPsbt(n[0],i.length>0&&"object"==typeof i[0]?i[0]:void 0):yield window.okxwallet.unisat.signPsbt(n[0])]}else t=yield window.okxwallet.unisat.signPsbts(n,i);return{method:e.method,result:(0,o.safeJsonStringify)(t)}}case"btc_signAndPushPsbt":{let{psbtHex:t,options:n}=e.params||{},i=yield window.okxwallet.unisat.signPsbt(t,n),r=yield window.okxwallet.unisat.pushPsbt(i);return{method:e.method,result:(0,o.safeJsonStringify)({signedPsbt:i,txHash:r})}}case"btc_sendInscription":{let{address:t,inscriptionId:n,options:i}=e.injectParams||{},r=yield window.okxwallet.unisat.sendInscription(t,n,i);return{method:e.method,result:r}}case"btc_inscribeTransfer":if(this.hasFunction("inscribeTransfer")){let{ticker:t,amount:n}=e.params||{},i=yield window.okxwallet.unisat.inscribeTransfer(t,n);return{method:e.method,result:i}}case"btc_sendRunes":if(this.hasFunction("sendRunes")){let{address:t,runeid:n,amount:i,options:r}=e.injectParams||{},o=yield window.okxwallet.unisat.sendRunes(t,n,i,r);return{method:e.method,result:o}}default:throw new r.OKXConnectError(r.OKX_CONNECT_ERROR_CODES.METHOD_NOT_SUPPORTED,`method: '${t}' not support`)}else throw new r.OKXConnectError(r.OKX_CONNECT_ERROR_CODES.BAD_REQUEST_ERROR,`param is error method: '${t}'`)}catch(e){throw(0,o.logDebug)("BtcProvider send error:",e),e}})}hasFunction(e){return!!window.okxwallet&&!!window.okxwallet.unisat&&"function"==typeof window.okxwallet.unisat[e]}singleConnect(e){return i(this,void 0,void 0,function*(){return 1==e.chains.length&&this.connect()})}addListener(e){this.accountChangedBtcHandler=t=>{console.log("window.okxwallet btc:",Date.now(),"btc",t),t&&t.length>0&&e()},window.okxwallet.unisat.on("accountsChanged",this.accountChangedBtcHandler)}removeListener(){window.okxwallet.unisat.removeListener("accountsChanged",this.accountChangedBtcHandler)}}t.BtcProvider=c},31355:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setGlobal=t.getGlobal=void 0;let n={};t.getGlobal=e=>n[e],t.setGlobal=(e,t)=>{n[e]=t}},31487:(e,t,n)=>{"use strict";var i;!function(e){e.Only="connect-only",e.AndSign="connect-and-sign"}(i||(i={}))},32103:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((i=i.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});let r=n(9407),o=n(86745),s=n(64675),a=n(32881),c=n(97724);class l{constructor(e,t,n){this.name=o.NameSpaceKeyTron,this.namespace=e.namespace,this.events=n,this.client=t,this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return i(this,void 0,void 0,function*(){if((0,o.logDebug)("tron request --args--string>",JSON.stringify(e)),(0,o.logDebug)("tron provider namespace: ",JSON.stringify(this.namespace)),!this.client.needCheckRequestMethod()||this.namespace.methods.includes(e.method))return this.client.request(e);throw new o.OKXConnectError(o.OKX_CONNECT_ERROR_CODES.METHOD_NOT_SUPPORTED,"Please upgrade OKX APP")})}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(r.PROVIDER_EVENTS.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw Error("ChainId not found");return e.split(":")[1]}getAccounts(){let e=this.namespace.accounts;return e?[...new Set(e.filter(e=>e.split(":")[1]===this.chainId.toString()).map(e=>e.split(":")[2]))]:[]}createHttpProviders(){let e={};return this.namespace.chains.forEach(t=>{let n=(0,s.getChainId)(t),i=(0,s.getRpcUrl)(t,this.namespace),r=this.createHttpProvider(n,i);r&&(e[n]=r)}),e}getHttpProvider(){let e=`${this.chainId}`,t=this.httpProviders[e];if(void 0===t)throw Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){let n=this.createHttpProvider(e,t);n&&(this.httpProviders[e]=n)}createHttpProvider(e,t){if(t)return new c.JsonRpcProvider(new a.JsonRpcConnection(t,(0,s.getGlobal)("disableProviderPing")))}showRequestModal(e){return!0}}t.default=l},32214:(e,t,n)=>{"use strict";n(66024)},32283:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((i=i.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});let r=n(9407),o=n(86745),s=n(64675),a=n(32881),c=n(97724);class l{constructor(e,t,n,i){this.name=o.NameSpaceKeyBtc,this.namespace=e.namespace,this.events=i,this.client=n,this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders(),this.name=t}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return i(this,void 0,void 0,function*(){return((0,o.logDebug)("btc request --args--string>",JSON.stringify(e)),(0,o.logDebug)("btc provider namespace: ",JSON.stringify(this.namespace)),!this.client.needCheckRequestMethod()||this.namespace.methods.includes(e.method))?this.client.request(e):this.getHttpProvider().request(e)})}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(r.PROVIDER_EVENTS.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw Error("ChainId not found");return e.split(":")[1]}getAccounts(){let e=this.namespace.accounts;return e?[...new Set(e.filter(e=>e.split(":")[1]===this.chainId.toString()).map(e=>e.split(":")[2]))]:[]}createHttpProviders(){let e={};return this.namespace.chains.forEach(t=>{let n=(0,s.getChainId)(t),i=(0,s.getRpcUrl)(t,this.namespace),r=this.createHttpProvider(n,i);r&&(e[n]=r)}),e}getHttpProvider(){let e=`${this.chainId}`,t=this.httpProviders[e];if(void 0===t)throw Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){let n=this.createHttpProvider(e,t);n&&(this.httpProviders[e]=n)}createHttpProvider(e,t){if(t)return new c.JsonRpcProvider(new a.JsonRpcConnection(t,(0,s.getGlobal)("disableProviderPing")));(0,o.logError)(`No RPC url provided for chainId: ${e}`)}showRequestModal(e){return!0}}t.default=l},32655:(e,t,n)=>{"use strict";n(57203)},32881:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((i=i.apply(e,t||[])).next())})},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.JsonRpcConnection=void 0;let o=n(22585),s=r(n(63171)),a=n(86745),c=n(86745),l={headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST"};class d{constructor(e,t=!1){if(this.url=e,this.disableProviderPing=t,this.events=new o.EventEmitter,this.isAvailable=!1,this.registering=!1,!(0,c.isHttpUrl)(e))throw Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e,this.disableProviderPing=t}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}open(){return i(this,arguments,void 0,function*(e=this.url){yield this.register(e)})}close(){return i(this,void 0,void 0,function*(){if(!this.isAvailable)throw Error("Connection already closed");this.onClose()})}send(e){return i(this,void 0,void 0,function*(){this.isAvailable||(yield this.register());try{let t=(0,a.safeJsonStringify)(e),n=yield(0,s.default)(this.url,Object.assign(Object.assign({},l),{body:t})),i=yield n.json();this.onPayload({data:i})}catch(t){this.onError(e.id,t)}})}register(){return i(this,arguments,void 0,function*(e=this.url){if(!(0,c.isHttpUrl)(e))throw Error(`Provided URL is not compatible with HTTP connection: ${e}`);if(this.registering)return new Promise((e,t)=>{this.events.once("register_error",e=>{t(e)}),this.events.once("open",()=>{if(void 0===this.isAvailable)return t(Error("HTTP connection is missing or invalid"));e()})});this.url=e,this.registering=!0;try{if(!this.disableProviderPing){let t=(0,a.safeJsonStringify)({id:1,jsonrpc:"2.0",method:"test",params:[]});yield(0,s.default)(e,Object.assign(Object.assign({},l),{body:t}))}this.onOpen()}catch(t){let e=this.parseError(t);throw this.events.emit("register_error",e),this.onClose(),e}})}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(void 0===e.data)return;let t="string"==typeof e.data?(0,a.safeJsonParse)(e.data):e.data;this.events.emit("payload",t)}onError(e,t){let n=this.parseError(t),i=n.message||n.toString(),r=(0,c.formatJsonRpcError)(e,i);this.events.emit("payload",r)}parseError(e,t=this.url){return(0,c.parseConnectionError)(e,t,"HTTP")}}t.JsonRpcConnection=d},32945:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectorState=t.CONNECT_PROTOCOL_VER=t.CONNECT_JSONRPC_VER=t.OKXCONNECTOR_MESSAGE_TTL=t.OKXCONNECTOR_WS_URL_PENDING_CLOSE_CODE=t.OKXCONNECTOR_WS_URL_LIST=t.OKXCONNECTOR_WS_URL_IDX_KEY=t.OKXCONNECTOR_WS_URL_3=t.OKXCONNECTOR_WS_URL_2=t.OKXCONNECTOR_WS_URL_1=t.EVENT_EMITTER_MAX_LISTENERS=t.OKXCONNECTOR_PROTOCOL_VERSION=void 0,t.OKXCONNECTOR_PROTOCOL_VERSION=2,t.EVENT_EMITTER_MAX_LISTENERS=10,t.OKXCONNECTOR_WS_URL_1="wss://wsdexpri.okx.com/ws/v1/wallet-connect-relay",t.OKXCONNECTOR_WS_URL_2="wss://wsdexpri.okx.ac/ws/v1/wallet-connect-relay",t.OKXCONNECTOR_WS_URL_3="wss://wsdexpri.coinall.ltd/ws/v1/wallet-connect-relay",t.OKXCONNECTOR_WS_URL_IDX_KEY="wuik",t.OKXCONNECTOR_WS_URL_LIST=[t.OKXCONNECTOR_WS_URL_1,t.OKXCONNECTOR_WS_URL_2,t.OKXCONNECTOR_WS_URL_3],t.OKXCONNECTOR_WS_URL_PENDING_CLOSE_CODE={TIME_OUT:3990,CANCELED:3991,FINISHED:3992},t.OKXCONNECTOR_MESSAGE_TTL=3e5,t.CONNECT_JSONRPC_VER="2.0",t.CONNECT_PROTOCOL_VER=2,t.ConnectorState={InitState:0,Connecting:1,Connected:2,Disconnected:3,OnError:4}},33026:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OKX_MINI_WALLET_NAME=t.OKX_APP_WALLET_NAME=t.stackDeepLink=t.tgwalletAppName=t.tgwalletName=t.tonConnectSdkVersion=t.shortUniversalLink=t.standardDeeplink=t.downloadUrl=t.standardUniversalLink=t.okxDeeplink=void 0,t.getTestTwaUrl=function(){return window.okxTesttwaUrl},t.getTestTgTwaUrl=function(){return window.okxTestTgtwaUrl},t.getBotNameAndAppName=function(e){let t=new URL(e).pathname.split("/").filter(Boolean);if(t.length>=2)return{botName:t[0],appName:t[1]}},t.okxDeeplink="okx://web3",t.standardUniversalLink="undefined"!=typeof window&&window.location.hostname.includes("okx.com")?"https://link.okx.com/download":"https://www.okx.com/download",t.downloadUrl="https://www.okx.com/download",t.standardDeeplink=`${t.okxDeeplink}/wallet/connect`,t.shortUniversalLink="https://www.okx.com/ul/connect",t.tonConnectSdkVersion="1",t.tgwalletName="OKX_WALLET_BOT",t.tgwalletAppName="start",t.stackDeepLink="okx://web3?stack=true",t.OKX_APP_WALLET_NAME="OKX Wallet",t.OKX_MINI_WALLET_NAME="OKX Mini Wallet"},33236:(e,t,n)=>{"use strict";var i;!function(e){e.Center="center",e.Left="left",e.Right="right"}(i||(i={}))},33390:(e,t,n)=>{"use strict";n(66024)},33634:(e,t,n)=>{"use strict";var i;!function(e){e.Owner="owner",e.Admin="admin",e.Developer="developer",e.Viewer="viewer"}(i||(i={}))},34329:(e,t,n)=>{"use strict";n(66024),n(59033),n(61116),n(72955),n(30347),n(59123),n(22334),n(26367),n(94647),n(95879),n(2202)},34554:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.chainName2IdMap=t.isValidObject=t.RANDOM_LENGTH=t.isBrowser=t.resolveLocalStorage=t.hasLocalStorage=t.hasBuiltInWebSocket=t.resolveWebSocketImplementation=void 0,t.hexToByteArray=function(e){if(e.length%2!=0)throw Error(`Cannot convert ${e} to bytesArray`);let t=new Uint8Array(e.length/2);for(let n=0;n<e.length;n+=2)t[n/2]=parseInt(e.slice(n,n+2),16);return t},t.getChainId=function(e){return e.includes(":")?e.split(":")[1]:e},t.toHexString=function(e){let t="";return e.forEach(e=>{t+=("0"+(255&e).toString(16)).slice(-2)}),t},t.concatUint8Arrays=function(e,t){let n=new Uint8Array(e.length+t.length);return n.set(e),n.set(t,e.length),n},t.splitToUint8Arrays=function(e,t){if(t>=e.length)throw Error("Index is out of buffer");return[e.slice(0,t),e.slice(t)]},t.base64encode=function(e,t){let n;return e instanceof Uint8Array?n=e:("string"!=typeof e&&(e=(0,c.safeJsonStringify)(e)),n=o.default.decodeUTF8(e)),function(e,t){let n=o.default.encodeBase64(e);return t?encodeURIComponent(n):n}(n,t)},t.base64decode=function(e,t){var n;let i=(n=e,t&&(n=decodeURIComponent(n)),o.default.decodeBase64(n));return{toString:()=>o.default.encodeUTF8(i),toObject(){try{return(0,c.safeJsonParse)(o.default.encodeUTF8(i))}catch(e){return null}},toUint8Array:()=>i}},t.checkWSUrl=function(e){let t=e.match(RegExp(/^\w+:/,"gi"));if(!t||!t.length)return!1;let n=t[0];return void 0!==n&&RegExp("^wss?:").test(n)},t.hashKey=g,t.generateRandomBytes32=f,t.generateTopic=function(){let e=f();return(0,l.logDebug)(`generate topic called ${e}`),g((0,s.toString)(e,p))},t.generateGroupId=function(){let e=r.default.randomBytes(16);return(0,l.logDebug)(`generate groupid called ${e}`),g((0,s.toString)(e,p))},t.isInIOSLine=function(){return navigator.userAgent.includes("Safari Line/")&&m()},t.isInIOSLark=function(){return navigator.userAgent.includes("Lark/")&&m()},t.isInIOSChrome=function(){return navigator.userAgent.includes("CriOS/")&&m()},t.isInIOSWeChat=function(){return navigator.userAgent.includes("MicroMessenger/")&&m()},t.isIos=m,t.getLastSixMd5Hash=function(e){return u.default.MD5(e).toString().slice(-6)},t.toSafeBase64FromBase64=function(e){return e.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")},t.useShortLink=function(){return!1},t.replaceChainNameToChainId=function(e){return t.chainName2IdMap.forEach((t,n)=>{e.includes(n)&&(e=e.replace(n,t))}),e},t.replaceChainIdToChainName=function(e){return t.chainName2IdMap.forEach((t,n)=>{e.includes(t)&&(e=e.replace(t,n))}),e},t.getNamespaceKeyByChain=function(e){for(let[t,n]of Object.entries(h.NAMES_CHAINS))if(Object.values(n).includes(e))return t;return e};let r=i(n(87124)),o=i(n(46579)),s=n(60687),a=n(25414),c=n(86094),l=n(86273),d=n(79185),u=i(n(15563)),h=n(59564),p="base16";function g(e,t=p){(0,l.logDebug)(`hash key called ${e}`);let n=(0,a.hash)((0,d.okxfromString)(e,t));return(0,s.toString)(n,t)}function f(){return r.default.randomBytes(t.RANDOM_LENGTH)}function m(){let e=navigator.userAgent,t=navigator.maxTouchPoints||0,n=/iPad|iPhone|iPod/.test(e)&&!window.MSStream,i=e.includes("Mac")&&t>1;return(0,l.logDebug)(`utils isIos >>>isIOSDevice: ${n}    >> isIPadOS: ${i}`),n||i}t.resolveWebSocketImplementation=()=>{if("undefined"!=typeof WebSocket);else if(void 0!==n.g&&void 0!==n.g.WebSocket)return n.g.WebSocket;else if("undefined"!=typeof window&&void 0!==window.WebSocket)return window.WebSocket;else if("undefined"!=typeof self&&void 0!==self.WebSocket)return self.WebSocket;return WebSocket},t.hasBuiltInWebSocket=()=>"undefined"!=typeof WebSocket||void 0!==n.g&&void 0!==n.g.WebSocket||"undefined"!=typeof window&&void 0!==window.WebSocket||"undefined"!=typeof self&&void 0!==self.WebSocket,t.hasLocalStorage=()=>void 0!==n.g&&void 0!==n.g.localStorage||"undefined"!=typeof window&&void 0!==window.localStorage,t.resolveLocalStorage=()=>void 0!==n.g&&void 0!==n.g.localStorage?n.g.localStorage:"undefined"!=typeof window&&void 0!==window.localStorage?window.localStorage:localStorage,t.isBrowser=()=>"undefined"!=typeof window,t.RANDOM_LENGTH=32,t.isValidObject=e=>Object.getPrototypeOf(e)===Object.prototype&&Object.keys(e).length,t.chainName2IdMap=new Map,t.chainName2IdMap.set("aptos:mainnet","aptos:637"),t.chainName2IdMap.set("movement:testnet","aptos:70000060"),t.chainName2IdMap.set("movement:mainnet","aptos:70000066"),t.chainName2IdMap.set("soon:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","svm:70000069"),t.chainName2IdMap.set("soon:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","svm:70000067"),t.chainName2IdMap.set("eclipse:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","svm:70000068")},34968:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Storage=t.Engine=t.WalletConnectionManager=t.ConnectionManager=t.OKXWalletConnector=void 0;var i=n(63065);Object.defineProperty(t,"OKXWalletConnector",{enumerable:!0,get:function(){return i.OKXWalletConnector}});var r=n(86095);Object.defineProperty(t,"ConnectionManager",{enumerable:!0,get:function(){return r.ConnectionManager}});var o=n(8212);Object.defineProperty(t,"WalletConnectionManager",{enumerable:!0,get:function(){return o.WalletConnectionManager}});var s=n(24686);Object.defineProperty(t,"Engine",{enumerable:!0,get:function(){return s.Engine}});var a=n(21309);Object.defineProperty(t,"Storage",{enumerable:!0,get:function(){return a.Storage}})},35559:(e,t,n)=>{"use strict";var i;!function(e){e.Internal="AUTHENTICATOR_TRANSPORT_INTERNAL",e.Usb="AUTHENTICATOR_TRANSPORT_USB",e.Nfc="AUTHENTICATOR_TRANSPORT_NFC",e.Ble="AUTHENTICATOR_TRANSPORT_BLE",e.Hybrid="AUTHENTICATOR_TRANSPORT_HYBRID"}(i||(i={}))},35946:(e,t,n)=>{"use strict";n(66024)},36389:(e,t,n)=>{"use strict";n(66024),n(59293)},36675:()=>{},37124:(e,t,n)=>{"use strict";n(66024),n(97097),n(69482)},37302:(e,t,n)=>{"use strict";n(66024)},37385:(e,t,n)=>{"use strict";n.d(t,{vHy:()=>i.vH,Aa3:()=>r.A}),n(66024),n(4775),n(56962),n(14937),n(31487),n(57203),n(77663),n(85854),n(24734),n(35559),n(13891),n(51227),n(18322),n(48309),n(12861),n(44079),n(91206),n(8777),n(95212),n(67219),n(97730),n(16812),n(61316),n(91492),n(30561),n(61946),n(53421),n(18627),n(59293),n(77712),n(2288),n(3314),n(68904),n(84126),n(73513),n(93946),n(87283),n(75942),n(53806),n(72839),n(59033),n(15983),n(70725),n(29532),n(37657),n(58762),n(95572),n(33236);var i=n(71995),r=n(39328);n(85594),n(87899),n(97367),n(49718),n(16188),n(23802),n(89793),n(22321),n(33634),n(24840),n(80642),n(62141),n(62506),n(74230),n(45593),n(81301),n(18794),n(4461),n(54274),n(34329),n(1468),n(42329),n(36389),n(22334),n(53971),n(80406),n(21680),n(21891),n(2202),n(49394),n(5949),n(97097),n(70078),n(37124),n(69482),n(18534),n(32655),n(85447),n(83404),n(49137),n(9035),n(25389),n(99109),n(97516),n(87680),n(44454),n(50462),n(47162),n(14066),n(62623),n(86568),n(54095),n(97607),n(94151),n(74907),n(37412),n(87845),n(48660),n(5844),n(9294),n(32214),n(73461),n(11082),n(29163),n(99331),n(46504),n(84396),n(67107),n(15933),n(79909),n(57056),n(13160),n(42932),n(1181),n(19425),n(89169),n(93720),n(74484),n(41836),n(27583),n(74017),n(14285),n(17228),n(83166),n(99019),n(71716),n(46480),n(68042),n(26493),n(95367),n(96468),n(8487),n(91408),n(46238),n(58139),n(39979),n(61116),n(48572),n(71773),n(76335),n(21256),n(80407),n(71940),n(45304),n(61284),n(11147),n(37302),n(7807),n(41736),n(79626),n(38949),n(35946),n(50205),n(93367),n(72955),n(30347),n(29063),n(99300),n(15283),n(59123),n(26367),n(94647),n(10002),n(28447),n(61377),n(67530),n(60047),n(45684),n(95879),n(40953),n(12904),n(63813),n(171),n(83),n(33390),n(21250),n(93138),n(79922),n(42393),n(38984),n(74198),n(10660),n(86866),n(55308),n(47160),n(61679),n(10019),n(96720),n(67613),n(99883),n(72139),n(16024),n(43649),n(19561),n(29051),n(66136),n(7792),n(85733),n(72916),n(13239),n(51713),n(26354),n(85666)},37412:(e,t,n)=>{"use strict";n(66024)},37606:(e,t,n)=>{"use strict";n.d(t,{E:()=>g});var i=n(40938),r=n(97971),o=n(59015),s=n(43712),a=class extends s.Q{constructor(e={}){super(),this.config=e,this.#e=new Map}#e;build(e,t,n){let o=t.queryKey,s=t.queryHash??(0,i.F$)(o,t),a=this.get(s);return a||(a=new r.X({client:e,queryKey:o,queryHash:s,options:e.defaultQueryOptions(t),state:n,defaultOptions:e.getQueryDefaults(o)}),this.add(a)),a}add(e){this.#e.has(e.queryHash)||(this.#e.set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){let t=this.#e.get(e.queryHash);t&&(e.destroy(),t===e&&this.#e.delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){o.j.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return this.#e.get(e)}getAll(){return[...this.#e.values()]}find(e){let t={exact:!0,...e};return this.getAll().find(e=>(0,i.MK)(t,e))}findAll(e={}){let t=this.getAll();return Object.keys(e).length>0?t.filter(t=>(0,i.MK)(e,t)):t}notify(e){o.j.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){o.j.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){o.j.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},c=n(52902),l=class extends s.Q{constructor(e={}){super(),this.config=e,this.#t=new Set,this.#n=new Map,this.#i=0}#t;#n;#i;build(e,t,n){let i=new c.s({mutationCache:this,mutationId:++this.#i,options:e.defaultMutationOptions(t),state:n});return this.add(i),i}add(e){this.#t.add(e);let t=d(e);if("string"==typeof t){let n=this.#n.get(t);n?n.push(e):this.#n.set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(this.#t.delete(e)){let t=d(e);if("string"==typeof t){let n=this.#n.get(t);if(n){if(n.length>1){let t=n.indexOf(e);-1!==t&&n.splice(t,1)}else n[0]===e&&this.#n.delete(t)}}}this.notify({type:"removed",mutation:e})}canRun(e){let t=d(e);if("string"!=typeof t)return!0;{let n=this.#n.get(t),i=n?.find(e=>"pending"===e.state.status);return!i||i===e}}runNext(e){let t=d(e);if("string"!=typeof t)return Promise.resolve();{let n=this.#n.get(t)?.find(t=>t!==e&&t.state.isPaused);return n?.continue()??Promise.resolve()}}clear(){o.j.batch(()=>{this.#t.forEach(e=>{this.notify({type:"removed",mutation:e})}),this.#t.clear(),this.#n.clear()})}getAll(){return Array.from(this.#t)}find(e){let t={exact:!0,...e};return this.getAll().find(e=>(0,i.nJ)(t,e))}findAll(e={}){return this.getAll().filter(t=>(0,i.nJ)(e,t))}notify(e){o.j.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){let e=this.getAll().filter(e=>e.state.isPaused);return o.j.batch(()=>Promise.all(e.map(e=>e.continue().catch(i.lQ))))}};function d(e){return e.options.scope?.id}var u=n(6138),h=n(64969),p=n(40853),g=class{#r;#o;#s;#a;#c;#l;#d;#u;constructor(e={}){this.#r=e.queryCache||new a,this.#o=e.mutationCache||new l,this.#s=e.defaultOptions||{},this.#a=new Map,this.#c=new Map,this.#l=0}mount(){this.#l++,1===this.#l&&(this.#d=u.m.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#r.onFocus())}),this.#u=h.t.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#r.onOnline())}))}unmount(){this.#l--,0===this.#l&&(this.#d?.(),this.#d=void 0,this.#u?.(),this.#u=void 0)}isFetching(e){return this.#r.findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return this.#o.findAll({...e,status:"pending"}).length}getQueryData(e){let t=this.defaultQueryOptions({queryKey:e});return this.#r.get(t.queryHash)?.state.data}ensureQueryData(e){let t=this.defaultQueryOptions(e),n=this.#r.build(this,t),r=n.state.data;return void 0===r?this.fetchQuery(e):(e.revalidateIfStale&&n.isStaleByTime((0,i.d2)(t.staleTime,n))&&this.prefetchQuery(t),Promise.resolve(r))}getQueriesData(e){return this.#r.findAll(e).map(({queryKey:e,state:t})=>[e,t.data])}setQueryData(e,t,n){let r=this.defaultQueryOptions({queryKey:e}),o=this.#r.get(r.queryHash),s=o?.state.data,a=(0,i.Zw)(t,s);if(void 0!==a)return this.#r.build(this,r).setData(a,{...n,manual:!0})}setQueriesData(e,t,n){return o.j.batch(()=>this.#r.findAll(e).map(({queryKey:e})=>[e,this.setQueryData(e,t,n)]))}getQueryState(e){let t=this.defaultQueryOptions({queryKey:e});return this.#r.get(t.queryHash)?.state}removeQueries(e){let t=this.#r;o.j.batch(()=>{t.findAll(e).forEach(e=>{t.remove(e)})})}resetQueries(e,t){let n=this.#r;return o.j.batch(()=>(n.findAll(e).forEach(e=>{e.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){let n={revert:!0,...t};return Promise.all(o.j.batch(()=>this.#r.findAll(e).map(e=>e.cancel(n)))).then(i.lQ).catch(i.lQ)}invalidateQueries(e,t={}){return o.j.batch(()=>(this.#r.findAll(e).forEach(e=>{e.invalidate()}),e?.refetchType==="none")?Promise.resolve():this.refetchQueries({...e,type:e?.refetchType??e?.type??"active"},t))}refetchQueries(e,t={}){let n={...t,cancelRefetch:t.cancelRefetch??!0};return Promise.all(o.j.batch(()=>this.#r.findAll(e).filter(e=>!e.isDisabled()).map(e=>{let t=e.fetch(void 0,n);return n.throwOnError||(t=t.catch(i.lQ)),"paused"===e.state.fetchStatus?Promise.resolve():t}))).then(i.lQ)}fetchQuery(e){let t=this.defaultQueryOptions(e);void 0===t.retry&&(t.retry=!1);let n=this.#r.build(this,t);return n.isStaleByTime((0,i.d2)(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(i.lQ).catch(i.lQ)}fetchInfiniteQuery(e){return e.behavior=(0,p.PL)(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(i.lQ).catch(i.lQ)}ensureInfiniteQueryData(e){return e.behavior=(0,p.PL)(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return h.t.isOnline()?this.#o.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#r}getMutationCache(){return this.#o}getDefaultOptions(){return this.#s}setDefaultOptions(e){this.#s=e}setQueryDefaults(e,t){this.#a.set((0,i.EN)(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){let t=[...this.#a.values()],n={};return t.forEach(t=>{(0,i.Cp)(e,t.queryKey)&&Object.assign(n,t.defaultOptions)}),n}setMutationDefaults(e,t){this.#c.set((0,i.EN)(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){let t=[...this.#c.values()],n={};return t.forEach(t=>{(0,i.Cp)(e,t.mutationKey)&&Object.assign(n,t.defaultOptions)}),n}defaultQueryOptions(e){if(e._defaulted)return e;let t={...this.#s.queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=(0,i.F$)(t.queryKey,t)),void 0===t.refetchOnReconnect&&(t.refetchOnReconnect="always"!==t.networkMode),void 0===t.throwOnError&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===i.hT&&(t.enabled=!1),t}defaultMutationOptions(e){return e?._defaulted?e:{...this.#s.mutations,...e?.mutationKey&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){this.#r.clear(),this.#o.clear()}}},37657:(e,t,n)=>{"use strict";var i;!function(e){e.Dynamic="dynamic",e.MagicLink="magicLink",e.Blocto="blocto",e.Turnkey="turnkey",e.CoinbaseWaas="coinbaseWaas"}(i||(i={}))},38949:(e,t,n)=>{"use strict";n(35559)},38984:(e,t,n)=>{"use strict";n(66024)},39328:(e,t,n)=>{"use strict";var i;n.d(t,{A:()=>i}),(i||(i={})).Login="login"},39979:(e,t,n)=>{"use strict";n(66024),n(8487),n(58139)},40104:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((i=i.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});let r=n(9407),o=n(86745),s=n(64675),a=n(32881),c=n(97724);class l{constructor(e,t,n){this.name=o.NameSpaceKeyCosmos,this.namespace=e.namespace,this.events=n,this.client=t,this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return i(this,void 0,void 0,function*(){if((0,o.logDebug)("cosmos request --args--string>",JSON.stringify(e)),(0,o.logDebug)("cosmos provider namespace: ",JSON.stringify(this.namespace)),!this.client.needCheckRequestMethod()||this.namespace.methods.includes(e.method))return this.client.request(e);throw new o.OKXConnectError(o.OKX_CONNECT_ERROR_CODES.METHOD_NOT_SUPPORTED,"Please upgrade OKX APP")})}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(r.PROVIDER_EVENTS.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw Error("ChainId not found");return e.split(":")[1]}getAccounts(){let e=this.namespace.accounts;return e?[...new Set(e.filter(e=>e.split(":")[1]===this.chainId.toString()).map(e=>e.split(":")[2]))]:[]}createHttpProviders(){let e={};return this.namespace.chains.forEach(t=>{let n=(0,s.getChainId)(t),i=(0,s.getRpcUrl)(t,this.namespace),r=this.createHttpProvider(n,i);r&&(e[n]=r)}),e}getHttpProvider(){let e=`${this.chainId}`,t=this.httpProviders[e];if(void 0===t)throw Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){let n=this.createHttpProvider(e,t);n&&(this.httpProviders[e]=n)}createHttpProvider(e,t){if(t)return new c.JsonRpcProvider(new a.JsonRpcConnection(t,(0,s.getGlobal)("disableProviderPing")))}showRequestModal(e){return!0}}t.default=l},40953:(e,t,n)=>{"use strict";n(24840)},41452:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((i=i.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});let r=n(9407),o=n(86745),s=n(64675),a=n(32881),c=n(97724);class l{constructor(e,t,n,i){this.name="starknet",this.namespace=e.namespace,this.events=i,this.client=n,this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders(),this.name=t}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return i(this,void 0,void 0,function*(){if((0,o.logDebug)("starknet request --args--string>",JSON.stringify(e)),(0,o.logDebug)("starknet provider namespace: ",this.namespace),!this.client.needCheckRequestMethod()||this.namespace.methods.includes(e.method))return this.client.request(e);throw new o.OKXConnectError(o.OKX_CONNECT_ERROR_CODES.METHOD_NOT_SUPPORTED,"Wallet doesn't support"+e.method)})}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(r.PROVIDER_EVENTS.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw Error("ChainId not found");return e.split(":")[1]}getAccounts(){let e=this.namespace.accounts;return e?[...new Set(e.filter(e=>e.split(":")[1]===this.chainId.toString()).map(e=>e.split(":")[2]))]:[]}createHttpProviders(){let e={};return this.namespace.chains.forEach(t=>{let n=(0,s.getChainId)(t),i=(0,s.getRpcUrl)(t,this.namespace),r=this.createHttpProvider(n,i);r&&(e[n]=r)}),e}getHttpProvider(){let e=`${this.chainId}`,t=this.httpProviders[e];if(void 0===t)throw Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){let n=this.createHttpProvider(e,t);n&&(this.httpProviders[e]=n)}createHttpProvider(e,t){if(t)return new c.JsonRpcProvider(new a.JsonRpcConnection(t,(0,s.getGlobal)("disableProviderPing")))}showRequestModal(e){return!0}}t.default=l},41625:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.TONCHAIN=void 0,(n||(t.TONCHAIN=n={})).MAINNET="-239"},41736:(e,t,n)=>{"use strict";n(66024),n(83404),n(49137),n(77663),n(24840)},41836:(e,t,n)=>{"use strict";n(41736)},42329:(e,t,n)=>{"use strict";n(66024),n(13891),n(94151),n(51227),n(5949),n(53971),n(97730)},42393:(e,t,n)=>{"use strict";n(66024),n(46504)},42932:(e,t,n)=>{"use strict";n(89793)},43649:(e,t,n)=>{"use strict";n(19561)},43797:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(t,n);(!r||("get"in r?!t.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,r)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.OKXStarknetProvider=t.OKXTronProvider=t.OKXTonProvider=t.OKXCosmosProvider=t.OKXBtcProvider=t.OKXUniversalProvider=void 0,r(n(83095),t),r(n(67685),t);var o=n(84697);Object.defineProperty(t,"OKXUniversalProvider",{enumerable:!0,get:function(){return o.OKXUniversalProvider}});var s=n(50611);Object.defineProperty(t,"OKXBtcProvider",{enumerable:!0,get:function(){return s.OKXBtcProvider}});var a=n(59806);Object.defineProperty(t,"OKXCosmosProvider",{enumerable:!0,get:function(){return a.OKXCosmosProvider}});var c=n(26965);Object.defineProperty(t,"OKXTonProvider",{enumerable:!0,get:function(){return c.OKXTonProvider}});var l=n(94797);Object.defineProperty(t,"OKXTronProvider",{enumerable:!0,get:function(){return l.OKXTronProvider}});var d=n(92122);Object.defineProperty(t,"OKXStarknetProvider",{enumerable:!0,get:function(){return d.OKXStarknetProvider}}),r(n(86745),t)},44079:(e,t,n)=>{"use strict";var i;(i||(i={})).Ledger="ledger"},44454:(e,t,n)=>{"use strict";n(66024),n(50462),n(77712),n(2288)},45304:(e,t,n)=>{"use strict";n(66024),n(62141)},45593:(e,t,n)=>{"use strict";var i;!function(e){e.ConnectAndSign="connect_and_sign",e.MultiWallet="multi_wallet",e.ApiTokens="api_tokens",e.InfoCapture="info_capture",e.AccessList="access_list",e.Chainalysis="chainalysis",e.AnalyticsUsers="analytics_users",e.AnalyticsVisits="analytics_visits",e.Captcha="captcha",e.SigninWithEmail="signin_with_email",e.Gating="gating",e.AccountAbstraction="account_abstraction",e.Webhooks="webhooks"}(i||(i={}))},45684:(e,t,n)=>{"use strict";n(66024)},46238:(e,t,n)=>{"use strict";n(66024)},46480:(e,t,n)=>{"use strict";n(59293)},46504:(e,t,n)=>{"use strict";n(66024),n(48572),n(83)},46617:function(e,t,n){"use strict";var i,r=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(t,n);(!r||("get"in r?!t.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,r)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||(i=function(e){return(i=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t})(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=i(e),s=0;s<n.length;s++)"default"!==n[s]&&r(t,e,n[s]);return o(t,e),t}),a=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((i=i.apply(e,t||[])).next())})},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.MULTICODEC_ED25519_LENGTH=t.MULTICODEC_ED25519_HEADER=t.MULTICODEC_ED25519_BASE=t.MULTICODEC_ED25519_ENCODING=t.DID_METHOD=t.DID_PREFIX=t.DID_DELIMITER=t.KEY_PAIR_SEED_LENGTH=t.DATA_ENCODING=t.JSON_ENCODING=t.JWT_ENCODING=t.JWT_DELIMITER=t.JWT_IRIDIUM_TYP=t.JWT_IRIDIUM_ALG=t.JWTHeaderType=void 0,t.generateKeyPair=function(){return h.default.sign.keyPair()},t.decodeJSON=f,t.encodeJSON=m,t.encodeIss=v,t.decodeIss=O,t.encodeSig=_,t.decodeSig=C,t.encodeData=y,t.decodeData=function(e){var n,i;let r=(0,g.okxtoString)(e,t.DATA_ENCODING).split(t.JWT_DELIMITER);return{header:f(null!==(n=r[0])&&void 0!==n?n:"{}"),payload:f(null!==(i=r[1])&&void 0!==i?i:"{}")}},t.encodeJWT=E,t.decodeJWT=b,t.signJWT=function(e,n,i,r){return a(this,arguments,void 0,function*(e,n,i,r,o=Math.floor(Date.now())){let s={alg:t.JWT_IRIDIUM_ALG,typ:t.JWT_IRIDIUM_TYP},a={iss:v(r.publicKey),sub:e,aud:n,act:"authenticate user",iat:o,exp:o+i},c=y({header:s,payload:a});return p.logDebug(`get sec kp: ${r.secretKey} {${r.secretKey.length}}`),E({header:s,payload:a,signature:h.default.sign.detached(c,r.secretKey)})})},t.verifyJWT=function(e){return a(this,void 0,void 0,function*(){let{header:n,payload:i,data:r,signature:o}=b(e);if(n.alg!==t.JWT_IRIDIUM_ALG||n.typ!==t.JWT_IRIDIUM_TYP)throw Error("JWT must use EdDSA algorithm");let s=O(i.iss);return l.verify(s,r,o)})};let l=s(n(65716)),d=n(86094),u=n(34554),h=c(n(87124)),p=s(n(86273)),g=n(79185);function f(e){return(0,d.safeJsonParse)((0,g.okxtoString)((0,g.okxfromString)(e,t.JWT_ENCODING),t.JSON_ENCODING))}function m(e){return(0,g.okxtoString)((0,g.okxfromString)((0,d.safeJsonStringify)(e),t.JSON_ENCODING),t.JWT_ENCODING)}function v(e){p.logDebug(`publicKey: ${(0,u.toHexString)(e)}`);var n=(0,g.okxtoString)(e,t.MULTICODEC_ED25519_ENCODING);return[t.DID_PREFIX,t.DID_METHOD,n].join(t.DID_DELIMITER)}function O(e){let[n,i,r]=e.split(t.DID_DELIMITER);if(n!==t.DID_PREFIX||i!==t.DID_METHOD)throw Error('Issuer must be a DID with method "key"');if(void 0===r)throw Error("multicodec is undefined");let o=(0,g.okxfromString)(r,t.MULTICODEC_ED25519_ENCODING);if(void 0===o||o.length!==t.MULTICODEC_ED25519_LENGTH)throw Error("Issuer must be a public key with length 32 bytes");return o}function _(e){return(0,g.okxtoString)(e,t.JWT_ENCODING)}function C(e){return(0,g.okxfromString)(e,t.JWT_ENCODING)}function y(e){return(0,g.okxfromString)([m(e.header),m(e.payload)].join(t.JWT_DELIMITER),t.DATA_ENCODING)}function E(e){return[m(e.header),m(e.payload),_(e.signature)].join(t.JWT_DELIMITER)}function b(e){var n,i,r;let o=e.split(t.JWT_DELIMITER),s=f(null!==(n=o[0])&&void 0!==n?n:"{}"),a=f(null!==(i=o[1])&&void 0!==i?i:"{}");return{header:s,payload:a,signature:C(null!==(r=o[2])&&void 0!==r?r:"{}"),data:(0,g.okxfromString)(o.slice(0,2).join(t.JWT_DELIMITER),t.DATA_ENCODING)}}t.JWTHeaderType="dapp",t.JWT_IRIDIUM_ALG="EdDSA",t.JWT_IRIDIUM_TYP="JWT",t.JWT_DELIMITER=".",t.JWT_ENCODING="base64url",t.JSON_ENCODING="utf8",t.DATA_ENCODING="utf8",t.KEY_PAIR_SEED_LENGTH=32,t.DID_DELIMITER=":",t.DID_PREFIX="did",t.DID_METHOD="key",t.MULTICODEC_ED25519_ENCODING="base58btc",t.MULTICODEC_ED25519_BASE="z",t.MULTICODEC_ED25519_HEADER="K36",t.MULTICODEC_ED25519_LENGTH=32},47160:(e,t,n)=>{"use strict";n(66024)},47162:(e,t,n)=>{"use strict";n(44454)},48309:(e,t,n)=>{"use strict";var i;!function(e){e.SignerToEcdsa="zerodev_signer_to_ecdsa",e.MultiChain="zerodev_multi_chain"}(i||(i={}))},48572:(e,t,n)=>{"use strict";n(66024)},48660:(e,t,n)=>{"use strict";n(66024)},49137:(e,t,n)=>{"use strict";n(66024)},49394:(e,t,n)=>{"use strict";n(66024)},49517:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TgwalletConnector=void 0;let i=n(20771),r=n(67189),o=n(83819);class s extends i.WsConnector{constructor(){super(),this.walletName="OKX Mini Wallet",this.walletNameKey="walletModal.mobileConnectionModal.connectMini"}getTag(){return r.OKX_TG_WALLET}openWallet(e){e&&e.connectRequest&&(n=(0,o.encodeTWAConnectURLParams)(Object.assign(Object.assign({},e.connectRequest),{redirect:"none"})));var t,n,i=(0,o.getTelegramWalletTWAUrl)(n,null!==(t=null==e?void 0:e.tmaReturnUrl)&&void 0!==t?t:"back");(0,o.openOKXTMAWalletlinkWithFallback)(i)}}t.TgwalletConnector=s},49641:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((i=i.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.Eip155Provider=void 0;let r=n(59564),o=n(83819),s=n(55263),a=n(15423);class c{constructor(){this.accountChangedEVMHandler=null}send(e){return i(this,void 0,void 0,function*(){var t;try{(0,o.logDebug)("Eip155Provider send request:",(0,o.safeJsonStringify)(e)),yield this.restoreConnect();let n=null;switch(e.method){case"personal_sign":e.params&&"message"in e.params&&(n={method:e.method,params:[e.params.message,e.address]});break;case"eth_sendTransaction":case"wallet_addEthereumChain":case"wallet_switchEthereumChain":e.params&&(n={method:e.method,params:[e.params]});break;case"eth_signTypedData_v4":e.params&&"typedDataJson"in e.params&&(null===(t=e.params)||void 0===t?void 0:t.typedDataJson)&&"string"==typeof e.params.typedDataJson&&(n={method:e.method,params:[e.address,e.params.typedDataJson]});break;case"wallet_watchAsset":e.params&&(n={method:e.method,params:e.params});break;default:n={method:e.method,params:e.injectParams}}if(n){if(("wallet_switchEthereumChain"===e.method||"wallet_addEthereumChain"===e.method)&&e.params&&"chainId"in e.params){(0,o.logDebug)("Eip155Provider send request switch requestParams:",(0,o.safeJsonStringify)(n));let t=parseInt(e.params.chainId,16).toString();yield window.okxwallet.request(n);let i=`eip155:${t}:${e.address}`;return(0,o.logDebug)("Eip155Provider send request switch result:",i),{result:i,method:e.method}}{let t=(0,o.getChainId)(e.chainId),i=`0x${Number(t).toString(16)}`;if((0,o.logDebug)("Eip155Provider current chainId:",t,i),i){yield window.okxwallet.request({method:"wallet_switchEthereumChain",params:[{chainId:i}]}),(0,o.logDebug)("Eip155Provider send request requestParams:",i,(0,o.safeJsonStringify)(n));let t=yield window.okxwallet.request(n);return(0,o.logDebug)("Eip155Provider send request result:",(0,o.safeJsonStringify)(t)),{result:t,method:e.method}}}}else throw new r.OKXConnectError(r.OKX_CONNECT_ERROR_CODES.METHOD_NOT_SUPPORTED)}catch(e){throw(0,o.logDebug)("Eip155Provider encountered an error:",e),e}})}connectReady(){return!0}restoreConnect(){return(0,s.isDevice)("mobile")?window.okxwallet.request({method:"eth_requestAccounts"}):Promise.resolve()}parseConnectResponse(e,t,n,s,c,l){return i(this,void 0,void 0,function*(){try{let e=[];s.forEach(t=>{t.namespace===r.NameSpaceKeyEip155&&e.push(...t.chains)});let t=[],n={};if(e.forEach(e=>{let i=(0,o.getChainId)(e),r=c.address.find(t=>t.chainId===i&&60===t.coinType||t.namespaceChainId===e);r&&(t.push(e+":"+r.address),n[e]={publicKey:r.publicKey})}),t&&t.length>0)return{namespace:r.NameSpaceKeyEip155,addresses:t,methods:[...a.Eip55Methods],extra:n};return}catch(e){throw e}})}connect(){return i(this,void 0,void 0,function*(){return window.okxwallet.request({method:"eth_requestAccounts"})})}singleConnect(){return this.connect()}addListener(e){console.log("window.okxwallet configEventWithKey: eip155"),this.accountChangedEVMHandler=t=>{console.log("window.okxwallet configEventWithKey_evm:",Date.now(),"eip155",t),t&&t.length>0&&e()},window.okxwallet.on("accountsChanged",this.accountChangedEVMHandler)}removeListener(){this.accountChangedEVMHandler&&window.okxwallet.removeListener("accountsChanged",this.accountChangedEVMHandler)}}t.Eip155Provider=c},49718:(e,t,n)=>{"use strict";var i;!function(e){e.Completed="completed",e.Failed="failed",e.Pending="pending"}(i||(i={}))},50205:(e,t,n)=>{"use strict";n(53421)},50462:(e,t,n)=>{"use strict";n(14066)},50611:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((i=i.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.OKXBtcProvider=void 0;let r=n(43797),o=n(86745);class s{constructor(e){this.caip=["btc:mainnet","fractal:mainnet"],this.provider=e}getAddressForChainId(e){var t,n;if(void 0==this.checkChainId(e))throw new r.OKXConnectError(r.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"invalid chainId");let i=null===(n=null===(t=this.provider.session)||void 0===t?void 0:t.namespaces.btc)||void 0===n?void 0:n.accounts.filter(function(t){return t.startsWith(e)});if(void 0==i||i.length<0)throw new r.OKXConnectError(r.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"no connected account");return i[0].split(":")[2]}getAccount(e){var t,n,i;if(void 0==this.checkChainId(e))throw new r.OKXConnectError(r.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"invalid chainId");let o=null===(i=null===(n=null===(t=this.provider.session)||void 0===t?void 0:t.namespaces.btc)||void 0===n?void 0:n.extra)||void 0===i?void 0:i[e],s="";return void 0!=o&&(s=o.compressedPublicKey),{address:this.getAddressForChainId(e),publicKey:s}}signMessage(e,t,n){return i(this,void 0,void 0,function*(){if(void 0==this.checkChainId(e))throw new r.OKXConnectError(r.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"invalid chainId");if("undefined"===t)throw new r.OKXConnectError(r.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"the method signMessage parmas error");let i={signStr:t,from:this.getAddressForChainId(e)};n&&(i.type=n);try{let t=yield this.provider.request({method:"btc_signMessage",params:i},e);if("result"in t)return t.result;return t.error}catch(e){if(e instanceof r.OKXConnectError)throw e;throw new r.OKXConnectError(r.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"the method signTransaction request error")}})}sendBitcoin(e,t,n,o){return i(this,void 0,void 0,function*(){if(void 0==this.checkChainId(e))throw new r.OKXConnectError(r.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"invalid chainId");let i={from:this.getAddressForChainId(e),to:t,value:(n/1e8).toString()};(null==o?void 0:o.feeRate)&&(i.satBytes=o.feeRate.toString());let s=yield this.send(e,i);return void 0!==s&&"txhash"in s?s.txhash:s})}send(e,t){return i(this,void 0,void 0,function*(){if(void 0==this.checkChainId(e))throw new r.OKXConnectError(r.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"invalid chainId");if(!this.checkParameters(t,"to","value"))throw new r.OKXConnectError(r.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"the method send parmas  error");t.from=this.getAddressForChainId(e);try{let n=yield this.provider.request({method:"btc_send",params:t},e);if("result"in n)return{txhash:n.result};return n.error}catch(e){if(e instanceof r.OKXConnectError)throw e;throw new r.OKXConnectError(r.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`the method send request error: ${e}`)}})}signPsbt(e,t,n){return i(this,void 0,void 0,function*(){return new Promise((i,r)=>{this.signPsbts(e,[t],[n]).then(e=>{i(JSON.parse(e)[0])}).catch(e=>{r(e)})})})}signPsbts(e,t,n){return i(this,void 0,void 0,function*(){if(void 0==this.checkChainId(e))throw new r.OKXConnectError(r.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"invalid chainId");if(void 0===t)throw new r.OKXConnectError(r.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"the method signPsbts params error");let i={psbtHexs:t,options:n};i.from=this.getAddressForChainId(e);try{let t=yield this.provider.request({method:"btc_signPsbts",params:i},e);if("result"in t)return t.result}catch(e){if(e instanceof r.OKXConnectError)throw e;throw new r.OKXConnectError(r.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`the method send request error: ${e}`)}})}signAndPushPsbt(e,t,n){return i(this,void 0,void 0,function*(){if(void 0==this.checkChainId(e))throw new r.OKXConnectError(r.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"invalid chainId");if(void 0===t)throw new r.OKXConnectError(r.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"the method signPsbts params error");let i={psbtHex:t,options:n};i.from=this.getAddressForChainId(e);try{let t=yield this.provider.request({method:"btc_signAndPushPsbt",params:i},e);if("result"in t)return JSON.parse(t.result);return t.error}catch(e){if(e instanceof r.OKXConnectError)throw e;throw new r.OKXConnectError(r.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`the method send request error: ${e}`)}})}sendInscription(e,t,n,o){return i(this,void 0,void 0,function*(){let i={address:t,inscriptionId:n,options:o};if(void 0==this.checkChainId(e))throw new r.OKXConnectError(r.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"invalid chainId");if("undefined"===t)throw new r.OKXConnectError(r.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"the method sendInscription params error");var s=0;o&&"feeRate"in o&&(s=o.feeRate);let a=this.getAddressForChainId(e);var c=7;if("undefined"!==n){let e="-Atomicals",t="-Ordinals";(null==n?void 0:n.toLowerCase().endsWith(e.toLowerCase()))?(c=8,n=this.removeSuffix(n,e)):(null==n?void 0:n.toLowerCase().endsWith(t.toLowerCase()))&&(n=this.removeSuffix(n,t))}let l={scenario:5,feeRate:s,txType:"20",to:t,batchBean:[{coinAmount:"1",nftId:n,protocolId:c,coinId:"",inscriptionId:"",from:a}],extension:i};try{let i=yield this.provider.request({method:"btc_sendInscription",params:l,injectParams:{address:t,inscriptionId:n,options:o}},e);if("result"in i)return i.result;return i.error}catch(e){if(e instanceof r.OKXConnectError)throw e;throw new r.OKXConnectError(r.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"the method signTransaction request error")}})}sendRunes(e,t,n,s,a){return i(this,void 0,void 0,function*(){try{let i;if(!e||!t||!n||!s)throw new r.OKXConnectError(r.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"The parameter is empty. Please check");let c=this.checkChainId(e);if(void 0!=c&&(c.startsWith("btc")?i=13:c.startsWith("fractal")&&(i=16)),void 0==c||void 0==i)throw new r.OKXConnectError(r.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"invalid chainId");let l={fromAddress:this.getAddressForChainId(e),protocolId:i,address:t,runeid:n,amount:s,options:a};return(0,o.logDebug)("OKXBtcProvider sendRunes --\x3e",JSON.stringify(l)),(yield this.provider.request({method:"btc_sendRunes",params:l,injectParams:{address:t,runeid:n,amount:s,options:a}},e)).result}catch(e){throw e}})}inscribeTransfer(e,t,n){return i(this,void 0,void 0,function*(){try{let i;if(!e||!t||!n)throw new r.OKXConnectError(r.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"The parameter is empty. Please check");let s=this.checkChainId(e);if(void 0!=s&&(s.startsWith("btc")?i=1:s.startsWith("fractal")&&(i=14)),void 0==s||void 0==i)throw new r.OKXConnectError(r.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"invalid chainId");let a={fromAddress:this.getAddressForChainId(e),protocolId:i,ticker:t,amount:n};(0,o.logDebug)("OKXBtcProvider inscribeTransfer --\x3e",JSON.stringify(a)),yield this.provider.request({method:"btc_inscribeTransfer",params:a},e)}catch(e){throw e}})}removeSuffix(e,t){return e.endsWith(t)?e.slice(0,e.length-t.length):e}checkParameters(e,...t){var n=[];return t.forEach(t=>{`${t}`in e||n.push(t)}),!(n.length>0)||(console.log("not find key: ",n.join(",")),!1)}checkChainId(e){if(this.caip.includes(e)){let[t,n]=e.split(":");return t}}}t.OKXBtcProvider=s,t.default=s},51226:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.checkMetaData=function(e){if(!e)throw new i.OKXConnectError(i.OKX_CONNECT_ERROR_CODES.BAD_REQUEST_ERROR,"You have to specify a `dappMetaData`in the options.");if(!e.name)throw new i.OKXConnectError(i.OKX_CONNECT_ERROR_CODES.BAD_REQUEST_ERROR,"dappName is required");return!0};let i=n(59564)},51227:(e,t,n)=>{"use strict";var i;!function(e){e.EmailOnly="emailOnly",e.MagicLink="magicLink",e.Apple="apple",e.Bitbucket="bitbucket",e.Coinbasesocial="coinbasesocial",e.Discord="discord",e.Epicgames="epicgames",e.Facebook="facebook",e.Farcaster="farcaster",e.Github="github",e.Gitlab="gitlab",e.Google="google",e.Instagram="instagram",e.Linkedin="linkedin",e.Microsoft="microsoft",e.Twitch="twitch",e.Twitter="twitter",e.Blocto="blocto",e.Banxa="banxa",e.CoinbaseOnramp="coinbaseOnramp",e.Dynamic="dynamic",e.Alchemy="alchemy",e.Zerodev="zerodev",e.Telegram="telegram",e.Turnkey="turnkey",e.CoinbaseWaas="coinbaseWaas",e.Sms="sms",e.Spotify="spotify",e.Tiktok="tiktok",e.Line="line",e.Steam="steam",e.Shopify="shopify"}(i||(i={}))},51306:(e,t,n)=>{var i=n(139);e.exports=function(){return i.Date.now()}},51713:(e,t,n)=>{"use strict";n(66024),n(9294)},51789:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AppwalletConnector=void 0;let i=n(20771),r=n(67189),o=n(83819),s=n(33026);class a extends i.WsConnector{constructor(){super(),this.walletName="OKX App",this.walletNameKey="walletModal.mobileConnectionModal.connectApp"}getTag(){return r.OKX_APP_WALLET}openWallet(e){var t;if(e&&e.connectRequest){let n=e.connectRequest;if((0,o.logDebug)(`appwallet-connector openwallet before useSHortLink engineConnectInfo.connectRequest JSON ${JSON.stringify(e)}`),(0,o.useShortLink)()){let e=(0,o.getOKXLink)(n);(0,o.openOKXUniversalLink)(e)}else{(0,o.logDebug)(`appwallet-connector openwallet else connectRequest ${n}`);let i=(0,o.encodeConnectParams)(Object.assign(Object.assign({},n),{redirect:null!==(t=e.redirect)&&void 0!==t?t:"none"})),r=(0,o.getAppWalletDeepLink)(i);(0,o.openOKXDeeplinkWithFallback)(r)}}else(0,o.isOS)("android")?(0,o.openDeeplinkWithFallback)(s.stackDeepLink,()=>{}):(0,o.openOKXDeeplinkWithFallback)(s.standardDeeplink)}}t.AppwalletConnector=a},51997:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((i=i.apply(e,t||[])).next())})},r=this&&this.__rest||function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&0>t.indexOf(i)&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)0>t.indexOf(i[r])&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]]);return n};Object.defineProperty(t,"__esModule",{value:!0});let o=n(9407),s=n(86745),a=n(64675),c=n(32881),l=n(97724);class d{constructor(e,t,n){this.name=s.NameSpaceKeyTON,this.namespace=e.namespace,this.events=n,this.client=t,this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}isRecord(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}request(e){return i(this,void 0,void 0,function*(){var t,n,i,o;if((0,s.logDebug)("TONProvider request --args--string>",JSON.stringify(e)),(0,s.logDebug)("TONProvider request provider namespace: ",this.namespace),!this.client.needCheckRequestMethod()||this.namespace.methods.includes(e.method)){if(!e.params)throw new s.OKXConnectError(s.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"ton request params is nil");if(this.isRecord(e.params)){let a=e.params,{validUntil:c}=a,l=r(a,["validUntil"]),d=null===(n=null===(t=this.namespace.payload)||void 0===t?void 0:t.ton_addr)||void 0===n?void 0:n.address;"from"in l&&(d=l.from||(null===(o=null===(i=this.namespace.payload)||void 0===i?void 0:i.ton_addr)||void 0===o?void 0:o.address)),e.params.from=d,e.params.network=this.getDefaultChain(),e.params.valid_until=c;let u=yield this.client.request(e);if(this.isRecord(u)&&"result"in u){let e={boc:u.result.toString()};return(0,s.logDebug)("TONProvider request provider response: ",JSON.stringify(u)),(0,s.logDebug)("TONProvider request provider result: ",JSON.stringify(e)),e}throw new s.OKXConnectError(s.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"ton_send request response is nil")}throw new s.OKXConnectError(s.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"ton request params type add nil")}return this.getHttpProvider().request(e)})}requestAccounts(){return this.getAccounts()}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(o.PROVIDER_EVENTS.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw Error("ChainId not found");return e.split(":")[1]}getAccounts(){var e,t;let n=this.namespace.accounts;if((0,s.logDebug)("ton getAccounts accounts :",n),(0,s.logDebug)("ton getAccounts .namespace :",JSON.stringify(this.namespace)),!n)return[];let i=null===(t=null===(e=this.namespace.payload)||void 0===e?void 0:e.ton_addr)||void 0===t?void 0:t.address;return((0,s.logDebug)("ton getAccounts address :",i),i)?[i]:[]}createHttpProviders(){let e={};return this.namespace.chains.forEach(t=>{let n=(0,a.getChainId)(t),i=(0,a.getRpcUrl)(t,this.namespace),r=this.createHttpProvider(n,i);r&&(e[n]=r)}),e}getHttpProvider(){let e=`${this.chainId}`,t=this.httpProviders[e];if((0,s.logDebug)("[RPC] get http provider:",e,t),void 0===t)throw Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){let n=this.createHttpProvider(e,t);n&&((0,s.logDebug)("setHttpProvider",e,t),this.httpProviders[e]=n)}createHttpProvider(e,t){if(t)return new l.JsonRpcProvider(new c.JsonRpcConnection(t,(0,a.getGlobal)("disableProviderPing")));(0,s.logError)(`No RPC url provided for chainId: ${e}`)}showRequestModal(e){return"ton_sendTransaction"===e.method}}t.default=d},53421:(e,t,n)=>{"use strict";var i;!function(e){e.Eth="ETH",e.Evm="EVM",e.Flow="FLOW",e.Sol="SOL",e.Algo="ALGO",e.Stark="STARK",e.Cosmos="COSMOS",e.Btc="BTC",e.Eclipse="ECLIPSE",e.Sui="SUI"}(i||(i={}))},53806:(e,t,n)=>{"use strict";var i;(i||(i={})).Mpc="mpc"},53971:(e,t,n)=>{"use strict";n(66024),n(48309),n(12861),n(44079),n(91206),n(8777),n(95212),n(67219)},54095:(e,t,n)=>{"use strict";n(66024)},54224:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.CONNECT_ITEM_ERROR_CODES=void 0,function(e){e[e.UNKNOWN_ERROR=0]="UNKNOWN_ERROR",e[e.METHOD_NOT_SUPPORTED=400]="METHOD_NOT_SUPPORTED"}(n||(t.CONNECT_ITEM_ERROR_CODES=n={}))},54274:(e,t,n)=>{"use strict";n(66024),n(54095)},54701:(e,t,n)=>{"use strict";let i;n.d(t,{Ay:()=>B});var r,o=n(97707);let s=(e,t,n)=>{let i=document.createElement(e),[r,o]=Array.isArray(t)?[void 0,t]:[t,n];return r&&Object.assign(i,r),null==o||o.forEach(e=>i.appendChild(e)),i},a=(e,t)=>{var n;return"left"===t?e.offsetLeft:((null==(n=e.offsetParent instanceof HTMLElement?e.offsetParent:null)?void 0:n.offsetWidth)??0)-e.offsetWidth-e.offsetLeft},c=e=>e.offsetWidth>0&&e.offsetHeight>0,l=String.raw,d=String.raw,u="u">typeof CSS&&CSS.supports&&CSS.supports("animation-timing-function","linear(1,2)"),h="u">typeof CSS&&CSS.supports&&CSS.supports("line-height","mod(1,1)"),p="u">typeof matchMedia?matchMedia("(prefers-reduced-motion: reduce)"):null,g="--_number-flow-d-opacity",f="--_number-flow-d-width",m="--_number-flow-dx",v="--_number-flow-d",O=(()=>{try{return CSS.registerProperty({name:g,syntax:"<number>",inherits:!1,initialValue:"0"}),CSS.registerProperty({name:m,syntax:"<length>",inherits:!0,initialValue:"0px"}),CSS.registerProperty({name:f,syntax:"<number>",inherits:!1,initialValue:"0"}),CSS.registerProperty({name:v,syntax:"<number>",inherits:!0,initialValue:"0"}),!0}catch{return!1}})(),_="var(--number-flow-char-height, 1em)",C="var(--number-flow-mask-height, 0.25em)",y=`calc(${C} / 2)`,E="var(--number-flow-mask-width, 0.5em)",b=`calc(${E} / var(--scale-x))`,N="#000 0, transparent 71%",R=d`:host{display:inline-block;direction:ltr;white-space:nowrap;isolation:isolate;line-height:${_} !important}.number,.number__inner{display:inline-block;transform-origin:left top}:host([data-will-change]) :is(.number,.number__inner,.section,.digit,.digit__num,.symbol){will-change:transform}.number{--scale-x:calc(1 + var(${f}) / var(--width));transform:translateX(var(${m})) scaleX(var(--scale-x));margin:0 calc(-1 * ${E});position:relative;-webkit-mask-image:linear-gradient(to right,transparent 0,#000 ${b},#000 calc(100% - ${b}),transparent ),linear-gradient(to bottom,transparent 0,#000 ${C},#000 calc(100% - ${C}),transparent 100% ),radial-gradient(at bottom right,${N}),radial-gradient(at bottom left,${N}),radial-gradient(at top left,${N}),radial-gradient(at top right,${N});-webkit-mask-size:100% calc(100% - ${C} * 2),calc(100% - ${b} * 2) 100%,${b} ${C},${b} ${C},${b} ${C},${b} ${C};-webkit-mask-position:center,center,top left,top right,bottom right,bottom left;-webkit-mask-repeat:no-repeat}.number__inner{padding:${y} ${E};transform:scaleX(calc(1 / var(--scale-x))) translateX(calc(-1 * var(${m})))}:host > :not(.number){z-index:5}.section,.symbol{display:inline-block;position:relative;isolation:isolate}.section::after{content:'\200b';display:inline-block}.section--justify-left{transform-origin:center left}.section--justify-right{transform-origin:center right}.section > [inert],.symbol > [inert]{margin:0 !important;position:absolute !important;z-index:-1}.digit{display:inline-block;position:relative;--c:var(--current) + var(${v})}.digit__num,.number .section::after{padding:${y} 0}.digit__num{display:inline-block;--offset-raw:mod(var(--length) + var(--n) - mod(var(--c),var(--length)),var(--length));--offset:calc( var(--offset-raw) - var(--length) * round(down,var(--offset-raw) / (var(--length) / 2),1) );--y:clamp(-100%,var(--offset) * 100%,100%);transform:translateY(var(--y))}.digit__num[inert]{position:absolute;top:0;left:50%;transform:translateX(-50%) translateY(var(--y))}.digit:not(.is-spinning) .digit__num[inert]{display:none}.symbol__value{display:inline-block;mix-blend-mode:plus-lighter;white-space:pre}.section--justify-left .symbol > [inert]{left:0}.section--justify-right .symbol > [inert]{right:0}.animate-presence{opacity:calc(1 + var(${g}))}`,w=HTMLElement,S=d`:host{display:inline-block;direction:ltr;white-space:nowrap;line-height:${_} !important}span{display:inline-block}:host([data-will-change]) span{will-change:transform}.number,.digit{padding:${y} 0}.symbol{white-space:pre}`,T=e=>`<span class="${"integer"===e.type||"fraction"===e.type?"digit":"symbol"}" part="${"integer"===e.type||"fraction"===e.type?`digit ${e.type}-digit`:`symbol ${e.type}`}">${e.value}</span>`,P=(e,t)=>`<span part="${t}">${e.reduce((e,t)=>e+T(t),"")}</span>`,D=h&&u&&O;class I extends w{constructor(){super(),this.created=!1,this.batched=!1;let{animated:e,...t}=this.constructor.defaultProps;this._animated=this.computedAnimated=e,Object.assign(this,t)}get animated(){return this._animated}set animated(e){var t;this.animated!==e&&(this._animated=e,null==(t=this.shadowRoot)||t.getAnimations().forEach(e=>e.finish()))}set data(e){var t;if(null==e)return;let{pre:n,integer:r,fraction:o,post:s,value:a}=e;if(this.created){let i=this._data;this._data=e,this.computedTrend="function"==typeof this.trend?this.trend(i.value,a):this.trend,this.computedAnimated=D&&this._animated&&(!this.respectMotionPreference||!(null!=p&&p.matches))&&c(this),null==(t=this.plugins)||t.forEach(t=>{var n;return null==(n=t.onUpdate)?void 0:n.call(t,e,i,this)}),this.batched||this.willUpdate(),this._pre.update(n),this._num.update({integer:r,fraction:o}),this._post.update(s),this.batched||this.didUpdate()}else{this._data=e,this.attachShadow({mode:"open"});try{this._internals??(this._internals=this.attachInternals()),this._internals.role="img"}catch{}if("u">typeof CSSStyleSheet&&this.shadowRoot.adoptedStyleSheets)i||(i=new CSSStyleSheet).replaceSync(R),this.shadowRoot.adoptedStyleSheets=[i];else{let e=document.createElement("style");e.textContent=R,this.shadowRoot.appendChild(e)}this._pre=new M(this,n,{justify:"right",part:"left"}),this.shadowRoot.appendChild(this._pre.el),this._num=new K(this,r,o),this.shadowRoot.appendChild(this._num.el),this._post=new M(this,s,{justify:"left",part:"right"}),this.shadowRoot.appendChild(this._post.el),this.created=!0}try{this._internals.ariaLabel=e.valueAsString}catch{}}willUpdate(){this._pre.willUpdate(),this._num.willUpdate(),this._post.willUpdate()}didUpdate(){if(!this.computedAnimated)return;this._abortAnimationsFinish?this._abortAnimationsFinish.abort():this.dispatchEvent(new Event("animationsstart")),this._pre.didUpdate(),this._num.didUpdate(),this._post.didUpdate();let e=new AbortController;Promise.all(this.shadowRoot.getAnimations().map(e=>e.finished)).then(()=>{e.signal.aborted||(this.dispatchEvent(new Event("animationsfinish")),this._abortAnimationsFinish=void 0)}),this._abortAnimationsFinish=e}}I.defaultProps={transformTiming:{duration:900,easing:"linear(0,.005,.019,.039,.066,.096,.129,.165,.202,.24,.278,.316,.354,.39,.426,.461,.494,.526,.557,.586,.614,.64,.665,.689,.711,.731,.751,.769,.786,.802,.817,.831,.844,.856,.867,.877,.887,.896,.904,.912,.919,.925,.931,.937,.942,.947,.951,.955,.959,.962,.965,.968,.971,.973,.976,.978,.98,.981,.983,.984,.986,.987,.988,.989,.99,.991,.992,.992,.993,.994,.994,.995,.995,.996,.996,.9963,.9967,.9969,.9972,.9975,.9977,.9979,.9981,.9982,.9984,.9985,.9987,.9988,.9989,1)"},spinTiming:void 0,opacityTiming:{duration:450,easing:"ease-out"},animated:!0,trend:(e,t)=>Math.sign(t-e),respectMotionPreference:!0,plugins:void 0,digits:void 0};class K{constructor(e,t,n,{className:i,...r}={}){this.flow=e,this._integer=new k(e,t,{justify:"right",part:"integer"}),this._fraction=new k(e,n,{justify:"left",part:"fraction"}),this._inner=s("span",{className:"number__inner"},[this._integer.el,this._fraction.el]),this.el=s("span",{...r,part:"number",className:`number ${i??""}`},[this._inner])}willUpdate(){this._prevWidth=this.el.offsetWidth,this._prevLeft=this.el.getBoundingClientRect().left,this._integer.willUpdate(),this._fraction.willUpdate()}update({integer:e,fraction:t}){this._integer.update(e),this._fraction.update(t)}didUpdate(){let e=this.el.getBoundingClientRect();this._integer.didUpdate(),this._fraction.didUpdate();let t=this._prevLeft-e.left,n=this.el.offsetWidth,i=this._prevWidth-n;this.el.style.setProperty("--width",String(n)),this.el.animate({[m]:[`${t}px`,"0px"],[f]:[i,0]},{...this.flow.transformTiming,composite:"accumulate"})}}class A{constructor(e,t,{justify:n,className:i,...r},o){this.flow=e,this.children=new Map,this.onCharRemove=e=>()=>{this.children.delete(e)},this.justify=n;let a=t.map(e=>this.addChar(e).el);this.el=s("span",{...r,className:`section section--justify-${n} ${i??""}`},o?o(a):a)}addChar(e,{startDigitsAtZero:t=!1,...n}={}){let i="integer"===e.type||"fraction"===e.type?new L(this,e.type,t?0:e.value,e.pos,{...n,onRemove:this.onCharRemove(e.key)}):new x(this,e.type,e.value,{...n,onRemove:this.onCharRemove(e.key)});return this.children.set(e.key,i),i}unpop(e){e.el.removeAttribute("inert"),e.el.style.top="",e.el.style[this.justify]=""}pop(e){e.forEach(e=>{e.el.style.top=`${e.el.offsetTop}px`,e.el.style[this.justify]=`${a(e.el,this.justify)}px`}),e.forEach(e=>{e.el.setAttribute("inert",""),e.present=!1})}addNewAndUpdateExisting(e){let t=new Map,n=new Map,i="left"===this.justify,r=i?"prepend":"append";if(function(e,t,{reverse:n=!1}={}){let i=e.length;for(let r=n?i-1:0;n?r>=0:r<i;n?r--:r++)t(e[r],r)}(e,e=>{let i;this.children.has(e.key)?(i=this.children.get(e.key),n.set(e,i),this.unpop(i),i.present=!0):(i=this.addChar(e,{startDigitsAtZero:!0,animateIn:!0}),t.set(e,i)),this.el[r](i.el)},{reverse:i}),this.flow.computedAnimated){let e=this.el.getBoundingClientRect();t.forEach(t=>{t.willUpdate(e)})}t.forEach((e,t)=>{e.update(t.value)}),n.forEach((e,t)=>{e.update(t.value)})}willUpdate(){let e=this.el.getBoundingClientRect();this._prevOffset=e[this.justify],this.children.forEach(t=>t.willUpdate(e))}didUpdate(){let e=this.el.getBoundingClientRect();this.children.forEach(t=>t.didUpdate(e));let t=e[this.justify],n=this._prevOffset-t;n&&this.children.size&&this.el.animate({transform:[`translateX(${n}px)`,"none"]},{...this.flow.transformTiming,composite:"accumulate"})}}class k extends A{update(e){let t=new Map;this.children.forEach((n,i)=>{e.find(e=>e.key===i)||t.set(i,n),this.unpop(n)}),this.addNewAndUpdateExisting(e),t.forEach(e=>{e instanceof L&&e.update(0)}),this.pop(t)}}class M extends A{update(e){let t=new Map;this.children.forEach((n,i)=>{e.find(e=>e.key===i)||t.set(i,n)}),this.pop(t),this.addNewAndUpdateExisting(e)}}class X{constructor(e,t,{onRemove:n,animateIn:i=!1}={}){this.flow=e,this.el=t,this._present=!0,this._remove=()=>{var e;this.el.remove(),null==(e=this._onRemove)||e.call(this)},this.el.classList.add("animate-presence"),this.flow.computedAnimated&&i&&this.el.animate({[g]:[-.9999,0]},{...this.flow.opacityTiming,composite:"accumulate"}),this._onRemove=n}get present(){return this._present}set present(e){if(this._present!==e){if(this._present=e,e?this.el.removeAttribute("inert"):this.el.setAttribute("inert",""),!this.flow.computedAnimated){e||this._remove();return}this.el.style.setProperty("--_number-flow-d-opacity",e?"0":"-.999"),this.el.animate({[g]:e?[-.9999,0]:[.999,0]},{...this.flow.opacityTiming,composite:"accumulate"}),e?this.flow.removeEventListener("animationsfinish",this._remove):this.flow.addEventListener("animationsfinish",this._remove,{once:!0})}}}class W extends X{constructor(e,t,n,i){super(e.flow,n,i),this.section=e,this.value=t,this.el=n}}class L extends W{constructor(e,t,n,i,r){var o,a;let c=((null==(a=null==(o=e.flow.digits)?void 0:o[i])?void 0:a.max)??9)+1,l=Array.from({length:c}).map((e,t)=>{let i=s("span",{className:"digit__num"},[document.createTextNode(String(t))]);return t!==n&&i.setAttribute("inert",""),i.style.setProperty("--n",String(t)),i}),d=s("span",{part:`digit ${t}-digit`,className:"digit"},l);d.style.setProperty("--current",String(n)),d.style.setProperty("--length",String(c)),super(e,n,d,r),this.pos=i,this._onAnimationsFinish=()=>{this.el.classList.remove("is-spinning")},this._numbers=l,this.length=c}willUpdate(e){let t=this.el.getBoundingClientRect();this._prevValue=this.value;let n=t[this.section.justify]-e[this.section.justify],i=t.width/2;this._prevCenter="left"===this.section.justify?n+i:n-i}update(e){this.el.style.setProperty("--current",String(e)),this._numbers.forEach((t,n)=>n===e?t.removeAttribute("inert"):t.setAttribute("inert","")),this.value=e}didUpdate(e){let t=this.el.getBoundingClientRect(),n=t[this.section.justify]-e[this.section.justify],i=t.width/2,r="left"===this.section.justify?n+i:n-i,o=this._prevCenter-r;o&&this.el.animate({transform:[`translateX(${o}px)`,"none"]},{...this.flow.transformTiming,composite:"accumulate"});let s=this.getDelta();s&&(this.el.classList.add("is-spinning"),this.el.animate({[v]:[-s,0]},{...this.flow.spinTiming??this.flow.transformTiming,composite:"accumulate"}),this.flow.addEventListener("animationsfinish",this._onAnimationsFinish,{once:!0}))}getDelta(){var e;if(this.flow.plugins)for(let t of this.flow.plugins){let n=null==(e=t.getDelta)?void 0:e.call(t,this.value,this._prevValue,this);if(null!=n)return n}let t=this.value-this._prevValue,n=this.flow.computedTrend||Math.sign(t);return n<0&&this.value>this._prevValue?this.value-this.length-this._prevValue:n>0&&this.value<this._prevValue?this.length-this._prevValue+this.value:t}}class x extends W{constructor(e,t,n,i){let r=s("span",{className:"symbol__value",textContent:n});super(e,n,s("span",{part:`symbol ${t}`,className:"symbol"},[r]),i),this.type=t,this._children=new Map,this._onChildRemove=e=>()=>{this._children.delete(e)},this._children.set(n,new X(this.flow,r,{onRemove:this._onChildRemove(n)}))}willUpdate(e){if("decimal"===this.type)return;let t=this.el.getBoundingClientRect();this._prevOffset=t[this.section.justify]-e[this.section.justify]}update(e){if(this.value!==e){let t=this._children.get(this.value);t&&(t.present=!1);let n=this._children.get(e);if(n)n.present=!0;else{let t=s("span",{className:"symbol__value",textContent:e});this.el.appendChild(t),this._children.set(e,new X(this.flow,t,{animateIn:!0,onRemove:this._onChildRemove(e)}))}}this.value=e}didUpdate(e){if("decimal"===this.type)return;let t=this.el.getBoundingClientRect()[this.section.justify]-e[this.section.justify],n=this._prevOffset-t;n&&this.el.animate({transform:[`translateX(${n}px)`,"none"]},{...this.flow.transformTiming,composite:"accumulate"})}}let j=parseInt(null===(r=o.version.match(/^(\d+)\./))||void 0===r?void 0:r[1])>=19;class U extends I{attributeChangedCallback(e,t,n){this[e]=JSON.parse(n)}}U.observedAttributes=j?[]:["data","digits"],((e,t)=>{customElements.get(e)===t||customElements.define(e,t)})("number-flow-react",U);let H={},J=j?e=>e:JSON.stringify;function q(e){let{transformTiming:t,spinTiming:n,opacityTiming:i,animated:r,respectMotionPreference:o,trend:s,plugins:a,...c}=e;return[{transformTiming:t,spinTiming:n,opacityTiming:i,animated:r,respectMotionPreference:o,trend:s,plugins:a},c]}class $ extends o.Component{updateProperties(e){if(!this.el)return;this.el.batched=!this.props.isolate;let[t]=q(this.props);Object.entries(t).forEach(e=>{let[t,n]=e;this.el[t]=null!=n?n:U.defaultProps[t]}),(null==e?void 0:e.onAnimationsStart)&&this.el.removeEventListener("animationsstart",e.onAnimationsStart),this.props.onAnimationsStart&&this.el.addEventListener("animationsstart",this.props.onAnimationsStart),(null==e?void 0:e.onAnimationsFinish)&&this.el.removeEventListener("animationsfinish",e.onAnimationsFinish),this.props.onAnimationsFinish&&this.el.addEventListener("animationsfinish",this.props.onAnimationsFinish)}componentDidMount(){this.updateProperties(),j&&this.el&&(this.el.digits=this.props.digits,this.el.data=this.props.data)}getSnapshotBeforeUpdate(e){if(this.updateProperties(e),e.data!==this.props.data){if(this.props.group)return this.props.group.willUpdate(),()=>{var e;return null===(e=this.props.group)||void 0===e?void 0:e.didUpdate()};if(!this.props.isolate){var t;return null===(t=this.el)||void 0===t||t.willUpdate(),()=>{var e;return null===(e=this.el)||void 0===e?void 0:e.didUpdate()}}}return null}componentDidUpdate(e,t,n){null==n||n()}handleRef(e){this.props.innerRef&&(this.props.innerRef.current=e),this.el=e}render(){let[e,{innerRef:t,className:n,data:i,willChange:r,isolate:s,group:a,digits:c,onAnimationsStart:l,onAnimationsFinish:d,...u}]=q(this.props);return o.createElement("number-flow-react",{ref:this.handleRef,"data-will-change":r?"":void 0,class:n,...u,dangerouslySetInnerHTML:{__html:""},suppressHydrationWarning:!0,digits:J(c),data:J(i)})}constructor(e){super(e),this.handleRef=this.handleRef.bind(this)}}let B=o.forwardRef(function(e,t){let{value:n,locales:i,format:r,prefix:s,suffix:a,...c}=e;o.useImperativeHandle(t,()=>l.current,[]);let l=o.useRef(),d=o.useContext(V);null==d||d.useRegister(l);let u=o.useMemo(()=>i?JSON.stringify(i):"",[i]),h=o.useMemo(()=>r?JSON.stringify(r):"",[r]),p=o.useMemo(()=>{var e,t;return function(e,t,n,i){let r=t.formatToParts(e);n&&r.unshift({type:"prefix",value:n}),i&&r.push({type:"suffix",value:i});let o=[],s=[],a=[],c=[],l={},d=e=>`${e}:${l[e]=(l[e]??-1)+1}`,u="",h=!1,p=!1;for(let e of r){u+=e.value;let t="minusSign"===e.type||"plusSign"===e.type?"sign":e.type;"integer"===t?(h=!0,s.push(...e.value.split("").map(e=>({type:t,value:parseInt(e)})))):"group"===t?s.push({type:t,value:e.value}):"decimal"===t?(p=!0,a.push({type:t,value:e.value,key:d(t)})):"fraction"===t?a.push(...e.value.split("").map(e=>({type:t,value:parseInt(e),key:d(t),pos:-1-l[t]}))):(h||p?c:o).push({type:t,value:e.value,key:d(t)})}let g=[];for(let e=s.length-1;e>=0;e--){let t=s[e];g.unshift("integer"===t.type?{...t,key:d(t.type),pos:l[t.type]}:{...t,key:d(t.type)})}return{pre:o,integer:g,fraction:a,post:c,valueAsString:u,value:"string"==typeof e?parseFloat(e):e}}(n,null!==(t=H[e="".concat(u,":").concat(h)])&&void 0!==t?t:H[e]=new Intl.NumberFormat(i,r),s,a)},[n,u,h,s,a]);return o.createElement($,{...c,group:d,data:p,innerRef:l})}),V=o.createContext(void 0)},54934:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OKXCONNECTOR_STORAGE_PROTOCOL_CACHE=t.OKXCONNECTOR_STORAGE_CIPHER_METHOD=t.OKXCONNECTOR_STORAGE_CRYPTO_CIPHERIV=t.OKXCONNECTOR_STORAGER_CRYPTO_SALT=t.OKXCONNECTOR_STORAGE_CRYPTO_PASSWORD=t.OKXCONNECTOR_TON_KEY=t.OKXCONNECTOR_CRYPTO_SENDER_PK_CACHE=t.OKXCONNECTOR_TOKEN_CACHE=t.OKXCONNECTOR_JWT_KEY=t.OKXCONNECTOR_SESSION_PREFIX_KEY=t.OKXCONNECTOR_CRYPTO_KEY=t.OKXCONNECTOR_CACHE_KEY_DAPP=t.OKXCONNECTOR_CACHE_KEY=void 0,t.OKXCONNECTOR_CACHE_KEY="ck",t.OKXCONNECTOR_CACHE_KEY_DAPP="ck_dapp",t.OKXCONNECTOR_CRYPTO_KEY="cck_k",t.OKXCONNECTOR_SESSION_PREFIX_KEY="cspk_",t.OKXCONNECTOR_JWT_KEY="cjk_k",t.OKXCONNECTOR_TOKEN_CACHE="ct",t.OKXCONNECTOR_CRYPTO_SENDER_PK_CACHE="csp",t.OKXCONNECTOR_TON_KEY="OKXStorage_ctc",t.OKXCONNECTOR_STORAGE_CRYPTO_PASSWORD="scp",t.OKXCONNECTOR_STORAGER_CRYPTO_SALT="scs",t.OKXCONNECTOR_STORAGE_CRYPTO_CIPHERIV="scpc",t.OKXCONNECTOR_STORAGE_CIPHER_METHOD="aes-256-cbc",t.OKXCONNECTOR_STORAGE_PROTOCOL_CACHE="okx_connect_split_cache_key"},55263:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mediaNotTouch=t.mediaTouch=t.maxWidth=void 0,t.isDevice=function(e){var n;let a=(0,o.getWindow)();if(!a)return"desktop"===e;if((0,r.isTmaPlatform)("weba"))return!0;let c=a.innerWidth;switch(e){case"desktop":return c>t.maxWidth.tablet;case"tablet":return c>t.maxWidth.mobile;default:let l=c<=t.maxWidth.mobile||(0,i.isOS)("ios","android","ipad");if(l){let e=!!(null===(n=(0,o.getWindow)())||void 0===n?void 0:n.TelegramWebviewProxy),t=navigator.maxTouchPoints||0;e&&0===t&&(l=!1),(0,s.logDebug)("isDevice mobile isTelegram and maxTouchPoints:",l,e,t)}return l}},t.media=function(e){switch(e){case"mobile":return`@media (max-width: ${t.maxWidth.mobile}px)`;case"tablet":return`@media (max-width: ${t.maxWidth.tablet}px) (min-width: ${t.maxWidth.mobile}px)`;default:return`@media (min-width: ${t.maxWidth.tablet}px)`}},t.mediaMin=function(e){return`@media (min-width: ${e}px)`},t.mediaMax=function(e){return`@media (max-width: ${e}px)`},t.mediaMinMax=function(e,t){return`@media (min-width: ${e}px) and (max-width: ${t}px)`};let i=n(95576),r=n(66776),o=n(80098),s=n(86273);t.maxWidth={mobile:440,tablet:1020},t.mediaTouch="@media (hover: none)",t.mediaNotTouch="@media not all and (hover: none)"},55308:(e,t,n)=>{"use strict";n(66024)},55869:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.IEngine=t.ISignClient=t.ISignClientEvents=t.IEngineEvents=void 0;let r=i(n(22585));class o extends r.default{constructor(){super()}}t.IEngineEvents=o;class s extends r.default{constructor(){super()}}t.ISignClientEvents=s;class a{constructor(e){this.data=e}}t.ISignClient=a;class c{constructor(e){this.client=e}}t.IEngine=c},56332:e=>{var t=/\s/;e.exports=function(e){for(var n=e.length;n--&&t.test(e.charAt(n)););return n}},56962:(e,t,n)=>{"use strict";var i;!function(e){e.Scope="scope",e.SiteAccess="siteAccess",e.Block="block"}(i||(i={}))},57056:(e,t,n)=>{"use strict";n(72916)},57203:(e,t,n)=>{"use strict";var i;!function(e){e.Localstorage="localstorage",e.Cookie="cookie"}(i||(i={}))},57486:(e,t,n)=>{var i=n(69309),r=n(87177);e.exports=function(e,t,n){var o=!0,s=!0;if("function"!=typeof e)throw TypeError("Expected a function");return r(n)&&(o="leading"in n?!!n.leading:o,s="trailing"in n?!!n.trailing:s),i(e,t,{leading:o,maxWait:t,trailing:s})}},58139:(e,t,n)=>{"use strict";n(66024)},58481:(e,t,n)=>{"use strict";n.d(t,{q:()=>a});var i=n(48739),r=n(82564);let o=e=>{window.location.hash=e},s=e=>{window.history.replaceState(window.history.state,"",`${window.location.pathname}${window.location.search}#${e}`)};function a(e,t,n){let a=(null==n?void 0:n.serialize)||JSON.stringify,c=(null==n?void 0:n.deserialize)||(e=>{try{return JSON.parse(e)}catch(e){return t}}),l=(null==n?void 0:n.subscribe)||(e=>(window.addEventListener("hashchange",e),()=>{window.removeEventListener("hashchange",e)})),d="undefined"!=typeof window&&!!window.location,u=(0,i.eU)(d?new URLSearchParams(window.location.hash.slice(1)).get(e):null);u.onMount=t=>{if(!d)return;let n=()=>{t(new URLSearchParams(window.location.hash.slice(1)).get(e))},i=l(n);return n(),i};let h=(0,i.eU)(e=>{let n=e(u);return null===n?t:c(n)});return(0,i.eU)(e=>e(h),(t,i,c,l)=>{var d,p;let g="function"==typeof c?c(t(h)):c,f=new URLSearchParams(window.location.hash.slice(1));if(g===r.Ut)i(u,null),f.delete(e);else{let t=a(g);i(u,t),f.set(e,t)}("replaceState"===(p=null!=(d=null==l?void 0:l.setHash)?d:null==n?void 0:n.setHash)?s:"function"==typeof p?p:o)(f.toString())})}},58762:(e,t,n)=>{"use strict";var i;!function(e){e.Apple="apple",e.Bitbucket="bitbucket",e.Coinbasesocial="coinbasesocial",e.Discord="discord",e.Epicgames="epicgames",e.Facebook="facebook",e.Farcaster="farcaster",e.Github="github",e.Gitlab="gitlab",e.Google="google",e.Instagram="instagram",e.Linkedin="linkedin",e.Microsoft="microsoft",e.Twitch="twitch",e.Twitter="twitter",e.Telegram="telegram",e.Spotify="spotify",e.Tiktok="tiktok",e.Line="line",e.Steam="steam",e.Shopify="shopify"}(i||(i={}))},59033:(e,t,n)=>{"use strict";var i;!function(e){e.Sandbox="sandbox",e.Live="live"}(i||(i={}))},59123:(e,t,n)=>{"use strict";n(66024)},59293:(e,t,n)=>{"use strict";var i;!function(e){e.Totp="totp",e.Passkey="passkey"}(i||(i={}))},59564:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(t,n);(!r||("get"in r?!t.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,r)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.NAMES_CHAINS=t.TON_CHAINS=t.COSMOS_CHAINS=t.APTOS_CHAINS=t.SUI_CHAINS=t.SOLANA_CHAINS=t.BTC_CHAINS=t.downloadUrl=t.okxDeeplink=t.tonConnectSdkVersion=t.standardDeeplink=t.standardUniversalLink=t.NameSpaceKeyStarknet=t.NameSpaceKeyTron=t.NameSpaceKeyCosmos=t.NameSpaceKeyAptos=t.NameSpaceKeyBtc=t.NameSpaceKeySui=t.NameSpaceKeyTON=t.NameSpaceKeySOL=t.NameSpaceKeyEip155=void 0,r(n(64617),t);var o=n(12240);Object.defineProperty(t,"NameSpaceKeyEip155",{enumerable:!0,get:function(){return o.NameSpaceKeyEip155}}),Object.defineProperty(t,"NameSpaceKeySOL",{enumerable:!0,get:function(){return o.NameSpaceKeySOL}}),Object.defineProperty(t,"NameSpaceKeyTON",{enumerable:!0,get:function(){return o.NameSpaceKeyTON}}),Object.defineProperty(t,"NameSpaceKeySui",{enumerable:!0,get:function(){return o.NameSpaceKeySui}}),Object.defineProperty(t,"NameSpaceKeyBtc",{enumerable:!0,get:function(){return o.NameSpaceKeyBtc}}),Object.defineProperty(t,"NameSpaceKeyAptos",{enumerable:!0,get:function(){return o.NameSpaceKeyAptos}}),Object.defineProperty(t,"NameSpaceKeyCosmos",{enumerable:!0,get:function(){return o.NameSpaceKeyCosmos}}),Object.defineProperty(t,"NameSpaceKeyTron",{enumerable:!0,get:function(){return o.NameSpaceKeyTron}}),Object.defineProperty(t,"NameSpaceKeyStarknet",{enumerable:!0,get:function(){return o.NameSpaceKeyStarknet}});var s=n(33026);Object.defineProperty(t,"standardUniversalLink",{enumerable:!0,get:function(){return s.standardUniversalLink}}),Object.defineProperty(t,"standardDeeplink",{enumerable:!0,get:function(){return s.standardDeeplink}}),Object.defineProperty(t,"tonConnectSdkVersion",{enumerable:!0,get:function(){return s.tonConnectSdkVersion}}),Object.defineProperty(t,"okxDeeplink",{enumerable:!0,get:function(){return s.okxDeeplink}}),Object.defineProperty(t,"downloadUrl",{enumerable:!0,get:function(){return s.downloadUrl}}),r(n(72565),t);var a=n(88558);Object.defineProperty(t,"BTC_CHAINS",{enumerable:!0,get:function(){return a.BTC_CHAINS}}),Object.defineProperty(t,"SOLANA_CHAINS",{enumerable:!0,get:function(){return a.SOLANA_CHAINS}}),Object.defineProperty(t,"SUI_CHAINS",{enumerable:!0,get:function(){return a.SUI_CHAINS}}),Object.defineProperty(t,"APTOS_CHAINS",{enumerable:!0,get:function(){return a.APTOS_CHAINS}}),Object.defineProperty(t,"COSMOS_CHAINS",{enumerable:!0,get:function(){return a.COSMOS_CHAINS}}),Object.defineProperty(t,"TON_CHAINS",{enumerable:!0,get:function(){return a.TON_CHAINS}}),Object.defineProperty(t,"NAMES_CHAINS",{enumerable:!0,get:function(){return a.NAMES_CHAINS}})},59806:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((i=i.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.OKXCosmosProvider=void 0;let r=n(86745);class o{constructor(e){this.provider=e}getAccount(e){var t,n,i,o,s,a;(0,r.logDebug)("OKXCosmosProvider getAccount chainId:",e),(0,r.logDebug)("OKXCosmosProvider getAccount namespaces:",JSON.stringify(null===(t=this.provider.session)||void 0===t?void 0:t.namespaces));let c=null===(i=null===(n=this.provider.session)||void 0===n?void 0:n.namespaces[r.NameSpaceKeyCosmos])||void 0===i?void 0:i.accounts.filter(function(t){return t.startsWith(e)})[0];if((0,r.logDebug)("OKXCosmosProvider getAccount account:",JSON.stringify(c)),!c)return;let l=c.split(":"),d=c.split(":")[2];(0,r.logDebug)("OKXCosmosProvider getAccount address:",d);let u=null===(a=null===(s=null===(o=this.provider.session)||void 0===o?void 0:o.namespaces[r.NameSpaceKeyCosmos])||void 0===s?void 0:s.extra)||void 0===a?void 0:a[`${l[0]}:${l[1]}`],h="";if(void 0!=u&&console.log("aptos_publicKey",h=u.publicKey),d)return{algo:"secp256k1",address:d,bech32Address:d,pubKey:this.hexToUint8Array(h)}}signArbitrary(e,t,n){return i(this,void 0,void 0,function*(){let i=window.btoa(n),r={chainId:e,method:"cosmos_signArbitrary",params:{signer:t,chain_id:e.split(":")[1],data:{chain_id:"",account_number:"0",sequence:"0",fee:{gas:"0",amount:[]},msgs:[{type:"sign/MsgSignData",value:{signer:t,data:i}}],memo:""}}};try{let t=yield this.provider.request(r,e);if(!("result"in t))return t.error;if("string"==typeof t.result)return JSON.parse(t.result);return t.result}catch(e){return e}})}signAmino(e,t,n,r){return i(this,void 0,void 0,function*(){if("sign/MsgSignData"==n.msgs[0].type){let i={chainId:e,method:"cosmos_signArbitrary",params:{signer:t,chain_id:e.split(":")[1],data:n}};try{let t=yield this.provider.request(i,e);if("result"in t)return t.result;return t.error}catch(e){return e}}else{let i={chainId:e,method:"cosmos_signAmino",params:{signer:t,chainId:e.split(":")[1],sign_doc:n,signOptions:r}};try{let t=yield this.provider.request(i,e);if(!("result"in t))return t.error;{let e=JSON.parse(t.result);return console.log("signdoc",n,e.signDoc),n.fee=e.signDoc.fee,{signed:n,signature:e.signature}}}catch(e){return e}}})}signDirect(e,t,n,r){return i(this,void 0,void 0,function*(){let i={bodyBytes:this.bufferToHex(n.bodyBytes),authInfoBytes:this.bufferToHex(n.authInfoBytes),chainId:n.chainId,accountNumber:n.accountNumber?n.accountNumber.toString():null,signOptions:r||null},o={chainId:e,method:"cosmos_signDirect",params:{signer:t,chainId:e.split(":")[1],sign_doc:i}};try{let t=yield this.provider.request(o,e);if("result"in t){let e=JSON.parse(t.result);return console.log("signdirect result",e),n.authInfoBytes=this.messageToBuffer(e.signDoc.authInfoBytes),{signed:n,signature:e.signature}}}catch(e){return e}})}messageToBuffer(e){var t=Uint8Array.from([]);try{t="string"==typeof e?this.hexToUint8Array(e.replace("0x","")):Uint8Array.from(e)}catch(e){console.log(`messageToBuffer error: ${e}`)}return t}bufferToHex(e){return"0x"+[...new Uint8Array(e)].map(e=>e.toString(16).padStart(2,"0")).join("")}hexToUint8Array(e){if(e.length%2!=0)throw"Invalid hexString";for(var t=new Uint8Array(e.length/2),n=0;n<e.length;n+=2){var i=parseInt(e.substr(n,2),16);if(isNaN(i))throw"Invalid hexString";t[n/2]=i}return t}}t.OKXCosmosProvider=o},60047:(e,t,n)=>{"use strict";n(95572)},61116:(e,t,n)=>{"use strict";n(66024),n(39979)},61284:(e,t,n)=>{"use strict";n(66024),n(51227)},61316:(e,t,n)=>{"use strict";var i;!function(e){e.Text="text",e.Checkbox="checkbox",e.Select="select"}(i||(i={}))},61377:(e,t,n)=>{"use strict";n(66024),n(97607),n(12861),n(67613)},61679:(e,t,n)=>{"use strict";n(66024)},61946:(e,t,n)=>{"use strict";var i;!function(e){e.EmailAlreadyExists="email_already_exists",e.AllowlistAlreadyExists="allowlist_already_exists",e.AllowlistEntryAlreadyExists="allowlist_entry_already_exists",e.ReassignWalletError="reassign_wallet_error",e.ReassignWalletConfirm="reassign_wallet_confirm",e.MembersCannotDeleteThemself="members_cannot_delete_themself",e.UsernameAlreadyExists="username_already_exists",e.WrongEmailVerificationToken="wrong_email_verification_token",e.WrongSmsVerificationToken="wrong_sms_verification_token",e.InvalidEmailVerification="invalid_email_verification",e.InvalidSmsVerification="invalid_sms_verification",e.InvalidVerification="invalid_verification",e.InvalidPosition="invalid_position",e.TooManySmsVerificationAttempts="too_many_sms_verification_attempts",e.TooManyEmailVerificationAttempts="too_many_email_verification_attempts",e.TooManyVerificationAttempts="too_many_verification_attempts",e.OrganizationNameAlreadyExists="organization_name_already_exists",e.ProjectNameAlreadyExists="project_name_already_exists",e.WalletNotDeployed="wallet_not_deployed",e.EmailVerificationRequired="email_verification_required",e.PhoneVerificationRequired="phone_verification_required",e.InviteAddressRequired="invite_address_required",e.ProviderNotAvailable="provider_not_available",e.ForbiddenUnlinkRequest="forbidden_unlink_request",e.InvalidUnlinkRequest="invalid_unlink_request",e.TooManyApiTokens="too_many_api_tokens",e.LockTimeout="lock_timeout",e.LockTooManyAttempts="lock_too_many_attempts",e.NftTokenGatingNotSupportedForChain="nft_token_gating_not_supported_for_chain",e.EmptyChainName="empty_chain_name",e.NoEnabledEmailProvider="no_enabled_email_provider",e.NoEnabledSmsProvider="no_enabled_sms_provider",e.InvalidKeyExportUrl="invalid_key_export_url",e.InvalidDynamicProps="invalid_dynamic_props",e.TooManyRequests="too_many_requests",e.TooManyOrganizationsForUser="too_many_organizations_for_user",e.TooManyProjectsForOrganization="too_many_projects_for_organization",e.EmailAssociatedWithDifferentProvider="email_associated_with_different_provider",e.UserHasAlreadyAccountWithEmail="user_has_already_account_with_email",e.UserHasAlreadyAccountWithPhoneNumber="user_has_already_account_with_phone_number",e.OtherVerifyFailure="other_verify_failure",e.EmailTiedToEmbeddedWallet="email_tied_to_embedded_wallet",e.InvalidInvite="invalid_invite",e.SocialAccountAlreadyExists="social_account_already_exists",e.InvalidEmailAddress="invalid_email_address",e.InvalidGate="invalid_gate",e.ConflictingEmbeddedWalletProviders="conflicting_embedded_wallet_providers",e.InvalidUser="invalid_user",e.InvalidCorsOrigins="invalid_cors_origins",e.InvalidMobileDeeplinkUrls="invalid_mobile_deeplink_urls",e.UnauthorizedMobileDeeplinkUrl="unauthorized_mobile_deeplink_url",e.InvalidPrivateKeyFormat="invalid_private_key_format",e.InvalidEmbeddedWalletSettings="invalid_embedded_wallet_settings",e.WalletNotSupportPasskey="wallet_not_support_passkey",e.RecoveryEmailUnavailableOrInvalid="recovery_email_unavailable_or_invalid",e.ConnectError="connect_error",e.InvalidWalletName="invalid_wallet_name",e.InvalidWalletAddress="invalid_wallet_address",e.EmailRecoveryDisabled="email_recovery_disabled",e.NoCompatibleWalletServiceEnabled="no_compatible_wallet_service_enabled",e.MissingAaProjectId="missing_aa_project_id",e.LinkedEmbeddedWallet="linked_embedded_wallet",e.InvalidMpcEnvironment="invalid_mpc_environment",e.InvalidRegex="invalid_regex",e.RepeatedOptions="repeated_options",e.MissingPhoneNumberOrEmail="missing_phone_number_or_email",e.DuplicateExists="duplicate_exists",e.MfaDeviceNotFound="mfa_device_not_found",e.MfaInvalidCode="mfa_invalid_code",e.MfaInvalidRequest="mfa_invalid_request",e.InvalidPhone="invalid_phone",e.GateExists="gate_exists",e.InvalidEmbeddedWalletChainsConfiguration="invalid_embedded_wallet_chains_configuration",e.MergeAccountsConfirmation="merge_accounts_confirmation",e.MergeAccountsInvalid="merge_accounts_invalid",e.InvalidWalletId="invalid_wallet_id",e.UnableToFetchBalances="unable_to_fetch_balances",e.CannotSwitchToUnique="cannot_switch_to_unique",e.CustomFieldDataNotUnique="custom_field_data_not_unique",e.MetadataSizeExceeded="metadata_size_exceeded",e.InvalidCustomHostname="invalid_custom_hostname",e.BlockedUserCannotTransferWallet="blocked_user_cannot_transfer_wallet",e.FeatureNotEnabledInSuborg="feature_not_enabled_in_suborg",e.InvalidUsername="invalid_username",e.InvalidExternalAuth="invalid_external_auth",e.InvalidChainAddressMatch="invalid_chain_address_match",e.InvalidUpdate="invalid_update",e.CannotDeleteLastProject="cannot_delete_last_project",e.NoHdWalletFound="no_hd_wallet_found",e.WalletAccountExistsForChain="wallet_account_exists_for_chain",e.TooManyEmbeddedWalletsForUser="too_many_embedded_wallets_for_user",e.TooManyEmbeddedWalletsPerChainForUser="too_many_embedded_wallets_per_chain_for_user",e.InvalidSessionPublicKey="invalid_session_public_key",e.CustomFieldNotUnique="custom_field_not_unique",e.InvalidAaProjectConfiguration="invalid_aa_project_configuration",e.NoV1EmbeddedWalletFound="no_v1_embedded_wallet_found",e.EmbeddedWalletAddressAlreadyLinked="embedded_wallet_address_already_linked",e.KeyShareAlreadyBackedUp="key_share_already_backed_up",e.InvalidKeySharesLength="invalid_key_shares_length"}(i||(i={}))},62141:(e,t,n)=>{"use strict";var i;!function(e){e.Pending="pending",e.Completed="completed"}(i||(i={}))},62446:(e,t,n)=>{var i=n(56332),r=/^\s+/;e.exports=function(e){return e?e.slice(0,i(e)+1).replace(r,""):e}},62506:(e,t,n)=>{"use strict";var i;!function(e){e.Yesterday="yesterday",e.NextTwoWeeks="nextTwoWeeks",e.NextTwoMonths="nextTwoMonths",e.JustBrowsing="justBrowsing"}(i||(i={}))},62548:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((i=i.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.SuiProvider=void 0;let r=n(59564),o=n(83819),s=n(55263),a=n(15423);class c{constructor(){this.accountChangedHandler=null}connectReady(){return!0}getSuiPublicKey(){return i(this,void 0,void 0,function*(){return(yield this.connect()).accounts[0].publicKey})}parseConnectResponse(e,t,n,s,c,l){return i(this,void 0,void 0,function*(){try{let e=[];s.forEach(t=>{t.namespace===r.NameSpaceKeySui&&e.push(...t.chains)});let t=[],n={};if(0==e.length)return;let i=yield this.getSuiPublicKey();if(e.forEach(e=>{var r;(0,o.getChainId)(e);let s=c.address.find(t=>784===t.coinType||t.namespaceChainId===e);s&&(t.push(e+":"+s.address),n[e]={publicKey:null!==(r=s.publicKey)&&void 0!==r?r:i})}),t&&t.length>0)return{namespace:r.NameSpaceKeySui,addresses:t,methods:[...a.SuiMethods],extra:n};return}catch(e){throw e}})}restoreConnect(){return(0,s.isDevice)("mobile")?this.connect():Promise.resolve()}getSuiWallet(){return window.okxwallet.sui}send(e){return i(this,void 0,void 0,function*(){try{let t;yield this.restoreConnect(),(0,o.logDebug)("suiProvider send request:",JSON.stringify(e));let n=e.method;if(e.injectParams&&this.getSuiWallet()){let i=e.injectParams;switch(n){case"sui_signTransactionBlock":let r=yield this.getSuiWallet().features["sui:signTransactionBlock"].signTransactionBlock(i);t={method:"sui_signTransactionBlock",result:r.signature};break;case"sui_signAndExecuteTransactionBlock":let o=yield this.getSuiWallet().features["sui:signAndExecuteTransactionBlock"].signAndExecuteTransactionBlock(i);t={method:"sui_signAndExecuteTransactionBlock",result:o.digest};break;case"sui_signMessage":let s=yield this.getSuiWallet().features["sui:signMessage"].signMessage(i);t={method:"sui_signMessage",result:s.signature};break;case"sui_signPersonalMessage":let a=yield this.getSuiWallet().features["sui:signPersonalMessage"].signPersonalMessage(i);t={method:"sui_signPersonalMessage",result:a.signature}}}return t}catch(e){throw(0,o.logDebug)("suiProvider send error:",e),e}})}connect(){return i(this,void 0,void 0,function*(){var e;return null===(e=this.getSuiWallet())||void 0===e?void 0:e.features["standard:connect"].connect()})}singleConnect(){return this.connect()}addListener(e){console.log("window.okxwallet configEventWithKey:","sui"),this.accountChangedHandler=t=>{console.log("window.okxwallet configEventWithKey_sui:",Date.now(),"sui",t),t&&e()},window.okxwallet.sui.on("accountChanged",this.accountChangedHandler)}removeListener(){this.accountChangedHandler&&window.okxwallet.sui.removeListener("accountChanged",this.accountChangedHandler)}}t.SuiProvider=c},62623:(e,t,n)=>{"use strict";n(66024),n(53421),n(67219)},63065:function(e,t,n){"use strict";var i,r=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(t,n);(!r||("get"in r?!t.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,r)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||(i=function(e){return(i=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t})(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=i(e),s=0;s<n.length;s++)"default"!==n[s]&&r(t,e,n[s]);return o(t,e),t}),a=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((i=i.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.OKXWalletConnector=void 0;let c=n(32945),l=n(54934),d=n(21309),u=n(83819),h=n(34554),p=n(22585),g=s(n(86273)),f=n(59564),m=n(19207),v=(0,h.resolveWebSocketImplementation)();class O{constructor(e){if(this.events=new p.EventEmitter,this.state=c.ConnectorState.InitState,this.selectedUrlIndex=0,this.retryCount=0,this.timeOutLimit=8e3,!(0,h.checkWSUrl)(e))throw Error(`CONNECTOR: invalid url ${e}`);this.url=e,this.heartbeatTimer=null,this.connectionTimeoutTimer=null,this.connectURLStorage=new d.Storage(l.OKXCONNECTOR_CACHE_KEY+l.OKXCONNECTOR_CACHE_KEY)}get connecting(){return this.state==c.ConnectorState.Connecting}onPayload(e){if(void 0!==e.data){if(g.logDebug("get received data"),g.logDebug(e),"string"==typeof e.data&&"pong"===e.data){g.logDebug(`CONNECT: receive pong ${Date.now().toString()}`);return}this.events.emit("payload",e.data)}}onClose(e){var t;g.logDebug("socket get closed: ",null===(t=this.socket)||void 0===t?void 0:t.url,e.code),this.socket=void 0,this.events.emit("close",e)}onError(e,t){let n={id:e,msg:t.toString()};this.events.emit("payload",n)}onopen(e){e.onmessage=e=>this.onPayload(e),e.onclose=e=>this.onClose(e),this.socket=e,this.state=c.ConnectorState.Connected,this.events.emit("open")}emitError(e){this.events.emit("fail",e)}heartbeat(){return a(this,void 0,void 0,function*(){if(this.heartbeatTimer&&clearTimeout(this.heartbeatTimer),this.state!=c.ConnectorState.Connected&&this.state!=c.ConnectorState.OnError){g.logDebug("heart beat close");return}if(!this.socket){if(g.logDebug("socket not exist"),this.state==c.ConnectorState.Connected||this.state==c.ConnectorState.OnError){g.logDebug("socket reconnect by heartbeat");try{yield this.tryRegistOpen()}catch(e){g.logError("regist open failed"),this.heartbeatTimer=setTimeout(this.heartbeat.bind(this),5e3)}}return}if(this.socket.readyState!==WebSocket.OPEN){if(g.logDebug("socket not ready"),this.state==c.ConnectorState.Connected||this.state==c.ConnectorState.OnError){g.logDebug("socket reconnect by heartbeat with state",this.state,this.socket.readyState);try{yield this.tryRegistOpen()}catch(e){g.logError("regist open failed"),this.heartbeatTimer=setTimeout(this.heartbeat.bind(this),5e3)}}return}g.logDebug(`send ping heart beat: ${Date.now().toString()}, ${this.socket}`),this.socket.send("ping"),this.heartbeatTimer=setTimeout(this.heartbeat.bind(this),5e3)})}registOpen(e=this.url,t=!1){if(!(0,h.checkWSUrl)(e))throw Error(`CONNECTOR: invalid url ${e}`);return this.url=e,t||g.logDebug("Connection connect:",this.url,new Date().toUTCString()),this.state=c.ConnectorState.Connecting,new URLSearchParams(e).get("origin"),new Promise((t,n)=>{let i=new v(e,[]);g.logDebug("Connection connect Begin:",this.url,new Date().toUTCString()),this.startTimeOutTimer(i),(0,h.hasBuiltInWebSocket)()?(g.logDebug("Add socket error handler"),i.onerror=()=>{n(Error("socket error")),i.close()}):(g.logDebug("Add socket error handler"),i.on("error",()=>{n(Error("socket error")),i.close()})),i.onopen=()=>{g.logDebug("socket opened"),this.resetTimeOutTimer(c.OKXCONNECTOR_WS_URL_PENDING_CLOSE_CODE.FINISHED),this.onopen(i),this.heartbeat(),t(i)}})}checkMaxRetry(){return g.logDebug("current retry count:",this.retryCount,"of",c.OKXCONNECTOR_WS_URL_LIST.length),this.retryCount>3*c.OKXCONNECTOR_WS_URL_LIST.length}connectionTryNext(){return a(this,void 0,void 0,function*(){if(this.checkMaxRetry())g.logDebug("Max Connection retry ",this.retryCount,new Date().toUTCString());else{this.retryCount+=1;let e=this.getNextSelectUrl();return g.logDebug("Connection retry:",e,new Date().toUTCString()),this.registOpen(e,!0)}})}startTimeOutTimer(e){this.connectionTimeoutTimer&&this.resetTimeOutTimer(c.OKXCONNECTOR_WS_URL_PENDING_CLOSE_CODE.CANCELED),this.pendingSocket=e,this.connectionTimeoutTimer=setTimeout(()=>{this.pendingSocket&&this.resetTimeOutTimer(c.OKXCONNECTOR_WS_URL_PENDING_CLOSE_CODE.TIME_OUT)},this.timeOutLimit)}resetTimeOutTimer(e){var t;if(e==c.OKXCONNECTOR_WS_URL_PENDING_CLOSE_CODE.TIME_OUT)throw clearTimeout(this.connectionTimeoutTimer),null===(t=this.pendingSocket)||void 0===t||t.close(),this.pendingSocket=void 0,g.reportEvent(m.OKXReportType.LOG,"timeout",this.retryCount.toString()),Error("socket timeout");this.pendingSocket=void 0,clearTimeout(this.connectionTimeoutTimer)}cacheSuccessUrlSelect(){this.connectURLStorage.saveContent(this.selectedUrlIndex.toString(),l.OKXCONNECTOR_CACHE_KEY)}getNextSelectUrl(){return this.selectedUrlIndex+=1,this.selectedUrlIndex=this.selectedUrlIndex%c.OKXCONNECTOR_WS_URL_LIST.length,c.OKXCONNECTOR_WS_URL_LIST[this.selectedUrlIndex]}onVisibleChanged(){return a(this,void 0,void 0,function*(){if("visible"===document.visibilityState&&(g.logDebug(`get changed ${this.state}, ${this.socket}`),this.state==c.ConnectorState.Connected&&void 0===this.socket)){g.logDebug("CONNECTION need reopen");try{yield this.tryRegistOpen()}catch(e){g.logError("regist open failed")}return}})}tryRegistOpen(){return a(this,arguments,void 0,function*(e=this.url){if(this.connecting)return g.logDebug("tryRegistOpen => connecting state"),new Promise((e,t)=>{this.events.once("fail",e=>(g.logDebug("tryRegistOpen => connecting fail listener",e),t(e))),this.events.once("open",()=>void 0===this.socket?t(Error("Connect lost")):e(this.socket))});g.logDebug("tryRegistOpen => try registOpen until retry limit is hit");let t=!1;for(;!this.checkMaxRetry()&&!this.socket;)try{g.logDebug("tryRegistOpen => call registOpen, try count:",this.retryCount,t),yield this.registOpen(e,t)}catch(n){g.logDebug("tryRegistOpen => registOpen failed",n),this.retryCount+=1,e=this.getNextSelectUrl(),t=!0}if(g.logDebug("tryRegistOpen => exit while loop",this.retryCount,this.socket),!this.socket&&this.checkMaxRetry())throw g.logDebug("tryRegistOpen => failed to open a socket",this.retryCount,this.socket),this.retryCount=0,this.state=c.ConnectorState.OnError,this.emitError(Error("tryRegistOpen failed")),new f.OKXConnectError(f.OKX_CONNECT_ERROR_CODES.CONNECTION_ERROR,"Failed to connect")})}connect(){return a(this,void 0,void 0,function*(){try{yield this.tryRegistOpen(),document.removeEventListener("visibilitychange",this.onVisibleChanged.bind(this)),document.addEventListener("visibilitychange",this.onVisibleChanged.bind(this))}catch(e){throw g.logDebug("connect => failed to connect",e),e}})}disconnect(){return a(this,void 0,void 0,function*(){return this.state=c.ConnectorState.Disconnected,new Promise((e,t)=>{if(void 0===this.socket){e();return}this.socket.onclose=t=>{this.onClose(t),e()},this.socket.close(),this.heartbeatTimer&&clearTimeout(this.heartbeatTimer)})})}currentStatus(){return{state:this.state,url:this.url}}addListener(e,t,n,i,r){this.listenPayloadHandler&&this.events.removeListener("payload",this.listenPayloadHandler),this.listenPayloadHandler=o=>a(this,void 0,void 0,function*(){var s;g.logDebug(`<<< get payload ${o}`);let a=(0,u.safeJsonParse)(o);if(a.params&&a.params.data){let o=null===(s=a.params.data)||void 0===s?void 0:s.message,c=!1;if(o&&r){let e=yield r(a.params.data);c=e.isSplitPackage&&!e.finalMessage,e.isSplitPackage&&(e.finalMessage&&e.finalMessage.length>0?(g.logDebug("CONNECT: update raw msg content"),o=e.finalMessage):(g.logDebug("CONNECT: skip raw msg content"),c=!0))}if(!c)try{let r=t(o);void 0===r?(g.logDebug("CONNECT: decrypt undefined"),i(e,"Decrypt undefined")):n(e,r)}catch(t){g.logDebug(`CONNECT: decrypt failed: ${t}`),i(e,t.message)}}}),this.events.on("payload",this.listenPayloadHandler),this.failHandler&&this.events.removeListener("fail",this.failHandler),this.failHandler=t=>{t?(g.logDebug(`CONNECT failed: ${t}`),i(e,t.message)):i(e,"Unkonow error")},this.events.on("fail",this.failHandler)}addPackageParse(e){this.payloadHandler&&this.events.removeListener("payload",this.payloadHandler),this.payloadHandler=t=>a(this,void 0,void 0,function*(){g.logDebug(`CONNECTION @[${new Date().toUTCString()}] <<<< received e:${t}`);let n=(0,u.safeJsonParse)(t);yield e(n)}),this.events.on("payload",this.payloadHandler)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}send(e,t){return a(this,void 0,void 0,function*(){try{void 0===this.socket&&(g.logDebug(`>>> send payload undefined ${t}`),yield e()),g.logDebug(`CONNECTION @[${new Date().toUTCString()}]>>> send payload ${(0,u.safeJsonStringify)(t)}`),this.socket&&this.socket.send((0,u.safeJsonStringify)(t))}catch(e){this.onError(t.id,e)}})}getMsgPayloadFromHistory(e){return a(this,void 0,void 0,function*(){if(void 0===e)return;let t=(0,u.safeJsonStringify)(e);g.logDebug("get received data from history"),g.logDebug(t),t=(0,u.safeJsonStringify)({params:{data:e}}),this.events.emit("payload",t)})}onOpen(e){this.openHandler&&this.events.removeListener("open",this.openHandler),this.openHandler=()=>a(this,void 0,void 0,function*(){g.logDebug(`CONNECTION @[${new Date().toUTCString()}] >>> ws opened: `),yield e()}),this.events.on("open",this.openHandler),this.cacheSuccessUrlSelect()}}t.OKXWalletConnector=O},63813:(e,t,n)=>{"use strict";n(66024)},64557:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((i=i.apply(e,t||[])).next())})},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.connectSupportMethods=void 0,t.creatNotSupportMethodItemReplay=function(e){let t=new o.OKXConnectError(o.OKX_CONNECT_ERROR_CODES.METHOD_NOT_SUPPORTED);return{method:e.method,chainId:e.chainId,error:{code:t.code,message:t.message}}},t.connectMethodsAdaptOldVersion=function(e,t){return i(this,void 0,void 0,function*(){var n,i,r,c,l;try{(0,o.logDebug)("connectMethodsAdaptOldVersion start params :",JSON.stringify(e));let u={};if("solana_signMessage"===e.method){let r=null===(n=t.namespaces[o.NameSpaceKeySOL])||void 0===n?void 0:n.accounts.filter(function(t){return t.startsWith(e.chainId)})[0],c=(0,a.fromAccountToAddress)(r);if(e.params&&c&&"message"in e.params){let n=e.params.message;if((null===(i=t.wallet)||void 0===i?void 0:i.appName)=="OKX Wallet"){let e=new TextEncoder().encode(n);n=s.default.encode(e)}return e.params={message:n,pubkey:c},e.injectParams=e.params,u={publicKey:c},(0,o.logDebug)("solana_signMessage account and address:",JSON.stringify(r),c),(0,o.logDebug)("solana_signMessage callBackParams:",JSON.stringify(u)),u}throw new o.OKXConnectError(o.OKX_CONNECT_ERROR_CODES.METHOD_NOT_SUPPORTED)}if("sui_signMessage"===e.method||"sui_signPersonalMessage"===e.method){if("message"in e.params&&e.params.message){let t=JSON.parse(JSON.stringify(e.params.message)),n=Object.values(t),i=new Uint8Array(n),r=new TextDecoder("utf8"),s=btoa(r.decode(i));return e.params={message:atob(s)},e.injectParams={message:i},console.log("sui_signMessag suiMessagee suiMessageb64:>>>>",JSON.stringify(e.params),s),"sui_signMessage"===e.method?u={messageBytes:s,signature:""}:"sui_signPersonalMessage"===e.method&&(u={bytes:s,signature:""}),(0,o.logDebug)("sui_signMessage/sui_signPersonalMessage callBackParams:",JSON.stringify(u)),u}throw new o.OKXConnectError(o.OKX_CONNECT_ERROR_CODES.METHOD_NOT_SUPPORTED)}if("btc_signMessage"===e.method){let n=(null===(r=t.namespaces[o.NameSpaceKeyBtc])||void 0===r?void 0:r.accounts.filter(function(t){return t.startsWith(e.chainId)}))[0],i=(0,a.fromAccountToAddress)(n);if((0,o.logDebug)("btc_signMessage account and address:",JSON.stringify(n),i),i){if("message"in e.params&&e.params.message&&"string"==typeof e.params.message)e.params={from:i,signStr:e.params.message};else throw new o.OKXConnectError(o.OKX_CONNECT_ERROR_CODES.METHOD_NOT_SUPPORTED);return e.params.from=i,(0,o.logDebug)("btc_signMessage callBackParams:",JSON.stringify(u)),u}throw new o.OKXConnectError(o.OKX_CONNECT_ERROR_CODES.METHOD_NOT_SUPPORTED)}else if("aptos_signMessage"===e.method){let n=e.params,i=null===(c=t.namespaces[o.NameSpaceKeyAptos])||void 0===c?void 0:c.accounts.filter(function(t){return t.startsWith(e.chainId)})[0],r=(0,a.fromAccountToAddress)(i);if(n&&r){let t="APTOS",i="",s="";var d=t;let a=window.location.protocol+"//"+window.location.hostname;"address"in n&&n.address&&(d+="\naddress: "+r),"application"in n&&n.application&&(d+="\napplication: "+a);let c=1;"chainId"in n&&n.chainId&&("aptos:mainnet"==n.chainId?c=1:"movement:testnet"==n.chainId&&(c=2),d+="\nchainId: "+c),"message"in n&&(d+="\nmessage: "+n.message,i=n.message),"nonce"in n&&(d+="\nnonce: "+n.nonce,s=n.nonce);let l=new TextEncoder().encode(d);return e.params={message:Array.from(l).map(e=>e.toString(16).padStart(2,"0")).join("")},e.injectParams=n,(0,o.logDebug)("aptos_signMessage requestParams:",JSON.stringify(e)),u={address:r,application:a,chainId:c,fullMessage:d,message:i,nonce:s,prefix:t,signature:""},(0,o.logDebug)("aptos_signMessage callBackParams:",JSON.stringify(u)),u}throw new o.OKXConnectError(o.OKX_CONNECT_ERROR_CODES.METHOD_NOT_SUPPORTED)}else if("cosmos_signArbitrary"===e.method){let n=null===(l=null==t?void 0:t.namespaces[o.NameSpaceKeyCosmos])||void 0===l?void 0:l.accounts.filter(function(t){return t.startsWith(e.chainId)})[0],i=(0,a.fromAccountToAddress)(n),r=e.params.message,s=btoa(r);if((0,o.logDebug)("cosmos_signArbitrary account and address:",JSON.stringify(n),i),(0,o.logDebug)("cosmos_signArbitrary cosmosBase64Encoded:",s),r&&i)return e.params={signer:i,chain_id:e.chainId.split(":")[1],data:{chain_id:"",account_number:"0",sequence:"0",fee:{gas:"0",amount:[]},msgs:[{type:"sign/MsgSignData",value:{signer:i,data:s}}],memo:""}},(0,o.logDebug)("cosmos_signArbitrary callBackParams:",JSON.stringify(u)),u;throw new o.OKXConnectError(o.OKX_CONNECT_ERROR_CODES.METHOD_NOT_SUPPORTED)}(0,o.logDebug)("sol_handleSignatureData end params:",JSON.stringify(e))}catch(e){throw e}})},t.connectMethodsResponseUpdate=function(e,t){return i(this,void 0,void 0,function*(){var n;try{if(e.signResponse){for(let i of((0,o.logDebug)("connectMethodsResponseUpdate signResponse:",JSON.stringify(e.signResponse)),(0,o.logDebug)("connectMethodsResponseUpdate session.namespaces:",JSON.stringify(e.namespaces)),e.signResponse))if((0,o.logDebug)("connectMethodsResponseUpdate methodItem:",JSON.stringify(i)),"result"in i){if("solana_signMessage"===i.method){let t=i.result;(0,o.logDebug)("solana_signMessage methodItem.chainId:",i.chainId);let r=null===(n=e.namespaces[o.NameSpaceKeySOL])||void 0===n?void 0:n.accounts.filter(function(e){return(0,o.logDebug)("solana_signMessage account:",e),e.startsWith(i.chainId)})[0];(0,o.logDebug)("solana_signMessage result account:",t,r),t&&r&&(i.result={signature:s.default.decode(t),publicKey:(0,a.fromAccountToAddress)(r)})}else if("sui_signMessage"===i.method||"sui_signPersonalMessage"===i.method){let e=t.filter(function(e){return e.method===i.method})[0];if(e&&e.params&&"message"in e.params){let t=e.params.message,n=btoa(t);console.log("sui_signMessag suiMessagee suiMessageb64:>>>>",t,n),"sui_signMessage"===i.method?i.result={messageBytes:n,signature:i.result}:"sui_signPersonalMessage"===i.method&&(i.result={bytes:n,signature:i.result})}}else if("aptos_signMessage"===i.method){if(i.chainId=(0,o.replaceChainIdToChainName)(i.chainId),i.result=JSON.parse(i.result),console.log("aptos_signMessage result methodItem.result before:>>>>",JSON.stringify(i.result)),i.result&&"signature"in i.result){let e=i.result.signature;e&&e.startsWith("0x")&&(e=e.slice(2,e.length),i.result.signature=e)}console.log("aptos_signMessage result methodItem.result after:>>>>",JSON.stringify(i.result))}else if("cosmos_signArbitrary"===i.method)i.result=JSON.parse(i.result);else if("starknet_signMessage"==i.method){let e=i.result;"string"==typeof e&&(e=JSON.parse(e)),i.result=[e.signedDataR,e.signedDataS]}else"sync_all_addresses"==i.method&&(i.result=l(i.result))}}}catch(e){throw(0,o.logDebug)("connectMethodsResponseUpdate signResponse Error:",JSON.stringify(e)),e}})},t.connectMethodsToConnectWalletMethods=function(e,n){return i(this,void 0,void 0,function*(){try{(0,o.logDebug)("connectMethodsToConnectWalletMethods requestMethods:",JSON.stringify(e));let d=[];if(e&&e.length>1)throw new o.OKXConnectError(o.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"connectAndSign/openModalAndSign signRequest only support one data");if(!n&&e&&e.length>0)throw new o.OKXConnectError(o.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"Connect request params error , RequestMethods cannot be added when the NameSpace is empty");for(let t of e)if("aptos_signMessage"===t.method&&(t.chainId=(0,o.replaceChainNameToChainId)(t.chainId)),"wallet_addEthereumChain"===t.method){if(!(null==n?void 0:n.some(e=>e.namespace.includes("eip155"))))throw new o.OKXConnectError(o.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`Connect request params error, When using '${t.method}', the EVM chain needs to be included in the NameSpace`)}else if("sync_all_addresses"===t.method){if((0,a.syncAddressHostAvailable)())t.chainId="";else throw new o.OKXConnectError(o.OKX_CONNECT_ERROR_CODES.METHOD_NOT_SUPPORTED)}else if(!(null==n?void 0:n.some(e=>e.chains.some(e=>e.includes(`${t.chainId}`)))))throw new o.OKXConnectError(o.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`Connect request params error, When using '${t.method}', NameSpace must contain '${t.chainId}'`);for(let n of e){if(!t.connectSupportMethods.includes(n.method))throw new o.OKXConnectError(o.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`connect requestMethods not support method, method: '${n.method}'`);if("wallet_addEthereumChain"===n.method){if(Array.isArray(n.params)){let e=n.params;if(e&&1===e.length){let t=e[0];c(t)&&(n.params=t)}else if(e&&e.length>1)throw new o.OKXConnectError(o.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`connect request params only support one data, method: '${n.method}'`);else throw new o.OKXConnectError(o.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`connect request params is nil, method: '${n.method}'`)}}else if("personal_sign"===n.method){var i;if(i=n.params,"object"==typeof i&&null!==i&&Array.isArray(i)){if(n.params&&1!==n.params.length)throw new o.OKXConnectError(o.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`connect request params error,  method: '${n.method}' `);let e=n.params[0];if(e&&"string"==typeof e)n.params={message:e};else throw new o.OKXConnectError(o.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`connect request params is error,  method: '${n.method}' `)}}else if("sui_signMessage"===n.method||"sui_signPersonalMessage"===n.method){if(c(n.params)&&"message"in n.params){if(n.params.message){(0,o.logDebug)("sui_signMessage item.params.message :",n.params.message);let e=JSON.parse(JSON.stringify(n.params.message)),t=Object.values(e),i=new Uint8Array(t),r=new TextDecoder("utf8"),s=btoa(r.decode(i));n.params.message=atob(s)}else throw new o.OKXConnectError(o.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`connect request params is error,  method: '${n.method}' `)}else throw new o.OKXConnectError(o.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`connect request params is error,  method: '${n.method}' `)}else if("solana_signMessage"===n.method){if(c(n.params)&&"message"in n.params){if(n.params.message&&"string"==typeof n.params.message){let e=new TextEncoder().encode(n.params.message);n.params.bs58Message=s.default.encode(e)}else throw new o.OKXConnectError(o.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`connect request params is error,  method: '${n.method}' `)}else throw new o.OKXConnectError(o.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`connect request params is error,  method: '${n.method}' `)}else if("aptos_signMessage"===n.method){if(c(n.params)){if(n.chainId){var r=n.params,l=window.location.protocol+"//"+window.location.hostname;let e=1;"aptos:637"===n.chainId||"aptos:70000060"===n.chainId&&(e=2),n.params={data:r,applicationUrl:l,prefix:"APTOS",aptosChainId:e}}else throw new o.OKXConnectError(o.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`connect request params chainId is error,  method: '${n.method}' `)}else throw new o.OKXConnectError(o.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`connect request params is error,  method: '${n.method}' `)}else if("cosmos_signArbitrary"===n.method){if(c(n.params)){if(n.params.message&&"string"==typeof n.params.message){let e=btoa(n.params.message),t=n.chainId.split(":")[1];if(t)n.params={chain_id:t,data:{chain_id:"",account_number:"0",sequence:"0",fee:{gas:"0",amount:[]},msgs:[{type:"sign/MsgSignData",value:{signer:"",data:e}}],memo:""}};else throw new o.OKXConnectError(o.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`connect request params chainId is error,  method: '${n.method}' `)}else throw new o.OKXConnectError(o.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`connect request params message is error,  method: '${n.method}' `)}else throw new o.OKXConnectError(o.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`connect request params is error,  method: '${n.method}' `)}else if("tron_signMessage"==n.method){if(c(n.params)){if("message"in n.params&&n.params.message&&"string"==typeof n.params.message)n.params.message=function(e){let t="";for(let n=0;n<e.length;n++)t+=e.charCodeAt(n).toString(16).padStart(2,"0");return t}(n.params.message);else throw new o.OKXConnectError(o.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`connect request params is error,  method: '${n.method}' `)}else throw new o.OKXConnectError(o.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`connect request params is error,  method: '${n.method}' `)}else if("btc_signMessage"==n.method){if(c(n.params)){if("message"in n.params&&n.params.message&&"string"==typeof n.params.message)n.params={signStr:n.params.message};else throw new o.OKXConnectError(o.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`connect request params is error,  method: '${n.method}' `)}else throw new o.OKXConnectError(o.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`connect request params is error,  method: '${n.method}' `)}(0,o.logDebug)("connectMethodsToConnectWalletMethods item:",JSON.stringify(n)),d.push(n)}return d}catch(e){throw e}})},t.syncResoonseToRequire=l;let o=n(86745),s=r(n(1560)),a=n(89025);function c(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}function l(e){let t=JSON.parse(e);return{type:t.type,isEvm:t.isEvm,walletName:t.walletName,deriveName:t.deriveName,addresses:t.addresses.map(e=>({coinId:e.ci,address:e.a&&"null"!==e.a?e.a:t.evmAddress}))}}t.connectSupportMethods=Object.freeze(["personal_sign","sui_signMessage","sui_signPersonalMessage","btc_signMessage","aptos_signMessage","cosmos_signArbitrary","tron_signMessage","tron_signMessageV2","starknet_signMessage","sync_all_addresses"])},64617:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OKX_CONNECT_ERROR_CODES=t.OKXConnectError=void 0;var i=n(71720);Object.defineProperty(t,"OKXConnectError",{enumerable:!0,get:function(){return i.OKXConnectError}}),Object.defineProperty(t,"OKX_CONNECT_ERROR_CODES",{enumerable:!0,get:function(){return i.OKX_CONNECT_ERROR_CODES}})},64675:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(t,n);(!r||("get"in r?!t.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,r)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),r(n(12597),t),r(n(31355),t)},66024:(e,t,n)=>{"use strict";n(4775),"https://app.dynamicauth.com/api/v0".replace(/\/+$/,"")},66136:(e,t,n)=>{"use strict";n(66024)},66226:(e,t,n)=>{var i=n(39690);e.exports=function(e,t){return i(e,t)}},66776:(e,t,n)=>{"use strict";var i,r,o,s,a,c,l;Object.defineProperty(t,"__esModule",{value:!0}),t.isTmaPlatform=function(...e){return e.includes(f)},t.isInTMA=v,t.inTg=function(){return O()||v()},t.isInTelegramBrowser=O,t.sendExpand=function(){C("web_app_expand",{})},t.sendOpenTelegramLink=function(e,t){var n;let i=new URL(e);if("http:"!==i.protocol&&"https:"!==i.protocol){if(t)return t();throw new h.OKXConnectError(h.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`Url protocol is not supported: ${i}`)}if("t.me"!==i.hostname){if(t)return t();throw new h.OKXConnectError(h.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`Url host is not supported: ${i}`)}let r=i.pathname+i.search;_()||(n="6.1",E(m,"6.1")>=0)?C("web_app_open_tg_link",{path_full:r}):(0,p.openLinkBlank)("https://t.me"+r)},t.versionCompare=E;let d=n(80098),u=n(86273),h=n(59564),p=n(95576),g={};try{let e=location.hash.toString();g=function(e){e=e.replace(/^#/,"");let t={};if(!e.length)return t;if(0>e.indexOf("=")&&0>e.indexOf("?"))return t._path=y(e),t;let n=e.indexOf("?");n>=0&&(t._path=y(e.substr(0,n)),e=e.substr(n+1));let i=function(e){let t,n,i,r,o={};if(!e.length)return o;let s=e.split("&");for(t=0;t<s.length;t++)i=y((n=s[t].split("="))[0]),r=null==n[1]?null:y(n[1]),o[i]=r;return o}(e);for(let e in i)t[e]=i[e];return t}(e)}catch(e){}let f="unknown";if((null==g?void 0:g.tgWebAppPlatform)&&(f=null!==(i=g.tgWebAppPlatform)&&void 0!==i?i:"unknown"),"unknown"===f){let e=(0,d.getWindow)();f=null!==(s=null===(o=null===(r=null==e?void 0:e.Telegram)||void 0===r?void 0:r.WebApp)||void 0===o?void 0:o.platform)&&void 0!==s?s:"unknown"}let m="6.0";if((null==g?void 0:g.tgWebAppVersion)&&(m=g.tgWebAppVersion),!m){let e=(0,d.getWindow)();m=null!==(l=null===(c=null===(a=null==e?void 0:e.Telegram)||void 0===a?void 0:a.WebApp)||void 0===c?void 0:c.version)&&void 0!==l?l:"6.0"}function v(){var e;return"unknown"!==f||!!(null===(e=(0,d.getWindow)())||void 0===e?void 0:e.TelegramWebviewProxy)}function O(){var e;let t=!!(null===(e=(0,d.getWindow)())||void 0===e?void 0:e.TelegramWebview);return(v()||t)&&"unknown"===f}function _(){try{let e=(0,d.getWindow)();if(!e)return!1;return null!=e.parent&&e!==e.parent}catch(e){return!1}}function C(e,t){try{let n=(0,d.getWindow)();if(!n)throw new h.OKXConnectError(h.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"Can't post event to parent window: window is not defined");if(void 0!==n.TelegramWebviewProxy)(0,u.logDebug)("postEvent",e,t),n.TelegramWebviewProxy.postEvent(e,JSON.stringify(t));else if(n.external&&"notify"in n.external)(0,u.logDebug)("postEvent",e,t),n.external.notify(JSON.stringify({eventType:e,eventData:t}));else if(_()){let i=JSON.stringify({eventType:e,eventData:t});(0,u.logDebug)("postEvent",e,t),n.parent.postMessage(i,"*")}else throw new h.OKXConnectError(h.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"Can't post event to TMA")}catch(e){(0,u.logError)(`Can't post event to parent window: ${e}`)}}function y(e){try{return e=e.replace(/\+/g,"%20"),decodeURIComponent(e)}catch(t){return e}}function E(e,t){let n,i,r,o;"string"!=typeof e&&(e=""),"string"!=typeof t&&(t="");let s=e.replace(/^\s+|\s+$/g,"").split("."),a=t.replace(/^\s+|\s+$/g,"").split(".");for(i=0,n=Math.max(s.length,a.length);i<n;i++)if((r=parseInt(s[i])||0)!==(o=parseInt(a[i])||0)){if(r>o)return 1;return -1}return 0}},67107:(e,t,n)=>{"use strict";n(66024),n(15933),n(79909)},67189:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OKX_TG_WALLET=t.OKX_APP_WALLET=t.OKX_INJECT_WALLET=void 0,t.getTagByappName=function(e){var n="";if(e)switch(e){case i.OKXWalletName:n=t.OKX_APP_WALLET;break;case r.OKXMiniWalletName:n=t.OKX_TG_WALLET;break;case r.OKXInjectWalletName:n=t.OKX_INJECT_WALLET}return n};let i=n(59564),r=n(3049);t.OKX_INJECT_WALLET="okx_inject_wallet",t.OKX_APP_WALLET="okx_app_wallet",t.OKX_TG_WALLET="okx_tg_wallet"},67219:(e,t,n)=>{"use strict";var i;!function(e){e.TwoOfTwo="TWO_OF_TWO",e.TwoOfThree="TWO_OF_THREE",e.ThreeOfFive="THREE_OF_FIVE"}(i||(i={}))},67530:(e,t,n)=>{"use strict";n(66024),n(37657),n(10019)},67613:(e,t,n)=>{"use strict";n(66024)},67685:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(t,n);(!r||("get"in r?!t.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,r)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),r(n(76919),t)},68042:(e,t,n)=>{"use strict";n(66024),n(59293)},68737:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},68904:(e,t,n)=>{"use strict";var i;!function(e){e.Fiat="fiat",e.Crypto="crypto"}(i||(i={}))},69309:(e,t,n)=>{var i=n(87177),r=n(51306),o=n(89166),s=Math.max,a=Math.min;e.exports=function(e,t,n){var c,l,d,u,h,p,g=0,f=!1,m=!1,v=!0;if("function"!=typeof e)throw TypeError("Expected a function");function O(t){var n=c,i=l;return c=l=void 0,g=t,u=e.apply(i,n)}function _(e){var n=e-p,i=e-g;return void 0===p||n>=t||n<0||m&&i>=d}function C(){var e,n,i,o=r();if(_(o))return y(o);h=setTimeout(C,(e=o-p,n=o-g,i=t-e,m?a(i,d-n):i))}function y(e){return(h=void 0,v&&c)?O(e):(c=l=void 0,u)}function E(){var e,n=r(),i=_(n);if(c=arguments,l=this,p=n,i){if(void 0===h)return g=e=p,h=setTimeout(C,t),f?O(e):u;if(m)return clearTimeout(h),h=setTimeout(C,t),O(p)}return void 0===h&&(h=setTimeout(C,t)),u}return t=o(t)||0,i(n)&&(f=!!n.leading,d=(m="maxWait"in n)?s(o(n.maxWait)||0,t):d,v="trailing"in n?!!n.trailing:v),E.cancel=function(){void 0!==h&&clearTimeout(h),g=0,c=p=l=h=void 0},E.flush=function(){return void 0===h?u:y(r())},E}},69405:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(t,n);(!r||("get"in r?!t.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,r)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),r(n(15423),t),r(n(297),t)},69482:(e,t,n)=>{"use strict";n(66024)},70062:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((i=i.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});let r=n(9407),o=n(86745),s=n(64675),a=n(32881),c=n(97724);class l{constructor(e,t,n,i){this.name="aptos",this.namespace=e.namespace,this.events=i,this.client=n,this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders(),this.name=t}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return i(this,void 0,void 0,function*(){if((0,o.logDebug)("aptos request --args--string>",(0,o.safeJsonStringify)(e)),(0,o.logDebug)("aptos provider namespace: ",this.namespace),!this.client.needCheckRequestMethod()||this.namespace.methods.includes(e.method))return this.client.request(e);throw new o.OKXConnectError(o.OKX_CONNECT_ERROR_CODES.METHOD_NOT_SUPPORTED,"Please upgrade OKX APP")})}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(r.PROVIDER_EVENTS.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw Error("ChainId not found");return e.split(":")[1]}getAccounts(){let e=this.namespace.accounts;return e?[...new Set(e.filter(e=>e.split(":")[1]===this.chainId.toString()).map(e=>e.split(":")[2]))]:[]}createHttpProviders(){let e={};return this.namespace.chains.forEach(t=>{let n=(0,s.getChainId)(t),i=(0,s.getRpcUrl)(t,this.namespace),r=this.createHttpProvider(n,i);r&&(e[n]=r)}),e}getHttpProvider(){let e=`${this.chainId}`,t=this.httpProviders[e];if(void 0===t)throw Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){let n=this.createHttpProvider(e,t);n&&(this.httpProviders[e]=n)}createHttpProvider(e,t){if(t)return new c.JsonRpcProvider(new a.JsonRpcConnection(t,(0,s.getGlobal)("disableProviderPing")))}showRequestModal(e){return!0}}t.default=l},70074:(e,t,n)=>{"use strict";n.d(t,{o:()=>h});var i=n(24059),r=n(97707),o=n(55056);let s=(0,r.createContext)(null);var a=n(72305),c=n(3377);let l=e=>!e.isLayoutDirty&&e.willUpdate(!1),d=e=>!0===e,u=e=>d(!0===e)||"id"===e,h=e=>{let{children:t,id:n,inherit:h=!0}=e,p=(0,r.useContext)(o.L),g=(0,r.useContext)(s),[f,m]=function(){let e=function(){let e=(0,r.useRef)(!1);return(0,a.E)(()=>(e.current=!0,()=>{e.current=!1}),[]),e}(),[t,n]=(0,r.useState)(0),i=(0,r.useCallback)(()=>{e.current&&n(t+1)},[t]);return[(0,r.useCallback)(()=>c.Gt.postRender(i),[i]),t]}(),v=(0,r.useRef)(null),O=p.id||g;null===v.current&&(u(h)&&O&&(n=n?O+"-"+n:O),v.current={id:n,group:d(h)&&p.group||function(){let e=new Set,t=new WeakMap,n=()=>e.forEach(l);return{add:i=>{e.add(i),t.set(i,i.addEventListener("willUpdate",n))},remove:i=>{e.delete(i);let r=t.get(i);r&&(r(),t.delete(i)),n()},dirty:n}}()});let _=(0,r.useMemo)(()=>({...v.current,forceRender:f}),[m]);return(0,i.jsx)(o.L.Provider,{value:_,children:t})}},70078:(e,t,n)=>{"use strict";n(97097),n(18534)},70725:(e,t,n)=>{"use strict";var i;!function(e){e.Recommended="recommended",e.Exact="exact"}(i||(i={}))},71716:(e,t,n)=>{"use strict";n(59293)},71720:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_ERROR=t.STANDARD_ERROR_MAP=t.SERVER_ERROR_CODE_RANGE=t.RESERVED_ERROR_CODES=t.SERVER_ERROR=t.INTERNAL_ERROR=t.INVALID_PARAMS=t.METHOD_NOT_FOUND=t.INVALID_REQUEST=t.PARSE_ERROR=t.OKX_CONNECT_ERROR_CODES=t.OKXConnectError=void 0;class i extends Error{constructor(e,t){void 0==t&&(t=function(e){if(e==n.UNKNOWN_ERROR);else if(e==n.BAD_REQUEST_ERROR)return"bad request error";else if(e==n.ALREADY_CONNECTED_ERROR)return"already connected error";else if(e==n.NOT_CONNECTED_ERROR)return"not connected error";else if(e==n.UNKNOWN_APP_ERROR)return"unknown app error";else if(e==n.USER_REJECTS_ERROR)return"user rejects error";else if(e==n.USER_REJECTS_ERROR_CAUSE_REGISTER)return"wallet address are registering";else if(e==n.METHOD_NOT_SUPPORTED)return"method not supported";else if(e==n.CONNECTION_ERROR)return"connect error";else if(e==n.CHAIN_NOT_SUPPORTED)return"chain not supported";return"unknown error"}(e)),super(t),this.code=e,this.message=`${i.prefix} ${t?"\n"+t:""}`,Object.setPrototypeOf(this,i.prototype)}toJSON(){return{message:this.message,code:this.code}}}t.OKXConnectError=i,i.prefix="[OKX_CONNECT_SDK_ERROR]",!function(e){e[e.UNKNOWN_ERROR=0]="UNKNOWN_ERROR",e[e.BAD_REQUEST_ERROR=1]="BAD_REQUEST_ERROR",e[e.ALREADY_CONNECTED_ERROR=11]="ALREADY_CONNECTED_ERROR",e[e.NOT_CONNECTED_ERROR=12]="NOT_CONNECTED_ERROR",e[e.UNKNOWN_APP_ERROR=100]="UNKNOWN_APP_ERROR",e[e.USER_REJECTS_ERROR=300]="USER_REJECTS_ERROR",e[e.USER_REJECTS_ERROR_CAUSE_REGISTER=301]="USER_REJECTS_ERROR_CAUSE_REGISTER",e[e.METHOD_NOT_SUPPORTED=400]="METHOD_NOT_SUPPORTED",e[e.CHAIN_NOT_SUPPORTED=500]="CHAIN_NOT_SUPPORTED",e[e.WALLET_NOT_SUPPORTED=600]="WALLET_NOT_SUPPORTED",e[e.CONNECTION_ERROR=700]="CONNECTION_ERROR"}(n||(t.OKX_CONNECT_ERROR_CODES=n={})),t.PARSE_ERROR="PARSE_ERROR",t.INVALID_REQUEST="INVALID_REQUEST",t.METHOD_NOT_FOUND="METHOD_NOT_FOUND",t.INVALID_PARAMS="INVALID_PARAMS",t.INTERNAL_ERROR="INTERNAL_ERROR",t.SERVER_ERROR="SERVER_ERROR",t.RESERVED_ERROR_CODES=[-32700,-32600,-32601,-32602,-32603],t.SERVER_ERROR_CODE_RANGE=[-32e3,-32099],t.STANDARD_ERROR_MAP={[t.PARSE_ERROR]:{code:-32700,message:"Parse error"},[t.INVALID_REQUEST]:{code:-32600,message:"Invalid Request"},[t.METHOD_NOT_FOUND]:{code:-32601,message:"Method not found"},[t.INVALID_PARAMS]:{code:-32602,message:"Invalid params"},[t.INTERNAL_ERROR]:{code:-32603,message:"Internal error"},[t.SERVER_ERROR]:{code:-32e3,message:"Server error"}},t.DEFAULT_ERROR=t.SERVER_ERROR},71773:(e,t,n)=>{"use strict";n(66024)},71940:(e,t,n)=>{"use strict";n(66024)},71995:(e,t,n)=>{"use strict";var i;n.d(t,{vH:()=>i}),function(e){e.Email="email",e.EmailAndPhone="emailAndPhone",e.Phone="phone",e.Separator="separator",e.Social="social",e.Text="text",e.Wallet="wallet"}(i||(i={}))},72139:(e,t,n)=>{"use strict";n(66024)},72565:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(t,n);(!r||("get"in r?!t.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,r)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.OKXWalletName=t.creatOKXInjectWalletInfo=t.creatOKXMiniAppWalletInfo=t.creatOKXWalletInfo=t.ISignClientEvents=t.IEngine=t.IEngineEvents=t.ISignClient=t.getBigIntRpcId=t.formatJsonRpcRequest=t.isJsonRpcError=t.isJsonRpcResponse=t.parseConnectionError=t.isHttpUrl=t.formatJsonRpcError=void 0;var o=n(28535);Object.defineProperty(t,"formatJsonRpcError",{enumerable:!0,get:function(){return o.formatJsonRpcError}}),Object.defineProperty(t,"isHttpUrl",{enumerable:!0,get:function(){return o.isHttpUrl}}),Object.defineProperty(t,"parseConnectionError",{enumerable:!0,get:function(){return o.parseConnectionError}}),Object.defineProperty(t,"isJsonRpcResponse",{enumerable:!0,get:function(){return o.isJsonRpcResponse}}),Object.defineProperty(t,"isJsonRpcError",{enumerable:!0,get:function(){return o.isJsonRpcError}}),Object.defineProperty(t,"formatJsonRpcRequest",{enumerable:!0,get:function(){return o.formatJsonRpcRequest}}),Object.defineProperty(t,"getBigIntRpcId",{enumerable:!0,get:function(){return o.getBigIntRpcId}});var s=n(55869);Object.defineProperty(t,"ISignClient",{enumerable:!0,get:function(){return s.ISignClient}}),Object.defineProperty(t,"IEngineEvents",{enumerable:!0,get:function(){return s.IEngineEvents}}),Object.defineProperty(t,"IEngine",{enumerable:!0,get:function(){return s.IEngine}}),Object.defineProperty(t,"ISignClientEvents",{enumerable:!0,get:function(){return s.ISignClientEvents}}),r(n(27303),t);var a=n(3049);Object.defineProperty(t,"creatOKXWalletInfo",{enumerable:!0,get:function(){return a.creatOKXWalletInfo}}),Object.defineProperty(t,"creatOKXMiniAppWalletInfo",{enumerable:!0,get:function(){return a.creatOKXMiniAppWalletInfo}}),Object.defineProperty(t,"creatOKXInjectWalletInfo",{enumerable:!0,get:function(){return a.creatOKXInjectWalletInfo}}),Object.defineProperty(t,"OKXWalletName",{enumerable:!0,get:function(){return a.OKXWalletName}})},72772:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Report_WalletType_Key=t.Report_OKXConnectSDKExtension_ConnectDapp_Button_Click=t.Report_OKXConnectSDKExtension_Module_Retry_Click=t.Report_ConnectDapp_ConnectAndSign_Click=t.Report_Proceed_QRCode_Click=t.Report_ChooseType_Download_Click=t.Report_ChooseType_ConnectWallet_Click=t.Report_Proceed_Retry_Click=t.Report_OKXConnectSDKExtension_ConnectDapp_ConnectSuccess_View=t.Report_OKXConnectSDKExtension_ConnectDapp_Page_View=t.Report_ChooseType_ConnectWallet_View=t.Report_Loading_ConnectWallet_View=t.Report_Proceed_QRCode_View=t.Report_Proceed_Proceed_View=void 0,t.Report_Proceed_Proceed_View="OKXConnectSDK_Proceed_Proceed_View",t.Report_Proceed_QRCode_View="OKXConnectSDK_Proceed_QRCode_View",t.Report_Loading_ConnectWallet_View="OKXConnectSDK_Loading_ConnectWallet_View",t.Report_ChooseType_ConnectWallet_View="OKXConnectSDK_ChooseType_ConnectWallet_View",t.Report_OKXConnectSDKExtension_ConnectDapp_Page_View="OKXConnectSDKExtension_ConnectDapp_Page_View",t.Report_OKXConnectSDKExtension_ConnectDapp_ConnectSuccess_View="OKXConnectSDKExtension_ConnectDapp_ConnectSuccess_View",t.Report_Proceed_Retry_Click="OKXConnectSDK_Proceed_Retry_Click",t.Report_ChooseType_ConnectWallet_Click="OKXConnectSDK_ChooseType_ConnectWallet_Click",t.Report_ChooseType_Download_Click="OKXConnectSDK_ChooseType_Download_Click",t.Report_Proceed_QRCode_Click="OKXConnectSDK_Proceed_QRCode_Click",t.Report_ConnectDapp_ConnectAndSign_Click="OKXConnectSDK_ConnectDapp_ConnectAndSign_Click",t.Report_OKXConnectSDKExtension_Module_Retry_Click="OKXConnectSDKExtension_Module_Retry_Click",t.Report_OKXConnectSDKExtension_ConnectDapp_Button_Click="OKXConnectSDKExtension_ConnectDapp_Button_Click",t.Report_WalletType_Key="wallet_type"},72839:(e,t,n)=>{"use strict";var i;!function(e){e.Passkey="passkey",e.Passphrase="passphrase"}(i||(i={}))},72916:(e,t,n)=>{"use strict";n(66024),n(35946)},72955:(e,t,n)=>{"use strict";n(66024),n(15983)},73134:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((i=i.apply(e,t||[])).next())})},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.SolProvider=void 0;let o=n(59564),s=n(83819),a=r(n(1560)),c=n(55263),l=n(15423);class d{constructor(){this.accountChangedSolanaPublicKeyHandler=null}send(e){return i(this,void 0,void 0,function*(){var t;try{let r;yield this.restoreConnect(),(0,s.logDebug)("SolProvider send request:",JSON.stringify(e));let c=e.method;if(e.injectParams)switch(c){case"solana_signMessage":if(e.injectParams&&"object"==typeof e.injectParams&&"message"in e.injectParams){var n=null===(t=e.injectParams)||void 0===t?void 0:t.message;let i=new TextEncoder().encode(n),o=yield window.okxwallet.solana.signMessage(i,"utf8");return r={method:e.method,result:a.default.encode(o.signature)},(0,s.logDebug)("SolProvider send result:",JSON.stringify(o)),r}throw new o.OKXConnectError(o.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`param is error method: '${c}'`);case"solana_signTransaction":{let t=yield window.okxwallet.solana.signTransaction(e.injectParams);return(0,s.logDebug)("SolProvider send bufferResult:",JSON.stringify(t)),r={method:e.method,injectResult:t},(0,s.logDebug)("SolProvider send result:",(0,s.safeJsonStringify)(r)),r}case"solana_signAllTransactions":{let t=yield window.okxwallet.solana.signAllTransactions(e.injectParams);return(0,s.logDebug)("SolProvider send result:",(0,s.safeJsonStringify)(t)),r={method:e.method,injectResult:t}}case"solana_signAndSendTransaction":var i=yield window.okxwallet.solana.signAndSendTransaction(e.injectParams);return(0,s.logDebug)("SolProvider send result:",(0,s.safeJsonStringify)(i)),r={method:e.method,injectResult:i};default:throw new o.OKXConnectError(o.OKX_CONNECT_ERROR_CODES.METHOD_NOT_SUPPORTED,`method: '${c}'`)}else throw new o.OKXConnectError(o.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`param is error method: '${c}'`)}catch(e){throw(0,s.logDebug)("SolProvider send error:",e),e}})}connectReady(){return!0}disconnect(){}restoreConnect(){return(0,c.isDevice)("mobile")?this.connect():Promise.resolve()}parseConnectResponse(e,t,n,r,a,c){return i(this,void 0,void 0,function*(){let e=[];r.forEach(t=>{t.namespace===o.NameSpaceKeySOL&&e.push(...t.chains)});let t=[],n={},i={};if(e.forEach(e=>{let r=a.address.find(t=>"501"===t.chainId&&501===t.coinType||t.namespaceChainId===e);r&&(t.push(e+":"+r.address),i&&"publicKey"in i?n[e]=i:n[e]={publicKey:r.publicKey})}),t&&t.length>0){let e={namespace:o.NameSpaceKeySOL,addresses:t,methods:[...l.SOLANAMethods],extra:n};return(0,s.logDebug)("parseConnectResponse nameSpaceResponse :",JSON.stringify(e)),e}})}connect(){return i(this,void 0,void 0,function*(){return window.okxwallet.solana.connect()})}singleConnect(){return this.connect()}addListener(e){console.log("window.okxwallet configEventWithKey:","sol"),this.accountChangedSolanaPublicKeyHandler=t=>{console.log("window.okxwallet configEventWithKey_solana:",Date.now(),"sol",t),t&&e()},window.okxwallet.solana.on("accountChanged",this.accountChangedSolanaPublicKeyHandler)}removeListener(){this.accountChangedSolanaPublicKeyHandler&&window.okxwallet.solana.removeListener("accountChanged",this.accountChangedSolanaPublicKeyHandler)}}t.SolProvider=d},73440:(e,t,n)=>{"use strict";let i;n.d(t,{Z:()=>I});var r=n(44635);let o=e=>(t,n,i)=>{let r=i.subscribe;return i.subscribe=(e,t,n)=>{let o=e;if(t){let r=(null==n?void 0:n.equalityFn)||Object.is,s=e(i.getState());o=n=>{let i=e(n);if(!r(s,i)){let e=s;t(s=i,e)}},(null==n?void 0:n.fireImmediately)&&t(s,s)}return r(o)},e(t,n,i)},s=e=>t=>{try{let n=e(t);if(n instanceof Promise)return n;return{then:e=>s(e)(n),catch(e){return this}}}catch(e){return{then(e){return this},catch:t=>s(t)(e)}}},a=(e,t)=>(n,i,r)=>{let o,a={storage:function(e,t){let n;try{n=e()}catch(e){return}return{getItem:e=>{var t;let i=e=>null===e?null:JSON.parse(e,void 0),r=null!=(t=n.getItem(e))?t:null;return r instanceof Promise?r.then(i):i(r)},setItem:(e,t)=>n.setItem(e,JSON.stringify(t,void 0)),removeItem:e=>n.removeItem(e)}}(()=>localStorage),partialize:e=>e,version:0,merge:(e,t)=>({...t,...e}),...t},c=!1,l=new Set,d=new Set,u=a.storage;if(!u)return e((...e)=>{console.warn(`[zustand persist middleware] Unable to update item '${a.name}', the given storage is currently unavailable.`),n(...e)},i,r);let h=()=>{let e=a.partialize({...i()});return u.setItem(a.name,{state:e,version:a.version})},p=r.setState;r.setState=(e,t)=>{p(e,t),h()};let g=e((...e)=>{n(...e),h()},i,r);r.getInitialState=()=>g;let f=()=>{var e,t;if(!u)return;c=!1,l.forEach(e=>{var t;return e(null!=(t=i())?t:g)});let r=(null==(t=a.onRehydrateStorage)?void 0:t.call(a,null!=(e=i())?e:g))||void 0;return s(u.getItem.bind(u))(a.name).then(e=>{if(e){if("number"!=typeof e.version||e.version===a.version)return[!1,e.state];if(a.migrate)return[!0,a.migrate(e.state,e.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}return[!1,void 0]}).then(e=>{var t;let[r,s]=e;if(n(o=a.merge(s,null!=(t=i())?t:g),!0),r)return h()}).then(()=>{null==r||r(o,void 0),o=i(),c=!0,d.forEach(e=>e(o))}).catch(e=>{null==r||r(void 0,e)})};return r.persist={setOptions:e=>{a={...a,...e},e.storage&&(u=e.storage)},clearStorage:()=>{null==u||u.removeItem(a.name)},getOptions:()=>a,rehydrate:()=>f(),hasHydrated:()=>c,onHydrate:e=>(l.add(e),()=>{l.delete(e)}),onFinishHydration:e=>(d.add(e),()=>{d.delete(e)})},a.skipHydration||f(),o||g},c=e=>{let t;let n=new Set,i=(e,i)=>{let r="function"==typeof e?e(t):e;if(!Object.is(r,t)){let e=t;t=(null!=i?i:"object"!=typeof r||null===r)?r:Object.assign({},t,r),n.forEach(n=>n(t,e))}},r=()=>t,o={setState:i,getState:r,getInitialState:()=>s,subscribe:e=>(n.add(e),()=>n.delete(e))},s=t=e(i,r,o);return o},l=e=>e?c(e):c;var d=n(80130),u=n(15650),h=n(24112),p=n(43209),g=n(63239),f=n(98559),m=n(20230);class v extends m.C{constructor(){super("Provider not found."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ProviderNotFoundError"})}}m.C;var O=n(2527);function _(e={}){let t,n,i,r;let{shimDisconnect:o=!0,unstable_shimAsyncInject:s}=e;function a(){let t=e.target;if("function"==typeof t){let e=t();if(e)return e}return"object"==typeof t?t:"string"==typeof t?{...C[t]??{id:t,name:`${t[0].toUpperCase()}${t.slice(1)}`,provider:`is${t[0].toUpperCase()}${t.slice(1)}`}}:{id:"injected",name:"Injected",provider:e=>e?.ethereum}}return(0,O.U)(c=>({get icon(){return a().icon},get id(){return a().id},get name(){return a().name},get supportsSimulation(){return!0},type:_.type,async setup(){let n=await this.getProvider();n?.on&&e.target&&(i||(i=this.onConnect.bind(this),n.on("connect",i)),t||(t=this.onAccountsChanged.bind(this),n.on("accountsChanged",t)))},async connect({chainId:s,isReconnecting:a}={}){let l=await this.getProvider();if(!l)throw new v;let h=[];if(a)h=await this.getAccounts().catch(()=>[]);else if(o)try{let e=await l.request({method:"wallet_requestPermissions",params:[{eth_accounts:{}}]});(h=e[0]?.caveats?.[0]?.value?.map(e=>d.b(e))).length>0&&(h=await this.getAccounts())}catch(e){if(e.code===u.vx.code)throw new u.vx(e);if(e.code===u.qZ.code)throw e}try{h?.length||a||(h=(await l.request({method:"eth_requestAccounts"})).map(e=>(0,d.b)(e))),i&&(l.removeListener("connect",i),i=void 0),t||(t=this.onAccountsChanged.bind(this),l.on("accountsChanged",t)),n||(n=this.onChainChanged.bind(this),l.on("chainChanged",n)),r||(r=this.onDisconnect.bind(this),l.on("disconnect",r));let p=await this.getChainId();if(s&&p!==s){let e=await this.switchChain({chainId:s}).catch(e=>{if(e.code===u.vx.code)throw e;return{id:p}});p=e?.id??p}return o&&await c.storage?.removeItem(`${this.id}.disconnected`),e.target||await c.storage?.setItem("injected.connected",!0),{accounts:h,chainId:p}}catch(e){if(e.code===u.vx.code)throw new u.vx(e);if(e.code===u.qZ.code)throw new u.qZ(e);throw e}},async disconnect(){let t=await this.getProvider();if(!t)throw new v;n&&(t.removeListener("chainChanged",n),n=void 0),r&&(t.removeListener("disconnect",r),r=void 0),i||(i=this.onConnect.bind(this),t.on("connect",i));try{await (0,h.w)(()=>t.request({method:"wallet_revokePermissions",params:[{eth_accounts:{}}]}),{timeout:100})}catch{}o&&await c.storage?.setItem(`${this.id}.disconnected`,!0),e.target||await c.storage?.removeItem("injected.connected")},async getAccounts(){let e=await this.getProvider();if(!e)throw new v;return(await e.request({method:"eth_accounts"})).map(e=>(0,d.b)(e))},async getChainId(){let e=await this.getProvider();if(!e)throw new v;return Number(await e.request({method:"eth_chainId"}))},async getProvider(){let e;if("undefined"==typeof window)return;let t=a();return(e="function"==typeof t.provider?t.provider(window):"string"==typeof t.provider?y(window,t.provider):t.provider)&&!e.removeListener&&("off"in e&&"function"==typeof e.off?e.removeListener=e.off:e.removeListener=()=>{}),e},async isAuthorized(){try{if(o&&await c.storage?.getItem(`${this.id}.disconnected`)||!e.target&&!await c.storage?.getItem("injected.connected"))return!1;if(!await this.getProvider()){if(void 0!==s&&!1!==s){let e=async()=>("undefined"!=typeof window&&window.removeEventListener("ethereum#initialized",e),!!await this.getProvider()),t="number"==typeof s?s:1e3;if(await Promise.race([..."undefined"!=typeof window?[new Promise(t=>window.addEventListener("ethereum#initialized",()=>t(e()),{once:!0}))]:[],new Promise(n=>setTimeout(()=>n(e()),t))]))return!0}throw new v}return!!(await (0,p.b)(()=>this.getAccounts())).length}catch{return!1}},async switchChain({addEthereumChainParameter:e,chainId:t}){let n=await this.getProvider();if(!n)throw new v;let i=c.chains.find(e=>e.id===t);if(!i)throw new u.ch(new f.nk);let r=new Promise(e=>{let n=i=>{"chainId"in i&&i.chainId===t&&(c.emitter.off("change",n),e())};c.emitter.on("change",n)});try{return await Promise.all([n.request({method:"wallet_switchEthereumChain",params:[{chainId:(0,g.cK)(t)}]}).then(async()=>{await this.getChainId()===t&&c.emitter.emit("change",{chainId:t})}),r]),i}catch(o){if(4902===o.code||o?.data?.originalError?.code===4902)try{let o,s;let{default:a,...l}=i.blockExplorers??{};e?.blockExplorerUrls?o=e.blockExplorerUrls:a&&(o=[a.url,...Object.values(l).map(e=>e.url)]),s=e?.rpcUrls?.length?e.rpcUrls:[i.rpcUrls.default?.http[0]??""];let d={blockExplorerUrls:o,chainId:(0,g.cK)(t),chainName:e?.chainName??i.name,iconUrls:e?.iconUrls,nativeCurrency:e?.nativeCurrency??i.nativeCurrency,rpcUrls:s};return await Promise.all([n.request({method:"wallet_addEthereumChain",params:[d]}).then(async()=>{if(await this.getChainId()===t)c.emitter.emit("change",{chainId:t});else throw new u.vx(Error("User rejected switch after adding network."))}),r]),i}catch(e){throw new u.vx(e)}if(o.code===u.vx.code)throw new u.vx(o);throw new u.ch(o)}},async onAccountsChanged(e){if(0===e.length)this.onDisconnect();else if(c.emitter.listenerCount("connect")){let e=(await this.getChainId()).toString();this.onConnect({chainId:e}),o&&await c.storage?.removeItem(`${this.id}.disconnected`)}else c.emitter.emit("change",{accounts:e.map(e=>(0,d.b)(e))})},onChainChanged(e){let t=Number(e);c.emitter.emit("change",{chainId:t})},async onConnect(e){let o=await this.getAccounts();if(0===o.length)return;let s=Number(e.chainId);c.emitter.emit("connect",{accounts:o,chainId:s});let a=await this.getProvider();a&&(i&&(a.removeListener("connect",i),i=void 0),t||(t=this.onAccountsChanged.bind(this),a.on("accountsChanged",t)),n||(n=this.onChainChanged.bind(this),a.on("chainChanged",n)),r||(r=this.onDisconnect.bind(this),a.on("disconnect",r)))},async onDisconnect(e){let t=await this.getProvider();(!e||1013!==e.code||!t||!(await this.getAccounts()).length)&&(c.emitter.emit("disconnect"),t&&(n&&(t.removeListener("chainChanged",n),n=void 0),r&&(t.removeListener("disconnect",r),r=void 0),i||(i=this.onConnect.bind(this),t.on("connect",i))))}}))}_.type="injected";let C={coinbaseWallet:{id:"coinbaseWallet",name:"Coinbase Wallet",provider:e=>e?.coinbaseWalletExtension?e.coinbaseWalletExtension:y(e,"isCoinbaseWallet")},metaMask:{id:"metaMask",name:"MetaMask",provider:e=>y(e,e=>{if(!e.isMetaMask||e.isBraveWallet&&!e._events&&!e._state)return!1;for(let t of["isApexWallet","isAvalanche","isBitKeep","isBlockWallet","isKuCoinWallet","isMathWallet","isOkxWallet","isOKExWallet","isOneInchIOSWallet","isOneInchAndroidWallet","isOpera","isPhantom","isPortal","isRabby","isTokenPocket","isTokenary","isUniswapWallet","isZerion"])if(e[t])return!1;return!0})},phantom:{id:"phantom",name:"Phantom",provider:e=>e?.phantom?.ethereum?e.phantom?.ethereum:y(e,"isPhantom")}};function y(e,t){function n(e){return"function"==typeof t?t(e):"string"!=typeof t||e[t]}let i=e.ethereum;return i?.providers?i.providers.find(e=>n(e)):i&&n(i)?i:void 0}var E=n(92656);class b{constructor(e){Object.defineProperty(this,"uid",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"_emitter",{enumerable:!0,configurable:!0,writable:!0,value:new E.b})}on(e,t){this._emitter.on(e,t)}once(e,t){this._emitter.once(e,t)}off(e,t){this._emitter.off(e,t)}emit(e,...t){let n=t[0];this._emitter.emit(e,{uid:this.uid,...n})}listenerCount(e){return this._emitter.listenerCount(e)}}function N(e,t){return JSON.parse(e,(e,n)=>{let i=n;return i?.__type==="bigint"&&(i=BigInt(i.value)),i?.__type==="Map"&&(i=new Map(i.value)),t?.(e,i)??i})}function R(e,t){return e.slice(0,t).join(".")||"."}function w(e,t){let{length:n}=e;for(let i=0;i<n;++i)if(e[i]===t)return i+1;return 0}function S(e,t,n,i){return JSON.stringify(e,function(e,t){let n="function"==typeof e,i="function"==typeof t,r=[],o=[];return function(s,a){if("object"==typeof a){if(r.length){let e=w(r,this);0===e?r[r.length]=this:(r.splice(e),o.splice(e)),o[o.length]=s;let n=w(r,a);if(0!==n)return i?t.call(this,s,a,R(o,n)):`[ref=${R(o,n)}]`}else r[0]=a,o[0]=s}return n?e.call(this,s,a):a}}((e,n)=>{let i=n;return"bigint"==typeof i&&(i={__type:"bigint",value:n.toString()}),i instanceof Map&&(i={__type:"Map",value:Array.from(n.entries())}),t?.(e,i)??i},i),n??void 0)}let T={getItem:()=>null,setItem:()=>{},removeItem:()=>{}},P=256;var D=n(52809);function I(e){let t;let{multiInjectedProviderDiscovery:n=!0,storage:s=function(e){let{deserialize:t=N,key:n="wagmi",serialize:i=S,storage:r=T}=e;function o(e){return e instanceof Promise?e.then(e=>e).catch(()=>null):e}return{...r,key:n,async getItem(e,i){let s=r.getItem(`${n}.${e}`),a=await o(s);return a?t(a)??null:i??null},async setItem(e,t){let s=`${n}.${e}`;null===t?await o(r.removeItem(s)):await o(r.setItem(s,i(t)))},async removeItem(e){await o(r.removeItem(`${n}.${e}`))}}}({storage:function(){let e="undefined"!=typeof window&&window.localStorage?window.localStorage:T;return{getItem:t=>e.getItem(t),removeItem(t){e.removeItem(t)},setItem(t,n){try{e.setItem(t,n)}catch{}}}}()}),syncConnectedChain:c=!0,ssr:d=!1,...u}=e,h="undefined"!=typeof window&&n?function(){let e=new Set,t=[],n=()=>(function(e){if("undefined"==typeof window)return;let t=t=>e(t.detail);return window.addEventListener("eip6963:announceProvider",t),window.dispatchEvent(new CustomEvent("eip6963:requestProvider")),()=>window.removeEventListener("eip6963:announceProvider",t)})(n=>{t.some(({info:e})=>e.uuid===n.info.uuid)||(t=[...t,n],e.forEach(e=>e(t,{added:[n]})))}),i=n();return{_listeners:()=>e,clear(){e.forEach(e=>e([],{removed:[...t]})),t=[]},destroy(){this.clear(),e.clear(),i?.()},findProvider:({rdns:e})=>t.find(t=>t.info.rdns===e),getProviders:()=>t,reset(){this.clear(),i?.(),i=n()},subscribe:(n,{emitImmediately:i}={})=>(e.add(n),i&&n(t,{added:t}),()=>e.delete(n))}}():void 0,p=l(()=>u.chains),g=l(()=>{let e=[],t=new Set;for(let n of u.connectors??[]){let i=m(n);if(e.push(i),!d&&i.rdns)for(let e of"string"==typeof i.rdns?[i.rdns]:i.rdns)t.add(e)}if(!d&&h)for(let n of h.getProviders())t.has(n.info.rdns)||e.push(m(v(n)));return e});function m(e){let t=new b(function(e=11){if(!i||P+e>512){i="",P=0;for(let e=0;e<256;e++)i+=(256+256*Math.random()|0).toString(16).substring(1)}return i.substring(P,P+++e)}()),n={...e({emitter:t,chains:p.getState(),storage:s,transports:u.transports}),emitter:t,uid:t.uid};return t.on("connect",I),n.setup?.(),n}function v(e){let{info:t}=e,n=e.provider;return _({target:{...t,id:t.rdns,provider:n}})}let O=new Map;function C(){return{chainId:p.getState()[0].id,connections:new Map,current:null,status:"disconnected"}}let y="0.0.0-canary-";t=D.r.startsWith(y)?Number.parseInt(D.r.replace(y,"")):Number.parseInt(D.r.split(".")[0]??"0");let E=l(o(s?a(C,{migrate(e,n){if(n===t)return e;let i=C(),r=R(e,i.chainId);return{...i,chainId:r}},name:"store",partialize:e=>({connections:{__type:"Map",value:Array.from(e.connections.entries()).map(([e,t])=>{let{id:n,name:i,type:r,uid:o}=t.connector;return[e,{...t,connector:{id:n,name:i,type:r,uid:o}}]})},chainId:e.chainId,current:e.current}),merge(e,t){"object"==typeof e&&e&&"status"in e&&delete e.status;let n=R(e,t.chainId);return{...t,...e,chainId:n}},skipHydration:d,storage:s,version:t}):C));function R(e,t){return e&&"object"==typeof e&&"chainId"in e&&"number"==typeof e.chainId&&p.getState().some(t=>t.id===e.chainId)?e.chainId:t}function w(e){E.setState(t=>{let n=t.connections.get(e.uid);return n?{...t,connections:new Map(t.connections).set(e.uid,{accounts:e.accounts??n.accounts,chainId:e.chainId??n.chainId,connector:n.connector})}:t})}function I(e){"connecting"!==E.getState().status&&"reconnecting"!==E.getState().status&&E.setState(t=>{let n=g.getState().find(t=>t.uid===e.uid);return n?(n.emitter.listenerCount("connect")&&n.emitter.off("connect",w),n.emitter.listenerCount("change")||n.emitter.on("change",w),n.emitter.listenerCount("disconnect")||n.emitter.on("disconnect",K),{...t,connections:new Map(t.connections).set(e.uid,{accounts:e.accounts,chainId:e.chainId,connector:n}),current:e.uid,status:"connected"}):t})}function K(e){E.setState(t=>{let n=t.connections.get(e.uid);if(n){let e=n.connector;e.emitter.listenerCount("change")&&n.connector.emitter.off("change",w),e.emitter.listenerCount("disconnect")&&n.connector.emitter.off("disconnect",K),e.emitter.listenerCount("connect")||n.connector.emitter.on("connect",I)}if(t.connections.delete(e.uid),0===t.connections.size)return{...t,connections:new Map,current:null,status:"disconnected"};let i=t.connections.values().next().value;return{...t,connections:new Map(t.connections),current:i.connector.uid}})}return E.setState(C()),c&&E.subscribe(({connections:e,current:t})=>t?e.get(t)?.chainId:void 0,e=>{if(p.getState().some(t=>t.id===e))return E.setState(t=>({...t,chainId:e??t.chainId}))}),h?.subscribe(e=>{let t=new Set,n=new Set;for(let e of g.getState())if(t.add(e.id),e.rdns)for(let t of"string"==typeof e.rdns?[e.rdns]:e.rdns)n.add(t);let i=[];for(let r of e){if(n.has(r.info.rdns))continue;let e=m(v(r));t.has(e.id)||i.push(e)}(!s||E.persist.hasHydrated())&&g.setState(e=>[...e,...i],!0)}),{get chains(){return p.getState()},get connectors(){return g.getState()},storage:s,getClient:function(e={}){let t;let n=e.chainId??E.getState().chainId,i=p.getState().find(e=>e.id===n);if(e.chainId&&!i)throw new f.nk;{let e=O.get(E.getState().chainId);if(e&&!i)return e;if(!i)throw new f.nk}{let e=O.get(n);if(e)return e}if(u.client)t=u.client({chain:i});else{let e=i.id,n=p.getState().map(e=>e.id),o={};for(let[t,i]of Object.entries(u))if("chains"!==t&&"client"!==t&&"connectors"!==t&&"transports"!==t){if("object"==typeof i){if(e in i)o[t]=i[e];else{if(n.some(e=>e in i))continue;o[t]=i}}else o[t]=i}t=(0,r.U)({...o,chain:i,batch:o.batch??{multicall:!0},transport:t=>u.transports[e]({...t,connectors:g})})}return O.set(n,t),t},get state(){return E.getState()},setState(e){let t;t="function"==typeof e?e(E.getState()):e;let n=C();"object"!=typeof t&&(t=n),Object.keys(n).some(e=>!(e in t))&&(t=n),E.setState(t,!0)},subscribe:(e,t,n)=>E.subscribe(e,t,n?{...n,fireImmediately:n.emitImmediately}:void 0),_internal:{mipd:h,store:E,ssr:!!d,syncConnectedChain:c,transports:u.transports,chains:{setState(e){let t="function"==typeof e?e(p.getState()):e;if(0!==t.length)return p.setState(t,!0)},subscribe:e=>p.subscribe(e)},connectors:{providerDetailToConnector:v,setup:m,setState:e=>g.setState("function"==typeof e?e(g.getState()):e,!0),subscribe:e=>g.subscribe(e)},events:{change:w,connect:I,disconnect:K}}}}},73461:(e,t,n)=>{"use strict";n(66024)},73513:(e,t,n)=>{"use strict";var i;!function(e){e.Cookies="cookies",e.GlobalWallet="globalWallet"}(i||(i={}))},74017:(e,t,n)=>{"use strict";n(66024)},74198:(e,t,n)=>{"use strict";n(66024)},74230:(e,t,n)=>{"use strict";var i;(i||(i={})).Track="track"},74484:(e,t,n)=>{"use strict";n(66024),n(85447),n(40953),n(24734)},74907:(e,t,n)=>{"use strict";n(51227)},75942:(e,t,n)=>{"use strict";var i;!function(e){e.Days="days",e.Hours="hours",e.Minutes="minutes"}(i||(i={}))},76335:(e,t,n)=>{"use strict";n(66024)},76873:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((i=i.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.TONProvider=void 0;let r=n(59564),o=n(83819),s=n(55263),a=n(15423);class c{constructor(){this.signalChainConnectResult=void 0,this.accountChangedTONHandler=null}send(e){return i(this,void 0,void 0,function*(){try{(0,o.logDebug)("TONProvider send request:",(0,o.safeJsonStringify)(e));let t=null;if("ton_sendTransaction"===e.method)e.params&&(t={method:"sendTransaction",params:[JSON.stringify(e.params)],id:Date.now().toString()},(0,o.logDebug)("TONProvider tonParams first:",JSON.stringify(t)));else throw new r.OKXConnectError(r.OKX_CONNECT_ERROR_CODES.METHOD_NOT_SUPPORTED);if(t){let n=yield window.okxTonWallet.tonconnect.send(t);if((0,o.logDebug)("TONProvider send request result:",(0,o.safeJsonStringify)(n)),n.error)throw new r.OKXConnectError(n.error.code,n.error.message);return{result:n.result,method:e.method}}throw new r.OKXConnectError(r.OKX_CONNECT_ERROR_CODES.METHOD_NOT_SUPPORTED)}catch(e){throw(0,o.logDebug)("TONProvider encountered an error:",e),e}})}connectReady(){return!0}restoreConnect(){return Promise.resolve()}parseConnectResponse(e,t,n,c,l,d){return i(this,void 0,void 0,function*(){try{let i=[];c.forEach(e=>{e.namespace===r.NameSpaceKeyTON&&i.push(...e.chains)});let u=[],h={};if(i.forEach(e=>{(0,o.getChainId)(e);let t=l.address.find(t=>"607"===t.chainId&&607===t.coinType||t.namespaceChainId===e);t&&(u.push(e+":"+t.address),h[e]={publicKey:t.publicKey})}),(0,o.logDebug)("tonprovider parseConnectResponse needPop and addresses: ",e,JSON.stringify(u)),u&&u.length>0){let i,l=c.find(e=>e.namespace===r.NameSpaceKeyTON);if((0,o.logDebug)("tonprovider parseConnectResponse ton: ",JSON.stringify(l)),l&&l.params&&d&&d.manifestUrl){this.dappInfo=d;let n=[l.params.ton_addr],r={manifestUrl:d.manifestUrl,items:n};(e||t)&&l.params.ton_proof&&n.push(l.params.ton_proof),(0,o.logDebug)("parseConnectResponse ton connect params: ",JSON.stringify(r)),i=(0,s.isDevice)("mobile")?yield window.okxTonWallet.tonconnect.connect(2,r):e||t?yield window.okxTonWallet.tonconnect.connect(2,r):yield window.okxTonWallet.tonconnect.restoreConnection()}else throw new r.OKXConnectError(r.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"manifestUrl is nil");if(n&&this.signalChainConnectResult&&(i=this.signalChainConnectResult,this.signalChainConnectResult=void 0),(0,o.logDebug)("parseConnectResponse ton connect result: ",JSON.stringify(i)),i&&l){if("connect_error"===i.event)throw new r.OKXConnectError(i.payload.code,i.payload.message);{let e=i.payload.items.find(e=>"ton_addr"===e.name),t=i.payload.items.find(e=>"ton_proof"===e.name);return(0,o.logDebug)("tonprovider connect isSignalChain: ",n),{namespace:r.NameSpaceKeyTON,addresses:u,methods:[...a.TONMethods],extra:h,data:{ton_addr:e,ton_proof:t,manifestUrl:d.manifestUrl}}}}}return}catch(e){throw(0,o.logDebug)("tonprovider parseConnectResponse error: ",JSON.stringify(e)),e}})}connect(e,t){return i(this,void 0,void 0,function*(){if(e&&t&&t.manifestUrl&&e.params){this.dappInfo=t;let n=[e.params.ton_addr],i={manifestUrl:t.manifestUrl,items:n};e.params.ton_proof&&n.push(e.params.ton_proof),(0,o.logDebug)("tonprovider connect params: ",JSON.stringify(i));try{let e=yield window.okxTonWallet.tonconnect.connect(2,i);return(0,o.logDebug)("tonprovider connect tonResult: ",JSON.stringify(e)),this.signalChainConnectResult=e,e}catch(e){throw(0,o.logDebug)("tonprovider connect error: ",JSON.stringify(e)),new r.OKXConnectError(r.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"tonconnect error")}}else throw new r.OKXConnectError(r.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"manifestUrl or params is nil")})}singleConnect(e,t){return this.connect(e,t)}addListener(e){console.log("window.okxwallet configEventWithKey:","ton"),this.accountChangedTONHandler=()=>{console.log("window.okxwallet configEventWithKey_TON:",Date.now(),"ton"),e()},window.okxTonWallet.tonconnect.on("accountChanged",this.accountChangedTONHandler)}removeListener(){this.accountChangedTONHandler&&window.okxTonWallet.tonconnect.off("accountChanged",this.accountChangedTONHandler)}}t.TONProvider=c},76919:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.creatNotSupportMethodItemReplay=t.connectMethodsAdaptOldVersion=void 0;var i=n(64557);Object.defineProperty(t,"connectMethodsAdaptOldVersion",{enumerable:!0,get:function(){return i.connectMethodsAdaptOldVersion}}),Object.defineProperty(t,"creatNotSupportMethodItemReplay",{enumerable:!0,get:function(){return i.creatNotSupportMethodItemReplay}})},77098:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OkxwalletInjectConnector=void 0;let i=n(25840);class r extends i.InjectConnector{constructor(){super(),this.walletName="OKX Wallet extension",this.walletNameKey="walletModal.mobileConnectionModal.connectInjected"}}t.OkxwalletInjectConnector=r},77549:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((i=i.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.AptosProvider=void 0;let r=n(59564),o=n(83819),s=n(15423),a=n(55263),c=n(331),l=Object.freeze(["637","70000060","70000066"]),d=new Map;d.set("aptos:637","Mainnet"),d.set("aptos:70000060","Movement Testnet"),d.set("aptos:70000066","Movement Mainnet");class u{send(e){return i(this,void 0,void 0,function*(){try{let t;(0,o.logDebug)("AptosProvider send request:",(0,o.safeJsonStringify)(e)),yield this.restoreConnect();let n=yield window.okxwallet.aptos.network(),i=this.searchChainIdToInjectChainName(e.chainId);if((0,o.logDebug)("AptosProvider send network and searchNetwork:",n,"-----",i),!(n&&i&&n.toLowerCase()===i.toLowerCase()))throw new r.OKXConnectError(r.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`Please switch your wallet link to '${i}'`);let s=e.method;switch(s){case"aptos_signMessage":if(e.injectParams){let n=yield window.okxwallet.aptos.signMessage(e.injectParams);return t={method:e.method,result:n.signature,injectResult:n},(0,o.logDebug)("AptosProvider send result:",(0,o.safeJsonStringify)(t)),t}throw new r.OKXConnectError(r.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`param is error method: '${s}'`);case"aptos_signTransaction":{(0,o.logDebug)("AptosProvider Method>>>> :",s);let n=yield window.okxwallet.aptos.signTransaction(e.params);return t={method:e.method,result:n},(0,o.logDebug)("AptosProvider send result:",(0,o.safeJsonStringify)(t)),t}case"aptos_signAndSubmitTransaction":{(0,o.logDebug)("AptosProvider Method>>>> :",s);let n=yield window.okxwallet.aptos.signAndSubmitTransaction(e.params);return t={method:e.method,result:n.hash},(0,o.logDebug)("AptosProvider send result:",(0,o.safeJsonStringify)(t)),t}default:throw new r.OKXConnectError(r.OKX_CONNECT_ERROR_CODES.METHOD_NOT_SUPPORTED,` method: '${s}'`)}}catch(e){throw(0,o.logDebug)("AptosProvider send error:",e),e}})}searchChainIdToInjectChainName(e){let t=e;return d.forEach((n,i)=>{e.includes(i)&&(t=n)}),t}connectReady(){return!0}disconnect(){}restoreConnect(){return(0,a.isDevice)("mobile")?this.connect():Promise.resolve()}parseConnectResponse(e,t,n,c,d,u){return i(this,void 0,void 0,function*(){let e,t=[];c.forEach(e=>{e.namespace===r.NameSpaceKeyAptos&&t.push(...e.chains)});let n=[],i={};if((0,o.logDebug)("AptosProvider parseConnectResponse connectChain",JSON.stringify(t)),!(0,a.isDevice)("mobile")&&t&&t.length>0&&(e=(yield window.okxwallet.aptos.connect()).publicKey),t.forEach(t=>{let r=d.address.find(e=>l.includes(e.chainId)&&637===e.coinType||e.namespaceChainId===t);r&&(n.push(t+":"+r.address),i[t]={publicKey:r.publicKey?r.publicKey:e})}),(0,o.logDebug)("AptosProvider parseConnectResponse addresses",JSON.stringify(n)),n&&n.length>0)return{namespace:r.NameSpaceKeyAptos,addresses:n,methods:[...s.AptosMethods],extra:i}})}connect(){return i(this,void 0,void 0,function*(){return window.okxwallet.aptos.connect()})}singleConnect(){return this.connect()}addListener(e){window.okxwallet.aptos.onAccountChange(t=>{console.log("window.okxwallet configEventWithKey_aptos:",Date.now(),c.key,JSON.stringify(t)),t&&e()})}removeListener(){}}t.AptosProvider=u},77551:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GENERIC_SUBPROVIDER_NAME=t.RPC_URL=t.STORAGE=t.CONTEXT=t.WC_VERSION=t.PROTOCOL=t.RELAY_URL=t.LOGGER=void 0,t.LOGGER="error",t.RELAY_URL="wss://relay.walletconnect.com",t.PROTOCOL="wc",t.WC_VERSION=2,t.CONTEXT="universal_provider",t.STORAGE=`${t.PROTOCOL}@${t.WC_VERSION}:${t.CONTEXT}:`,t.RPC_URL="https://rpc.walletconnect.com/v1/",t.GENERIC_SUBPROVIDER_NAME="generic"},77624:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((i=i.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.SignClient=void 0;let r=n(86745),o=n(27145),s=n(64557),a=n(9407);class c extends r.ISignClient{constructor(e,t){super(e),this.connect=e=>i(this,void 0,void 0,function*(){return new Promise((t,n)=>i(this,void 0,void 0,function*(){try{var c=[];(0,r.logDebug)("client connect params >>>",JSON.stringify(e));var l={name:"requestAccounts",requiredNamespaces:(0,o.nameSpaceToConnectWalletNameSpace)(e.namespaces),optionalNamespaces:(0,o.nameSpaceToConnectWalletNameSpace)(e.optionalNamespaces)};this.engine.setSessionConnectingListener(()=>{(0,r.logDebug)("sessionConnectingListener >>>"),this.events.emit(a.PROVIDER_EVENTS.SESSION_CONNECTING)}),e.signRequest&&(l.connectRequestMethods=yield(0,s.connectMethodsToConnectWalletMethods)(e.signRequest,l.requiredNamespaces)),c.push(l),(0,r.logDebug)("client connect connectRequest >>>",JSON.stringify(c)),this.engine.universalConnect(c,Object.assign({dappInfo:this.metadata},e.sessionConfig),e=>{e&&e.connectRequest&&((0,r.logDebug)("universalConect info.connectRequest :",e.connectRequest),(0,r.logDebug)("universalConect url:",(0,r.getOKXLink)(e.connectRequest,this.sessionConfig.useMini)),this.events.emit("display_uri",(0,r.getOKXLink)(e.connectRequest,this.sessionConfig.useMini)),this.events.emit("short_display_uri",(0,r.getAppWalletShortDeepLink)(e.connectRequest.topic,e.connectRequest.clientId)),(0,r.logDebug)(`universalConect EngineConnectInfo  ${JSON.stringify(e)}`),this.events.emit("okx_engine_connect_params",e))}).then(n=>i(this,void 0,void 0,function*(){(0,o.fillParamsToSession)(n,e.namespaces,e.optionalNamespaces,this.sessionConfig),(0,r.logDebug)(`signClient: connect: session ${JSON.stringify(n)}`),e.signRequest&&(yield(0,s.connectMethodsResponseUpdate)(n,e.signRequest)),t(n)})).catch(e=>{(0,r.logDebug)(`signClient: connect: catch ${JSON.stringify(e)}`),this.events.emit("connect_error",e),n(e)})}catch(e){(0,r.logDebug)(`signClient: connect:  ${JSON.stringify(e)}`),n(e)}}))}),this.restoreconnect=e=>i(this,void 0,void 0,function*(){return new Promise((t,n)=>{this.engine.restoreconnect(e,e=>{e?t(e):n()})})}),this.reject=e=>i(this,void 0,void 0,function*(){}),this.request=e=>i(this,void 0,void 0,function*(){return new Promise((t,n)=>i(this,void 0,void 0,function*(){var i,o;(0,r.logDebug)("clint request --params>>>> >",null===(i=this.sessionConfig)||void 0===i?void 0:i.openUniversalUrl,(0,r.safeJsonStringify)(e));try{(null===(o=this.sessionConfig)||void 0===o?void 0:o.openUniversalUrl)&&(0,r.isIos)()&&this.openOKXWallet(),yield this.engine.send(e,{resolve:e=>{if(delete e.requestId,(0,r.logDebug)("clint request --response >",(0,r.safeJsonStringify)(e)),"error"in e&&e.error){let t=e.error;n(new r.OKXConnectError(e.error.code,e.method+":"+t.message))}else t(e)},onAck:()=>{var e;!(0,r.isIos)()&&(null===(e=this.sessionConfig)||void 0===e?void 0:e.openUniversalUrl)&&this.openOKXWallet()}})}catch(e){(0,r.logDebug)("clint request --error:",e),n(e)}}))}),this.disconnect=()=>i(this,void 0,void 0,function*(){return new Promise((e,t)=>{this.engine.send({method:"disconnect"},{onAck:()=>{e()}},864e5).catch(e=>{console.log(`disconnect : ${JSON.stringify(e)}`),t(e)})})}),this.engine=new r.Engine(e.name),this.events=t,this.metadata=e}setAccountChangeListener(e){this.engine.setAccountChangeListener(e)}openOKXWallet(){(0,r.logDebug)("bridge-provider ==>> connect_5"),this.engine.openWallet({tmaReturnUrl:this.sessionConfig.tmaReturnUrl})}syncAllAddress(){return i(this,void 0,void 0,function*(){return new Promise((e,t)=>{this.engine.send({method:"sync_all_addresses"},{resolve:n=>{if(delete n.requestId,(0,r.logDebug)("clint syncAllAddress --response >",JSON.stringify(n)),"error"in n&&n.error){let e=n.error;t(new r.OKXConnectError(n.error.code,n.method+":"+e.message))}else{let t=n.result;e((0,s.syncResoonseToRequire)(t))}}}).catch(e=>{console.log(`disconnect : ${JSON.stringify(e)}`),t(e)})})})}registerConnector(e){this.engine.registerConnector(e)}openWallet(e,t){this.engine.openWallet(e,t)}setConnectConnector(e){this.engine.setConnectConnector(e)}needCheckRequestMethod(){try{return!(this.engine.getConnector()instanceof r.InjectConnector)}catch(e){return!0}}}t.SignClient=c},77663:(e,t,n)=>{"use strict";var i;!function(e){e.CrossPlatform="cross-platform",e.Platform="platform"}(i||(i={}))},77712:(e,t,n)=>{"use strict";var i;!function(e){e.Evm="EVM",e.Sol="SOL"}(i||(i={}))},79185:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.okxfromString=function(e,t="utf8"){let n=l[t];if((0,r.logDebug)("okxfromstring ====> "),!n)throw Error(`Unsupported encoding "${t}"`);return n.decoder.decode(`${n.prefix}${e}`)},t.okxtoString=function(e,t="utf8"){let n=l[t];if((0,r.logDebug)("okxtoString ====> "),!n)throw Error(`Unsupported encoding "${t}"`);return n.encoder.encode(e).substring(1)},t.alloc=function(e=0){return new Uint8Array(e)},t.allocUnsafe=o;let i=n(21098),r=n(86273);function o(e=0){return new Uint8Array(e)}function s(e,t,n,i){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:n},decoder:{decode:i}}}let a=s("utf8","u",e=>"u"+new TextDecoder("utf8").decode(e),e=>new TextEncoder().encode(e.substring(1))),c=s("ascii","a",e=>{let t="a";for(let n=0;n<e.length;n++){let i=e[n];i&&String.fromCharCode(i)&&(t+=String.fromCharCode(i))}return t},e=>{let t=o((e=e.substring(1)).length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}),l=Object.assign({utf8:a,"utf-8":a,hex:i.bases.base16,latin1:c,ascii:c,binary:c},i.bases)},79626:(e,t,n)=>{"use strict";n(66024),n(83404),n(77663),n(9035),n(24840)},79909:(e,t,n)=>{"use strict";n(66024)},79922:(e,t,n)=>{"use strict";n(67219)},80098:(e,t,n)=>{"use strict";var i,r,o,s;Object.defineProperty(t,"__esModule",{value:!0}),t.removeUrlLastSlash=p,t.addPathToUrl=function(e,t){return p(e)+"/"+t},t.getUniversalLink=g,t.openOKXDeeplink=function(e){var t;let n=g(e),i=!!(null===(t=m())||void 0===t?void 0:t.TelegramWebviewProxy);console.log("openOKXDeeplink fullUrl:",n),!(0,d.isIos)()||(0,d.isInIOSLine)()?i?window.open(e,"_blank"):window.location.href=e:f(n)},t.openOKXUniversalLink=f,t.openOKXDeeplinkWithFallback=function(e){var t;let n=g(e),i=!!(null===(t=m())||void 0===t?void 0:t.TelegramWebviewProxy);console.log("openOKXDeeplinkWithFallback fullUrl:",n);let r=!1;a.standardUniversalLink,console.log("openOKXDeeplinkWithFallback standardUniversalLink:",a.standardUniversalLink);let o=null,s=()=>{console.log("fallbackToDownloadPage :empty")},c=(0,d.isInIOSChrome)()||(0,d.isInIOSLine)()||(0,d.isInIOSLark)()||(0,d.isInIOSWeChat)();if((0,d.isIos)()?c&&(s=()=>{console.log("windowOpen --\x3e fallbackToDownloadPage --",r),r||(console.log("windowOpen --\x3e fallbackToDownloadPage universal link"),window.open(n,"_self"))}):s=()=>{r||(o?o.open(n,"_self"):window.open(n,"_blank"))},!(0,d.isIos)()||c){i?o=window.open(e,"_blank"):(console.log("windowOpen --\x3e deeplinkUrl"),window.location.href=e),setTimeout(s,3e3);let t=0,n=setInterval(()=>{console.log("windowOpen --\x3e interval:",++t,document.hidden,document.visibilityState),document.hidden&&(r=!0),(t>10||document.hidden)&&(clearInterval(n),console.log("windowOpen :cleat: ${count}"))},200);window.addEventListener("blur",()=>{console.log("windowOpen :blur"),r=!0},{once:!0}),document.addEventListener("visibilitychange",()=>{console.log("windowOpen :visibilitychange:",document.visibilityState),"hidden"===document.visibilityState&&(r=!0)})}else i?window.open(n,"_blank"):(console.log("windowOpen[before]: ",Date.now()),(null==window?void 0:window.okxLogDebug)?window.open(n,"_blank"):window.open(n,"_self"),console.log("windowOpen[after]: ",Date.now()))},t.getWindow=m,t.isTelegramUrl=function(e){if(!e)return!1;let t=new URL(e);return"tg:"===t.protocol||"t.me"===t.hostname},t.encodeTelegramUrlParameters=function(e){let t=e;return(t=(t=(t=(t=(t=t.replace(/\./g,"%2E")).replace(/-/g,"%2D")).replace(/_/g,"%5F")).replace(/&/g,"-")).replace(/=/g,"__")).replace(/%/g,"--")},t.encodeConnectParams=v,t.encodeTWAConnectURLParams=O,t.getAppWalletDeepLink=function(e){return`${a.standardDeeplink}?param=${e}`},t.getAppWalletShortDeepLink=_,t.getTelegramWalletTWAUrl=C,t.openOKXTMAWalletlinkWithFallback=function(e){var t,n,i,r,o;(0,c.logDebug)("[TWA] open link:",e,"isInTMA ==> ",N()),N()?(null===(n=null===(t=m())||void 0===t?void 0:t.Telegram)||void 0===n?void 0:n.WebApp)?null===(o=null===(r=null===(i=m())||void 0===i?void 0:i.Telegram)||void 0===r?void 0:r.WebApp)||void 0===o||o.openTelegramLink(e):(0,u.sendOpenTelegramLink)(e):(0,l.getTestTwaUrl)()?window.open(e,"_blank"):window.open(e,"_self")},t.isInTMA=N,t.isInTelegramBrowser=function(){var e;let t=!!(null===(e=m())||void 0===e?void 0:e.TelegramWebview);return(N()||t)&&"unknown"===b},t.getOKXLink=function(e,t=!1,n){if((0,c.logDebug)(`url  getOKXLink() called connectRequest==> ${JSON.stringify(e)}  useMini=> ${t}  tmaReturnUrl==> ${n}`),t)return e?C(O(e),null!=n?n:"back"):C(void 0,null!=n?n:"back");if((0,d.useShortLink)())return e?_(e.topic,e.clientId):l.shortUniversalLink;if(!e)return a.standardDeeplink;{let t=v(e);return`${a.standardDeeplink}?param=${t}`}};let a=n(59564),c=n(86273),l=n(33026),d=n(34554),u=n(66776),h=n(32945);function p(e){return"/"===e.slice(-1)?e.slice(0,-1):e}function g(e,t=!1){console.log("getUniversalLink deeplinkUrl:",e,", useStandardUniversalLink:",t);let n=encodeURIComponent(e);return console.log("getUniversalLink standardUniversalLink:",a.standardUniversalLink),console.log("getUniversalLink standardUniversalLink:",`${a.standardUniversalLink}?deeplink=${n}`),`${a.standardUniversalLink}?deeplink=${n}`}function f(e){(0,d.isIos)()?N()?window.open(e,"_blank"):(console.log("windowOpen[before]: ",Date.now()),(null==window?void 0:window.okxLogDebug)?window.open(e,"_blank"):window.open(e,"_self"),console.log("windowOpen[after]: ",Date.now())):window.open(e,"_blank")}function m(){if("undefined"!=typeof window)return window}function v(e){let t=JSON.stringify(Object.assign(Object.assign({},e),{protocolVersion:h.CONNECT_PROTOCOL_VER}));(0,c.logDebug)("url encodeConnectParams connectRequestStr ",t);let n=btoa(String.fromCharCode(...new TextEncoder().encode(t)));return(0,c.logDebug)("url encodeConnectParams base64Encoded ",n),n}function O(e){let t=JSON.stringify({topic:e.topic,clientId:e.clientId});return(0,c.logDebug)("url encodeConnectParams connectRequestStr",t),btoa(String.fromCharCode(...new TextEncoder().encode(t)))}function _(e,t){return`${l.shortUniversalLink}?topic=${e}${(0,d.getLastSixMd5Hash)(t)}`}function C(e,t){let n={okxconnect:"",redirect:"",extraparams:"",fromtg:!1};e&&(n.okxconnect=e),t&&(n.redirect=t),N()?n.fromtg=!0:n.fromtg=!1,(0,c.logDebug)("getTelegramWalletTWAUrl redirect:",n.redirect);let i=JSON.stringify(n),r=btoa(String.fromCharCode(...new TextEncoder().encode(i))),o=(0,d.toSafeBase64FromBase64)(r);if((0,c.logDebug)("[TWA] open link:",n,r),e||t){if(N())return(0,l.getTestTgTwaUrl)()?`${(0,l.getTestTgTwaUrl)()}?startapp=${o}`:`https://t.me/${l.tgwalletName}/start?startapp=${o}`;if((0,l.getTestTwaUrl)())return`${(0,l.getTestTwaUrl)()}?tgWebAppStartParam=${o}`;if(!(0,l.getTestTgTwaUrl)())return`tg://resolve?domain=${l.tgwalletName}&appname=${l.tgwalletAppName}&startapp=${o}`;{let e=(0,l.getBotNameAndAppName)((0,l.getTestTgTwaUrl)());if(e){let{botName:t,appName:n}=e;return`tg://resolve?domain=${t}&appname=${n}&startapp=${o}`}return`tg://resolve?domain=${l.tgwalletName}&appname=${l.tgwalletAppName}&startapp=${o}`}}if(N())return(0,l.getTestTgTwaUrl)()?`${(0,l.getTestTgTwaUrl)()}`:`https://t.me/${l.tgwalletName}/start`;if((0,l.getTestTwaUrl)())return`${(0,l.getTestTwaUrl)()}`;if(!(0,l.getTestTgTwaUrl)())return`tg://resolve?domain=${l.tgwalletName}&appname=${l.tgwalletAppName}`;{let e=(0,l.getBotNameAndAppName)((0,l.getTestTgTwaUrl)());if(e){let{botName:t,appName:n}=e;return`tg://resolve?domain=${t}&appname=${n}`}return`tg://resolve?domain=${l.tgwalletName}&appname=${l.tgwalletAppName}`}}function y(e){try{return e=e.replace(/\+/g,"%20"),decodeURIComponent(e)}catch(t){return e}}let E={};try{let e=location.hash.toString();E=function(e){e=e.replace(/^#/,"");let t={};if(!e.length)return t;if(0>e.indexOf("=")&&0>e.indexOf("?"))return t._path=y(e),t;let n=e.indexOf("?");n>=0&&(t._path=y(e.substr(0,n)),e=e.substr(n+1));let i=function(e){let t,n,i,r,o={};if(!e.length)return o;let s=e.split("&");for(t=0;t<s.length;t++)i=y((n=s[t].split("="))[0]),r=null==n[1]?null:y(n[1]),o[i]=r;return o}(e);for(let e in i)t[e]=i[e];return t}(e)}catch(e){}let b="unknown";if((null==E?void 0:E.tgWebAppPlatform)&&(b=null!==(i=E.tgWebAppPlatform)&&void 0!==i?i:"unknown"),"unknown"===b){let e=m();b=null!==(s=null===(o=null===(r=null==e?void 0:e.Telegram)||void 0===r?void 0:r.WebApp)||void 0===o?void 0:o.platform)&&void 0!==s?s:"unknown"}function N(){var e;return"unknown"!==b||!!(null===(e=m())||void 0===e?void 0:e.TelegramWebviewProxy)}},80407:(e,t,n)=>{"use strict";n(66024)},80642:(e,t,n)=>{"use strict";var i;!function(e){e.Done="done",e.VerifyEmail="verify-email",e.VerifiedAndTransferred="verified-and-transferred",e.VerifySms="verify-sms"}(i||(i={}))},81301:(e,t,n)=>{"use strict";var i;!function(e){e.ConnectOnly="connect_only",e.Design="design",e.ApiKeys="api_keys",e.VisitManagement="visit_management",e.SettingsGeneral="settings_general",e.SettingsSecurity="settings_security",e.SettingsPrivacy="settings_privacy",e.AdminOrgs="admin_orgs",e.AdminBilling="admin_billing",e.AdminMembers="admin_members",e.UserManagement="user_management"}(i||(i={}))},82444:(e,t,n)=>{"use strict";n.d(t,{U:()=>d});var i=n(94295),r=n(60368),o=n(46507),s=n(4329),a=n(2700),c=n(27116);let l=e=>{let t=JSON.stringify(e,(e,t)=>"bigint"==typeof t?t.toString():t);return btoa(Array.from(new TextEncoder().encode(t),e=>String.fromCodePoint(e)).join(""))},d=async e=>{if(0===e.length)return[];let t=e.map(e=>{var t;if(t=e.account.kernelPluginManager,t?.getPluginSerializationParams===void 0)throw Error("Account plugin is not a permission validator");return e.account.kernelPluginManager.getPluginSerializationParams()}),n=e.map(e=>e.account.kernelPluginManager.getAction()),d=e.map(e=>e.account.kernelPluginManager.getValidityData()),u=(await Promise.all(e.map(async e=>e.account.kernelPluginManager.getPluginsEnableTypedData(e.account.address)))).map(e=>(0,r.Zh)(e)),h=new i.MerkleTree(u,o.S,{sortPairs:!0}),p=h.getHexRoot(),g=(0,s.A)({raw:p}),f="0x";e[0].account.kernelPluginManager.sudoValidator?.source==="MultiChainECDSAValidator"&&(f=await e[0].account.kernelPluginManager.sudoValidator?.signMessage({message:{raw:p}})),e[0].account.kernelPluginManager.sudoValidator?.source==="MultiChainWebAuthnValidator"&&(f=await e[0].account.kernelPluginManager.sudoValidator?.signMessage({message:{raw:g}}));let m=await Promise.all(e.map(async(e,t)=>{if(!e.account.kernelPluginManager.sudoValidator)throw Error("No sudo validator found, check if sudo validator is multi-chain validator");let n=h.getHexProof(u[t]),i=(0,a.h)([{name:"proof",type:"bytes32[]"}],[n]);if("MultiChainECDSAValidator"===e.account.kernelPluginManager.sudoValidator.source)return(0,c.aP)([f,p,i]);if("MultiChainWebAuthnValidator"===e.account.kernelPluginManager.sudoValidator.source){let e=(0,c.aP)([p,i]);return(0,a.h)([{name:"merkleData",type:"bytes"},{name:"signature",type:"bytes"}],[e,f])}throw Error("Unknown multi-chain validator")})),v=await Promise.all(e.map(async e=>({initCode:await e.account.generateInitCode(),accountAddress:e.account.address})));return e.map((e,i)=>l({permissionParams:t[i],action:n[i],validityData:d[i],accountParams:v[i],enableSignature:m[i],privateKey:e.privateKey}))}},83095:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(t,n);(!r||("get"in r?!t.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,r)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),r(n(94517),t),r(n(68737),t)},83166:(e,t,n)=>{"use strict";n(66024),n(14937),n(85447),n(25389),n(40953),n(12904),n(63813)},83404:(e,t,n)=>{"use strict";n(66024)},83442:e=>{"use strict";e.exports=JSON.parse('{"name":"@okxconnect/core","version":"1.7.8","description":"OKX Connect core","main":"./src/index.js","keywords":["OKXConnect","OKX Connect"],"scripts":{"build":"npx tsc","local":"yarn install && npx tsc","remove":"rm -rf ./src  && rm -rf ./node_modules"},"author":"OKX Wallet","license":"MIT","dependencies":{"@stablelib/ed25519":"^1.0.2","@stablelib/random":"^1.0.1","@stablelib/sha256":"1.0.1","bs58":"^5.0.0","core-js":"2.6.12","cross-fetch":"^4.0.0","crypto-js":"^4.2.0","eventemitter3":"^5.0.1","isutf8":"^4.0.0","localforage":"^1.10.0","multiformats":"9.4.2","process":"^0.11.10","tweetnacl":"^1.0.3","tweetnacl-util":"^0.15.1","ua-parser-js":"^1.0.35","uint8arrays":"3.1.0"},"devDependencies":{"@types/crypto-js":"^4.2.2","@types/ua-parser-js":"^0.7.36","assert":"^2.1.0","eslint":"^9.7.0","events":"^3.3.0","jest":"^29.7.0","ts-loader":"^9.5.1","typescript":"^5.5.2"},"peerDependencies":{"@solana/web3.js":"^1.78.4"}}')},83646:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.SessionCrypto=void 0;let r=i(n(87124)),o=n(34554);class s{constructor(e){this.nonceLength=24,this.sessionKeyPair=e?this.createKeypairFromString(e):this.createKeypair()}createKeypair(){return r.default.box.keyPair()}createKeypairFromString(e){return{publicKey:(0,o.hexToByteArray)(e.publicKey),secretKey:(0,o.hexToByteArray)(e.secretKey)}}createNonce(){return r.default.randomBytes(this.nonceLength)}get keyPair(){return this.sessionKeyPair}encrypt(e,t){let n=new TextEncoder().encode(e),i=this.createNonce(),s=r.default.box(n,i,(0,o.hexToByteArray)(t),this.keyPair.secretKey),a=(0,o.concatUint8Arrays)(i,s);var c=(0,o.toHexString)(a),l=new TextEncoder().encode(c);return(0,o.base64encode)(l,!1)}encryptWallet(e,t){let n=new TextEncoder().encode(e),i=this.createNonce(),s=r.default.box(n,i,(0,o.hexToByteArray)(t),this.keyPair.secretKey),a=(0,o.concatUint8Arrays)(i,s);return(0,o.base64encode)(a,!1)}decrypt(e,t){let n=(0,o.base64decode)(e,!0).toUint8Array(),[i,s]=(0,o.splitToUint8Arrays)(n,this.nonceLength),a=r.default.box.open(s,i,(0,o.hexToByteArray)(t),this.keyPair.secretKey);if(!a)throw Error(`Decryption error: 
 message: ${e.toString()} 
 sender pubkey: ${t.toString()} 
 keypair pubkey: ${(0,o.toHexString)(this.keyPair.publicKey)} 
 keypair secretkey: ${(0,o.toHexString)(this.keyPair.secretKey)}`);return new TextDecoder().decode(a)}decryptWallet(e,t){let n=(0,o.base64decode)(e,!0),i=(0,o.hexToByteArray)(n.toString()),[s,a]=(0,o.splitToUint8Arrays)(i,this.nonceLength),c=r.default.box.open(a,s,(0,o.hexToByteArray)(t),this.keyPair.secretKey);if(!c)throw Error(`Decryption error: 
 message: ${e.toString()} 
 sender pubkey: ${t.toString()} 
 keypair pubkey: ${(0,o.toHexString)(this.keyPair.publicKey)} 
 keypair secretkey: ${(0,o.toHexString)(this.keyPair.secretKey)}`);return new TextDecoder().decode(c)}stringifyKeypair(){return{publicKey:(0,o.toHexString)(this.keyPair.publicKey),secretKey:(0,o.toHexString)(this.keyPair.secretKey)}}}t.SessionCrypto=s},83819:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(t,n);(!r||("get"in r?!t.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,r)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.getNamespaceKeyByChain=t.chainName2IdMap=t.replaceChainIdToChainName=t.replaceChainNameToChainId=t.checkMetaData=t.versionCompare=t.isBrowser=t.isOS=t.isMobileUserAgent=t.openDeeplinkWithFallback=t.openLinkBlank=t.openLink=t.getChainId=t.useShortLink=t.toSafeBase64FromBase64=t.isValidObject=t.isIos=t.base64decode=t.base64encode=t.splitToUint8Arrays=t.concatUint8Arrays=t.toHexString=t.hexToByteArray=t.getOKXLink=t.openOKXUniversalLink=t.getAppWalletShortDeepLink=t.encodeTWAConnectURLParams=t.encodeConnectParams=t.openOKXTMAWalletlinkWithFallback=t.getTelegramWalletTWAUrl=t.getAppWalletDeepLink=t.encodeTelegramUrlParameters=t.isTelegramUrl=t.openOKXDeeplinkWithFallback=t.openOKXDeeplink=t.getUniversalLink=t.safeJsonStringify=t.safeJsonParse=t.getDefaultReporter=t.reportEvent=t.reportLog=t.logWarning=t.logError=t.logDebug=t.callForSuccess=void 0;var o=n(7053);Object.defineProperty(t,"callForSuccess",{enumerable:!0,get:function(){return o.callForSuccess}});var s=n(86273);Object.defineProperty(t,"logDebug",{enumerable:!0,get:function(){return s.logDebug}}),Object.defineProperty(t,"logError",{enumerable:!0,get:function(){return s.logError}}),Object.defineProperty(t,"logWarning",{enumerable:!0,get:function(){return s.logWarning}}),Object.defineProperty(t,"reportLog",{enumerable:!0,get:function(){return s.reportLog}}),Object.defineProperty(t,"reportEvent",{enumerable:!0,get:function(){return s.reportEvent}}),Object.defineProperty(t,"getDefaultReporter",{enumerable:!0,get:function(){return s.getDefaultReporter}}),r(n(72772),t),r(n(19207),t);var a=n(86094);Object.defineProperty(t,"safeJsonParse",{enumerable:!0,get:function(){return a.safeJsonParse}}),Object.defineProperty(t,"safeJsonStringify",{enumerable:!0,get:function(){return a.safeJsonStringify}});var c=n(80098);Object.defineProperty(t,"getUniversalLink",{enumerable:!0,get:function(){return c.getUniversalLink}}),Object.defineProperty(t,"openOKXDeeplink",{enumerable:!0,get:function(){return c.openOKXDeeplink}}),Object.defineProperty(t,"openOKXDeeplinkWithFallback",{enumerable:!0,get:function(){return c.openOKXDeeplinkWithFallback}}),Object.defineProperty(t,"isTelegramUrl",{enumerable:!0,get:function(){return c.isTelegramUrl}}),Object.defineProperty(t,"encodeTelegramUrlParameters",{enumerable:!0,get:function(){return c.encodeTelegramUrlParameters}}),Object.defineProperty(t,"getAppWalletDeepLink",{enumerable:!0,get:function(){return c.getAppWalletDeepLink}}),Object.defineProperty(t,"getTelegramWalletTWAUrl",{enumerable:!0,get:function(){return c.getTelegramWalletTWAUrl}}),Object.defineProperty(t,"openOKXTMAWalletlinkWithFallback",{enumerable:!0,get:function(){return c.openOKXTMAWalletlinkWithFallback}}),Object.defineProperty(t,"encodeConnectParams",{enumerable:!0,get:function(){return c.encodeConnectParams}}),Object.defineProperty(t,"encodeTWAConnectURLParams",{enumerable:!0,get:function(){return c.encodeTWAConnectURLParams}}),Object.defineProperty(t,"getAppWalletShortDeepLink",{enumerable:!0,get:function(){return c.getAppWalletShortDeepLink}}),Object.defineProperty(t,"openOKXUniversalLink",{enumerable:!0,get:function(){return c.openOKXUniversalLink}}),Object.defineProperty(t,"getOKXLink",{enumerable:!0,get:function(){return c.getOKXLink}});var l=n(34554);Object.defineProperty(t,"hexToByteArray",{enumerable:!0,get:function(){return l.hexToByteArray}}),Object.defineProperty(t,"toHexString",{enumerable:!0,get:function(){return l.toHexString}}),Object.defineProperty(t,"concatUint8Arrays",{enumerable:!0,get:function(){return l.concatUint8Arrays}}),Object.defineProperty(t,"splitToUint8Arrays",{enumerable:!0,get:function(){return l.splitToUint8Arrays}}),Object.defineProperty(t,"base64encode",{enumerable:!0,get:function(){return l.base64encode}}),Object.defineProperty(t,"base64decode",{enumerable:!0,get:function(){return l.base64decode}}),Object.defineProperty(t,"isIos",{enumerable:!0,get:function(){return l.isIos}}),Object.defineProperty(t,"isValidObject",{enumerable:!0,get:function(){return l.isValidObject}}),Object.defineProperty(t,"toSafeBase64FromBase64",{enumerable:!0,get:function(){return l.toSafeBase64FromBase64}}),Object.defineProperty(t,"useShortLink",{enumerable:!0,get:function(){return l.useShortLink}}),Object.defineProperty(t,"getChainId",{enumerable:!0,get:function(){return l.getChainId}});var d=n(95576);Object.defineProperty(t,"openLink",{enumerable:!0,get:function(){return d.openLink}}),Object.defineProperty(t,"openLinkBlank",{enumerable:!0,get:function(){return d.openLinkBlank}}),Object.defineProperty(t,"openDeeplinkWithFallback",{enumerable:!0,get:function(){return d.openDeeplinkWithFallback}}),Object.defineProperty(t,"isMobileUserAgent",{enumerable:!0,get:function(){return d.isMobileUserAgent}}),Object.defineProperty(t,"isOS",{enumerable:!0,get:function(){return d.isOS}}),Object.defineProperty(t,"isBrowser",{enumerable:!0,get:function(){return d.isBrowser}});var u=n(66776);Object.defineProperty(t,"versionCompare",{enumerable:!0,get:function(){return u.versionCompare}});var h=n(51226);Object.defineProperty(t,"checkMetaData",{enumerable:!0,get:function(){return h.checkMetaData}});var p=n(34554);Object.defineProperty(t,"replaceChainNameToChainId",{enumerable:!0,get:function(){return p.replaceChainNameToChainId}}),Object.defineProperty(t,"replaceChainIdToChainName",{enumerable:!0,get:function(){return p.replaceChainIdToChainName}}),Object.defineProperty(t,"chainName2IdMap",{enumerable:!0,get:function(){return p.chainName2IdMap}}),Object.defineProperty(t,"getNamespaceKeyByChain",{enumerable:!0,get:function(){return p.getNamespaceKeyByChain}})},84126:(e,t,n)=>{"use strict";var i;!function(e){e.Active="active",e.Pending="pending",e.Error="error"}(i||(i={}))},84396:(e,t,n)=>{"use strict";n(66024),n(67107),n(29532)},84697:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((i=i.apply(e,t||[])).next())})},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.OKXUniversalProvider=void 0;let o=n(7175),s=n(29399),a=n(9407),c=r(n(22585)),l=n(77624),d=n(86745),u=n(86745),h=n(27145),p=r(n(98112)),g=r(n(32283)),f=r(n(70062)),m=r(n(51997)),v=r(n(40104)),O=r(n(32103)),_=n(64675),C=n(67685),y=n(89025),E=r(n(41452));class b{static init(e){return i(this,void 0,void 0,function*(){let t;return(0,u.logDebug)("OKXUniversalProvider init() called"),(0,u.checkMetaData)(e.dappMetaData),(0,_.setGlobal)("disableProviderPing",!0),(0,u.getDefaultReporter)().configVersionAndSide("universalprovider","dapp",e.dappMetaData.name),window&&window.okxConnectUniversalinwindow&&window.okxConnectUniversalinwindow instanceof b?((0,u.logDebug)("OKXUniversalConnect init() old called"),t=window.okxConnectUniversalinwindow):((0,u.logDebug)("OKXUniversalConnect init() new called"),t=new b(e),window&&(window.okxConnectUniversalinwindow=t),yield t.initialize()),t})}constructor(e){this.rpcProviders={},this.events=new c.default,e.connector&&0!=e.connector.length||(e.connector=[new u.AppwalletConnector,new u.TgwalletConnector]),this.providerOpts=e}request(e,t){return i(this,void 0,void 0,function*(){if((0,u.logDebug)("OKXUniversalProvider request() called"),(0,u.reportLog)("OKXUniversalProvider request() called"),!this.connected())throw new u.OKXConnectError(u.OKX_CONNECT_ERROR_CODES.NOT_CONNECTED_ERROR);(0,u.logDebug)("OKXUniversalProvider request()  connected ");let{namespace:n,requestParam:i}=this.buildRequestParamFromRequest(e,t);return yield this.getProvider(n).request(i)})}buildRequestParamFromRequest(e,t){var n;(0,u.logDebug)("UniversalProvider request args >>>>>>>: ",t,(0,u.safeJsonStringify)(e));let[i,r]=this.validateChain(t);if(!this.session)throw new u.OKXConnectError(u.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"Please call connect() before request()");let o=Object.keys(this.session.namespaces);if(!t&&o&&o.length>1)throw new u.OKXConnectError(u.OKX_CONNECT_ERROR_CODES.NOT_CONNECTED_ERROR,"Multiple chains have been linked, the request method requires chain");let s=(0,d.replaceChainNameToChainId)(`${i}:${r}`);null!=s&&(i=s.split(":")[0],r=s.split(":")[1]);let a=Object.assign(Object.assign({},e),{chainId:`${i}:${r}`,redirect:null!==(n=e.redirect)&&void 0!==n?n:this.sessionConfig.redirect});return{namespace:i,requestParam:a}}enable(){return i(this,void 0,void 0,function*(){if(!this.client)throw new u.OKXConnectError(u.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"Sign Client not initialized");if(!this.session){if(this.connectOpts)yield this.connect(this.connectOpts);else throw new u.OKXConnectError(u.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"Sign Client not initialized")}return yield this.requestAccounts()})}disconnect(){return i(this,void 0,void 0,function*(){if((0,u.logDebug)("OKXUniversalProvider disconnect() called"),(0,u.reportLog)("provider disconnect called"),!this.session)throw new u.OKXConnectError(u.OKX_CONNECT_ERROR_CODES.NOT_CONNECTED_ERROR);return new Promise(e=>i(this,void 0,void 0,function*(){let t=!1,n=()=>i(this,void 0,void 0,function*(){t||(t=!0,yield this.disconnectAndEmit(),yield this.cleanup(),e(),(0,u.logDebug)("UniversalProvider disconnect Disconnected"),(0,u.reportLog)("provider disconnect disconnected"))});try{yield this.client.disconnect(),yield n()}catch(e){yield n()}}))})}disconnectAndEmit(){var e,t;this.client.engine.connectManagerDisconnect(),this.events.emit("disconnect",{topic:null===(e=this.session)||void 0===e?void 0:e.topic}),this.events.emit("session_delete",{topic:null===(t=this.session)||void 0===t?void 0:t.topic})}replaceNamespace(e,t){var n,i;let r=null===(n=e.namespaces)||void 0===n?void 0:n[t];if(void 0!=r){let n=this.replaceNamespaceInner(r);void 0!=e.namespaces&&t in e.namespaces&&void 0!=n&&(e.namespaces[t]=n)}let o=null===(i=e.optionalNamespaces)||void 0===i?void 0:i[t];if(void 0!=o){let n=this.replaceNamespaceInner(o);void 0!=e.optionalNamespaces&&t in e.optionalNamespaces&&void 0!=n&&(e.optionalNamespaces[t]=n)}return e}replaceNamespaceInner(e){var t;return void 0!=e&&(e.chains=null===(t=e.chains)||void 0===t?void 0:t.map(e=>(0,d.replaceChainNameToChainId)(e)),void 0!=e.defaultChain&&(e.defaultChain=(0,d.replaceChainNameToChainId)(e.defaultChain))),e}replaceSessionAptos(e,t){var n;let i=null===(n=null==e?void 0:e.namespaces)||void 0===n?void 0:n[t];if(void 0!=i&&void 0!=i.chains){i.chains=i.chains.map(e=>(0,d.replaceChainIdToChainName)(e)),i.accounts=i.accounts.map(e=>(0,d.replaceChainIdToChainName)(e));let n={};Object.keys(i.extra||{}).forEach((i,r)=>{(0,d.replaceChainIdToChainName)(i),n[(0,d.replaceChainIdToChainName)(i)]=Object.values((null==e?void 0:e.namespaces[t].extra)||{})[r]}),i.extra=n}(0,u.logDebug)("replaceSessionAptos",e)}connected(){(0,u.logDebug)("OKXUniversalProvider connected() called"),(0,u.reportLog)("provider connected called");let e=()=>{try{this.cleanup(),this.client.engine.connectManagerDisconnect()}catch(e){(0,u.logDebug)("Error during disconnect:",e)}};try{if(!this.session)return!1;if(!this.client.engine.getCurrentConnectionReady(Object.keys(this.session.namespaces)))return e(),!1;return!0}catch(t){return e(),!1}}connectAndSign(e,t){return i(this,void 0,void 0,function*(){(0,u.logDebug)("OKXUniversalProvider connectAndSign() called");let n=Object.assign(Object.assign({},e),t);return(0,u.logDebug)("OKXUniversalProvider connectAndSign() opts:",JSON.stringify(e)),(0,u.logDebug)("OKXUniversalProvider connectAndSign() signRequest:",JSON.stringify(t)),yield this.connect(n)})}connect(e){return i(this,void 0,void 0,function*(){if((0,u.logDebug)("OKXUniversalProvider connect() called"),(0,u.reportLog)("provider connect called"),!this.client)throw new u.OKXConnectError(u.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"Sign Client not initialized");if(this.connected())return this.session;e=this.replaceNamespace(e,"aptos"),e=this.replaceNamespace(e,"solana"),(0,u.logDebug)("OKXUniversalProvider connect >>>>",JSON.stringify(e)),void 0===e.sessionConfig&&(e.sessionConfig={}),void 0===e.sessionConfig.openUniversalUrl&&(e.sessionConfig.openUniversalUrl=(0,u.isMobileUserAgent)()),this.setNamespaces(e);try{(0,u.logDebug)(`UniversalProvider connect opts.stringify ====> ${JSON.stringify(e)}`);let t=yield this.client.connect(e);if((0,u.logDebug)(`UniversalProvider connect success ====> ${JSON.stringify(t)}`),t){if(this.replaceSessionAptos(t,"aptos"),this.replaceSessionAptos(t,"solana"),this.session=t,this.client.session=t,this.setConnectConnector(),(0,u.logDebug)("OKXUniversalProvider connect success opts>>>>",JSON.stringify(e)),this.onConnect(),e.signRequest&&e.signRequest.length>0){let t=e.signRequest[0],n=[];"undefined"!=typeof window&&window&&window.okxConnectUniversalUIinwindow?((0,u.logDebug)("OKXUniversalProvider connect success, us UI SDK>>>>"),this.session.signResponse&&this.session.signResponse.length>0&&(n=this.session.signResponse)):((0,u.logDebug)("OKXUniversalProvider connect success, us Universal SDK>>>>"),this.session.signResponse&&this.session.signResponse.length>0?n=this.session.signResponse:n.push((0,C.creatNotSupportMethodItemReplay)(t))),(0,u.logDebug)(`UniversalProvider connect success connectRequestReply ====> ${JSON.stringify(n)}`),setTimeout(()=>{this.events.emit("connect_signResponse",n)},100)}return t}return}catch(e){throw(0,u.logDebug)("UniversalProvider connect error ====> ",JSON.stringify(e)),e}})}syncAllAddresses(){return i(this,void 0,void 0,function*(){if((0,y.syncAddressAvailable)(this.session.wallet))return this.client.syncAllAddress();throw new u.OKXConnectError(u.OKX_CONNECT_ERROR_CODES.METHOD_NOT_SUPPORTED)})}setConnectConnector(){var e;this.client.setConnectConnector(null===(e=this.session)||void 0===e?void 0:e.wallet)}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}removeListener(e,t){this.events.removeListener(e,t)}off(e,t){this.events.off(e,t)}setDefaultChain(e,t){(0,u.logDebug)("OKXUniversalProvider setDefaultChain() called");try{if(!this.connected())return;let[n,i]=this.validateChain(e);this.getProvider(n).setDefaultChain(i,t)}catch(e){if(!/Please call connect/.test(e.message))throw e}}checkStorage(){return i(this,void 0,void 0,function*(){let e=yield this.getFromStore("connectSession");if((0,u.logDebug)(e),e){(0,u.logDebug)("checkStorage error start");try{this.session=e,this.client.session=this.session,this.setConnectConnector(),yield this.client.restoreconnect(e),this.sessionConfig=e.sessionConfig,this.client.sessionConfig=this.sessionConfig,(0,u.logDebug)("[evm u-provider] do reconnection",this.session),this.createProviders(),this.registerEventListeners(),setTimeout(()=>{this.events.emit("reconnect",{session:this.session})},100)}catch(e){yield this.cleanup(),(0,u.logDebug)(`checkStorage error ${JSON.stringify(e)}`)}}})}initialize(){return i(this,void 0,void 0,function*(){(0,u.logDebug)("OKXUniversalProvider initialize() called"),(0,u.reportLog)("provider initialize called");let e=Object.assign({url:window.location.hostname,origin:window.location.origin},this.providerOpts.dappMetaData);this.client=new l.SignClient(e,this.events),this.registerConnector(this.providerOpts.connector),yield this.checkStorage()})}createProviders(){if(!this.client)throw new u.OKXConnectError(u.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"Sign Client not initialized");if(!this.connected())throw new u.OKXConnectError(u.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"Session not initialized. Please call connect() before enable()");let e=[...new Set(Object.keys(this.session.namespaces).filter(e=>{var t,n;return(null===(n=null===(t=this.session.namespaces[e])||void 0===t?void 0:t.accounts)||void 0===n?void 0:n.length)>0}).map(e=>(0,h.parseNamespaceKey)(e)))];this.rpcProviders={},e.forEach(e=>{if(!this.session)return;let t=this.session.namespaces[e];switch((0,u.logDebug)("init eip155 >> ",t),e){case"eip155":this.rpcProviders[e]=new o.Eip155Provider({namespace:t},this.client,this.events);break;case"solana":let n={namespace:t},i=new p.default(n,"solana",this.client,this.events);this.rpcProviders[e]=i;let r=new p.default(n,"sonic",this.client,this.events);this.rpcProviders.sonic=r;let a=new p.default(n,"svm",this.client,this.events);this.rpcProviders.svm=a;let c=new p.default(n,"soon",this.client,this.events);this.rpcProviders.soon=c;let l=new p.default(n,"eclipse",this.client,this.events);this.rpcProviders.eclipse=l;break;case"ton":let d=new m.default({namespace:t},this.client,this.events);this.rpcProviders[e]=d;break;case"sui":let h=new s.SuiProvider({namespace:t},this.client,this.events);h.name="sui",this.rpcProviders[e]=h;break;case"btc":let _={namespace:t},C=new g.default(_,"btc",this.client,this.events);this.rpcProviders.btc=C;let y=new g.default(_,"fractal",this.client,this.events);this.rpcProviders.fractal=y;break;case"aptos":let b=new f.default({namespace:t},"aptos",this.client,this.events);this.rpcProviders[e]=b;let N=new f.default({namespace:t},"movement",this.client,this.events);this.rpcProviders.movement=N;break;case"cosmos":let R=new v.default({namespace:t},this.client,this.events);this.rpcProviders[e]=R;break;case"tron":let w=new O.default({namespace:t},this.client,this.events);this.rpcProviders[e]=w;break;case"starknet":let S=new E.default({namespace:t},"starknet",this.client,this.events);this.rpcProviders[e]=S}})}registerEventListeners(){if(void 0===this.client)throw new u.OKXConnectError(u.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"Sign Client is not initialized");this.client.engine.addDisconnectListener(()=>{this.disconnectAndEmit(),this.cleanup()}),this.on(a.PROVIDER_EVENTS.DEFAULT_CHAIN_CHANGED,e=>{this.onChainChanged(e)}),this.on(a.PROVIDER_EVENTS.UPDATE_NAMESPACES,e=>{if(e){let t=Object.keys(e)[0];this.session&&(this.session.namespaces[t]=e[t],this.session&&(this.persist("connectSession",this.session),this.events.emit("session_update",this.session)),(0,u.logDebug)("PROVIDER_EVENTS.UPDATE_NAMESPACES this.session... ->>>",JSON.stringify(this.session)))}})}getProvider(e){return(0,u.logDebug)("current get providers",this.rpcProviders),(0,u.logDebug)("query namespace: ",e),this.rpcProviders[e]}setNamespaces(e){this.connectOpts=e;let{namespaces:t,sessionConfig:n}=e,i={origin:window.location.origin,url:window.location.hostname,name:this.providerOpts.dappMetaData.name,icon:this.providerOpts.dappMetaData.icon,manifestUrl:this.providerOpts.dappMetaData.manifestUrl};this.sessionConfig=Object.assign({dappInfo:i},n),(0,u.logDebug)("setNamespaces sessionConfig>>>",this.sessionConfig),this.client.sessionConfig=this.sessionConfig,this.persist("sessionConfig",n)}validateChain(e){var t;let[n,i]=(null==e?void 0:e.split(":"))||["",""];if(!this.session||!this.session.namespaces||!Object.keys(this.session.namespaces).length)return(0,u.logDebug)("get name & chain",n,i),[n,i];if(n){if(!this.isChainNamespaceInSession(n))throw new u.OKXConnectError(u.OKX_CONNECT_ERROR_CODES.NOT_CONNECTED_ERROR,`Namespace '${n}' is not configured. Please call connect() first with namespace config.`);if(i&&e){(0,u.logDebug)("this.session.namespaces --\x3e> ",n,JSON.stringify(this.session.namespaces));let i=null===(t=this.session.namespaces[n])||void 0===t?void 0:t.chains;if((0,u.logDebug)("get chainsArr & chain",JSON.stringify(i),e),i&&!i.includes(e))throw new u.OKXConnectError(u.OKX_CONNECT_ERROR_CODES.NOT_CONNECTED_ERROR,`Namespace not include the chain '${e}'`)}}if(n&&i)return(0,u.logDebug)("get name & chain",n,i),[n,i];let r=(0,h.parseNamespaceKey)(Object.keys(this.session.namespaces)[0]),o=this.rpcProviders[r].getDefaultChain();return(0,u.logDebug)("get default chain:",o),[r,o]}isChainNamespaceInSession(e){var t,n;if(Object.keys((null===(t=this.session)||void 0===t?void 0:t.namespaces)||{}).map(e=>(0,h.parseNamespaceKey)(e)).includes(e))return!0;let i=!1;return Object.values((null===(n=this.session)||void 0===n?void 0:n.namespaces)||{}).forEach(t=>{t.chains.forEach(t=>{t.split(":")[0]==e&&(i=!0)})}),i}requestAccountsWithNamespace(e){return this.getProvider(e).requestAccounts()}requestDefaultChainWithNamespace(e){return this.getProvider(e).getDefaultChain()}requestAccounts(){return i(this,void 0,void 0,function*(){let[e]=this.validateChain();return yield this.getProvider(e).requestAccounts()})}onChainChanged(e){var t;if(!(null===(t=this.session)||void 0===t?void 0:t.namespaces))return;let[n,i]=this.validateChain(e);i&&(this.session.namespaces[n]&&(this.session.namespaces[n].defaultChain=i,this.persist("connectSession",this.session)),this.events.emit("chainChanged",i))}onConnect(){this.createProviders(),this.session&&(this.persist("connectSession",this.session),console.log("window.okxwallet save session:",Date.now())),this.events.emit("connect",{session:this.session}),this.registerEventListeners()}cleanup(){return i(this,void 0,void 0,function*(){this.session=void 0,this.client.session=void 0,this.setConnectConnector(),this.sessionProperties=void 0,this.persist("optionalNamespaces",void 0),this.persist("sessionProperties",void 0),this.persist("connectSession",void 0)})}persist(e,t){return(0,u.logDebug)("[evm u-provider] persisit data",e,t),this.client.engine.saveSessionContent(e,t)}getFromStore(e){return i(this,void 0,void 0,function*(){return this.client.engine.getSessionContent(e)})}showRequestModal(e,t){try{let{namespace:n,requestParam:i}=this.buildRequestParamFromRequest(e,t);return this.getProvider(n).showRequestModal(i)}catch(e){return!1}}openWallet(e,t){this.client.openWallet(e,t)}registerConnector(e){this.client.registerConnector(e),this.client.setAccountChangeListener(e=>{(0,u.logDebug)("accountChangeListener session：",this.events.listenerCount("accountChanged"),JSON.stringify(e));try{e&&this.events.listenerCount("accountChanged")&&(this.replaceSessionAptos(e,"aptos"),this.replaceSessionAptos(e,"solana"),this.session=e,this.client.session=e,this.session&&(this.persist("connectSession",this.session),console.log("window.okxwallet save session:",Date.now())),this.setConnectConnector(),this.createProviders(),this.events.emit("accountChanged",this.session))}catch(e){(0,u.logDebug)("setAccountChangeListener error:",JSON.stringify(e))}})}}t.OKXUniversalProvider=b,t.default=b},85447:(e,t,n)=>{"use strict";n(66024)},85594:(e,t,n)=>{"use strict";var i;!function(e){e.All="all",e.Id="id",e.WalletPublicKey="walletPublicKey",e.Email="email",e.Alias="alias",e.FirstName="firstName",e.LastName="lastName",e.PhoneNumber="phoneNumber",e.JobTitle="jobTitle",e.Wallet="wallet",e.Username="username",e.AccountId="accountId"}(i||(i={}))},85666:(e,t,n)=>{"use strict";n(66024)},85733:(e,t,n)=>{"use strict";n(66024),n(16812)},85854:(e,t,n)=>{"use strict";var i;!function(e){e.Discouraged="discouraged",e.Preferred="preferred",e.Required="required"}(i||(i={}))},86094:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.safeJsonParse=function(e){if("string"!=typeof e)throw(0,i.logDebug)(e),Error(`Cannot safe json parse value of type ${typeof e}`);try{return o(e)}catch(t){return console.error("safeJsonParse error:",t),e}},t.safeJsonStringify=function(e){return"string"==typeof e?e:r(e)||""};let i=n(86273),r=e=>JSON.stringify(e,(e,t)=>"bigint"==typeof t?t.toString()+"n":t),o=e=>{let t=e.replace(/:(\b\d{17,}|\b(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))(?=[,\}\]]|$)/g,(e,t)=>`:"${t}n"`);try{return JSON.parse(t,(e,t)=>"string"==typeof t&&t.match(/^\d+n$/)?BigInt(t.substring(0,t.length-1)):t)}catch(t){return JSON.parse(e)}}},86095:function(e,t,n){"use strict";var i,r=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(t,n);(!r||("get"in r?!t.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,r)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||(i=function(e){return(i=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t})(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=i(e),s=0;s<n.length;s++)"default"!==n[s]&&r(t,e,n[s]);return o(t,e),t}),a=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((i=i.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectionManager=void 0;let c=n(63065),l=n(12502),d=n(54934),u=n(16146),h=n(32945),p=n(22585),g=n(21309),f=n(34554),m=n(83646),v=n(46617),O=n(86094),_=s(n(86273)),C=n(86273),y=n(19207),E=n(80098),b=n(9277);class N{constructor(e){this.events=new p.EventEmitter,this.splitManager=new b.ConnectionSplitPackages("dapp"),this.connectStorage=new g.Storage(d.OKXCONNECTOR_CACHE_KEY_DAPP+e,d.OKXCONNECTOR_CACHE_KEY_DAPP),this.tonsdkConnectStorage=new g.Storage(d.OKXCONNECTOR_TON_KEY+e,d.OKXCONNECTOR_TON_KEY),this.crypto=new m.SessionCrypto;let t=(0,E.isInTMA)();if((0,C.logDebug)("do init:",t),_.reportLog("connection manager do init"),t)try{let e=this.getCachedCryptoKeyPair();(0,C.logDebug)("use same pk:",e),this.crypto=new m.SessionCrypto(e)}catch(e){this.connectStorage.clearCache(),_.reportEvent(y.OKXReportType.LOG,"cache_fail","cache failed")}this.jwtKeyPair=this.getCachedJWTKeyPair(),this.saveJWTKeyPair(this.jwtKeyPair),this.connector=new c.OKXWalletConnector(h.OKXCONNECTOR_WS_URL_1),this.packageId=Date.now(),this.connectedWalletPK="",this.currentTopic="",_.logDebug(`this.connectedWalletPK  constructor   ${this.connectedWalletPK}`)}refreshPackageId(){let e=Date.now();e==this.packageId&&(this.packageId=e+1),this.packageId=e}saveCryptoKeyPair(e){let t=(0,O.safeJsonStringify)(e);this.connectStorage.encryptStoreMsg(t,d.OKXCONNECTOR_CRYPTO_KEY)}getCachedCryptoKeyPair(){let e=this.connectStorage.getAndDecrypt(d.OKXCONNECTOR_CRYPTO_KEY);return"string"==typeof e?(_.logDebug("get cached crypto key:"),_.logDebug(e),(0,O.safeJsonParse)(e)):(this.connectStorage.clearCache(),null)}saveJWTKeyPair(e){var t={publicKey:(0,f.toHexString)(e.publicKey),secretKey:(0,f.toHexString)(e.secretKey)};_.logDebug("save jwt kp");let n=(0,O.safeJsonStringify)(t);_.logDebug(n),this.connectStorage.encryptStoreMsg(n,d.OKXCONNECTOR_JWT_KEY)}getCachedJWTKeyPair(){try{let e=this.connectStorage.getAndDecrypt(d.OKXCONNECTOR_JWT_KEY);if("string"!=typeof e)return(0,v.generateKeyPair)();{_.logDebug("get cached jwt kp:"),_.logDebug(e);let t=(0,O.safeJsonParse)(e);return _.logDebug("save jwt kp"),_.logDebug(t),{publicKey:(0,f.hexToByteArray)(t.publicKey),secretKey:(0,f.hexToByteArray)(t.secretKey)}}}catch(e){return _.reportEvent(y.OKXReportType.LOG,"cache_fail","cache failed"),(0,v.generateKeyPair)()}}isWalletPKReady(){return _.logDebug(`isWalletPKReady  ===> ${this.connectedWalletPK}`),this.connectedWalletPK.length>0}makeJWT(e){return a(this,void 0,void 0,function*(){return yield(0,v.signJWT)(e,u.OKXCONNECTOR_JWT_SIDE,u.OKXCONNECTOR_JWT_TTL,this.jwtKeyPair)})}parsePackage(e){return a(this,arguments,void 0,function*(e,t=!1){var n,i,r,o,s,c,l,u,h,p,g,f,m;if(this.events.emit(e.id,e),!t){yield this.sendACK(e.id,!0);let t=null===(n=this.connectStorage.getItem(d.OKXCONNECTOR_TOKEN_CACHE))||void 0===n?void 0:n.content;if(t&&(null===(r=null===(i=e.params)||void 0===i?void 0:i.data)||void 0===r?void 0:r.messageId)){let n=this.splitManager.tryParseMessageSplitPayload(null===(s=null===(o=e.params)||void 0===o?void 0:o.data)||void 0===s?void 0:s.message);if(n){let i={topicId:null===(l=null===(c=e.params)||void 0===c?void 0:c.data)||void 0===l?void 0:l.topic,messageId:null===(h=null===(u=e.params)||void 0===u?void 0:u.data)||void 0===h?void 0:h.messageId,messageObject:n,publishedAt:null===(g=null===(p=e.params)||void 0===p?void 0:p.data)||void 0===g?void 0:g.publishedAt},r=yield this.splitManager.onReceivedPackageCheck(i);r.completeMessageIdList&&r.completeMessageIdList.forEach(e=>a(this,void 0,void 0,function*(){this.refreshPackageId(),yield this.sendReceive(this.packageId.toString(),e,t)}))}else this.refreshPackageId(),yield this.sendReceive(this.packageId.toString(),null===(m=null===(f=e.params)||void 0===f?void 0:f.data)||void 0===m?void 0:m.messageId,t)}}})}restoreConnect(e){return a(this,void 0,void 0,function*(){if(_.reportLog("connection manager restore connection"),_.logDebug(`connectionManager  restoreConenct   ${e}`),"string"!=typeof e||0===e.length)throw Error("CONNECTION: invalid topic");_.logDebug("connectionManager  restoreConenct   disconnect"),yield this.disconnect(!0),this.connectStorage.saveContent(e,d.OKXCONNECTOR_TOKEN_CACHE),_.logDebug("connectionManager  restoreConenct   conect"),yield this.connect(!0)})}getConnectInfo(){var e=(0,f.generateTopic)();return _.logDebug(`generate topic token: ${e}`),_.reportLog("connection manager generate connection info"),this.currentTopic=e,{channelId:e,clientId:this.crypto.stringifyKeypair().publicKey}}connect(){return a(this,arguments,void 0,function*(e=!1){this.timeLog=new Date().getTime(),(0,C.logDebug)("ConnectTime---enter->",this.timeLog),_.reportLog("connection manager begin connect");let t=this.connectStorage.getItem(d.OKXCONNECTOR_TOKEN_CACHE);var n=this.currentTopic;if(_.logDebug(`generate topic token: ${n}`),e){null!=t&&(_.logDebug(`read last connect id: ${t}`),n=t.content);var i=this.connectStorage.getItem(d.OKXCONNECTOR_CRYPTO_SENDER_PK_CACHE);i&&(this.connectedWalletPK=i.content,(0,C.logDebug)(`connectionManager connect() this.connectedWalletPK : ${this.connectedWalletPK}`)),_.reportLog("connection manager do restore connection")}if(e)try{let e=this.getCachedCryptoKeyPair();e&&(this.crypto=new m.SessionCrypto(e))}catch(e){throw _.logError("get crypto key pair from cache failed"),_.reportEvent(y.OKXReportType.LOG,"cache_fail","cache failed"),this.connectStorage.clearCache(),Error("crypto cache failed")}_.logDebug(`use crypto client id: ${this.crypto.stringifyKeypair().publicKey}`),this.connectStorage.saveContent(n,d.OKXCONNECTOR_TOKEN_CACHE);var r=yield this.makeJWT(n);return _.logDebug(`generate jwt token: ${r}`),this.connectStorage.saveContent(r,"jwt"),new Promise((e,t)=>{this.connector.onOpen(()=>a(this,void 0,void 0,function*(){_.logDebug("1. connector on open"),_.reportLog("1. connect ws open");let i=new Date().getTime();(0,C.logDebug)("ConnectTime---open->",i-this.timeLog),this.events.once(this.packageId.toString(),i=>a(this,void 0,void 0,function*(){if(i&&i.error){_.logError("failed when login"),_.reportLog("2. connect login failed"),yield this.connector.disconnect();var r=Error();r.message=i.error.message,r.name=i.error.code.toString(),t(r)}this.refreshPackageId(),this.events.once(this.packageId.toString(),i=>a(this,void 0,void 0,function*(){if(i&&i.error){_.logError("failed when subscribe"),_.reportLog("3. connect subscribe failed"),yield this.connector.disconnect();var r=Error();r.message=i.error.message,r.name=i.error.code.toString(),t(r)}this.refreshPackageId(),_.logDebug(`4. subscribe callback then send fetch: ${this.packageId}`),_.reportLog("4. subscribe callback then send fetch");let o=new Date().getTime();(0,C.logDebug)("ConnectTime--subscribe callback->",o-this.timeLog),yield this.sendFetchAndConsumeMessages(this.packageId.toString(),n),_.logDebug(`5. splitmanager init: ${this.packageId}`),_.reportLog("5. splitmanager init"),yield this.splitManager.init(this.sendRaw.bind(this)),e()})),_.logDebug(`3. login callback then send subscribe: ${this.packageId}`),_.reportLog("3. connect subscribe failed");let o=new Date().getTime();(0,C.logDebug)("ConnectTime---login callback->",o-this.timeLog),yield this.connector.send(()=>a(this,void 0,void 0,function*(){_.logDebug("CONNECT: reconnect before send"),yield this.connector.connect().catch(e=>{(0,C.logDebug)("ConnectionManager connect error",e),t(e)})}),{id:this.packageId.toString(),jsonrpc:h.CONNECT_JSONRPC_VER,method:l.CONNECT_METHOD_SUB,params:{topic:n}})})),_.logDebug("2. login called"),_.reportLog("2. connection manager connect call login"),yield this.connector.send(()=>a(this,void 0,void 0,function*(){_.logDebug("CONNECT: reconnect before send"),yield this.connector.connect().catch(e=>{(0,C.logDebug)("ConnectionManager connect error",e),t(e)})}),{id:this.packageId.toString(),jsonrpc:h.CONNECT_JSONRPC_VER,method:l.CONNECT_METHOD_LOGIN,params:{token:r}}),this.connector.addPackageParse(e=>{var t;if(_.logDebug("connect: parse package"),_.logDebug(e),!("params"in e)||!("data"in e.params)){this.parsePackage(e,!0);return}let n=null===(t=e.params.data)||void 0===t?void 0:t.message;if(void 0!==n){n=n.replace(/'/g,'"');let e=(0,O.safeJsonParse)(n);"string"!=typeof e&&"clientId"in e&&e.clientId&&e.clientId.length>0&&(this.connectedWalletPK=e.clientId,_.logDebug(`this.connectedWalletPK  addPackageParse   ${this.connectedWalletPK}`),this.connectStorage.saveContent(this.connectedWalletPK,d.OKXCONNECTOR_CRYPTO_SENDER_PK_CACHE),this.saveCryptoKeyPair(this.crypto.stringifyKeypair()))}this.parsePackage(e,e.method===l.CONNECT_METHOD_RECEIVE)})})),this.connector.connect().catch(e=>{(0,C.logDebug)("ConnectionManager connect error",e),t(e)})})})}disconnect(){return a(this,arguments,void 0,function*(e=!1){yield this.connector.disconnect(),_.reportLog("connect disconnect"),this.connectStorage.clearCache(d.OKXCONNECTOR_TOKEN_CACHE),e||(this.connectStorage.clearCache(d.OKXCONNECTOR_CRYPTO_SENDER_PK_CACHE),this.connectedWalletPK="",(0,C.logDebug)(`connectionManager disconnect() this.connectedWalletPK : ${this.connectedWalletPK}`))})}updateProtocolVersion(e,t){this.splitManager.updateTopicSenderVersion(e,t)}addListener(e,t,n){this.connector.addListener((0,O.safeJsonStringify)(e),e=>{if(e=e.replace(/'/g,'"'),_.logDebug(`addListener ===> ${e}`),void 0!==e){let i;var t=(0,O.safeJsonParse)(e),n=t.message;return n.trimStart().startsWith("{")?i=n:(t.clientId&&t.clientId.length>0&&(this.connectedWalletPK=t.clientId,this.connectStorage.saveContent(this.connectedWalletPK,d.OKXCONNECTOR_CRYPTO_SENDER_PK_CACHE),_.logDebug(`this.connectedWalletPK  addListener   ${this.connectedWalletPK}`),_.logDebug(`this.cryptoKey  addListener   ${(0,f.toHexString)(this.crypto.keyPair.publicKey)}`),this.saveCryptoKeyPair(this.crypto.stringifyKeypair())),i=this.crypto.decrypt(n,this.connectedWalletPK)),_.logDebug(`addListener ===> ${i}`),i}},t,n,e=>new Promise((t,n)=>a(this,void 0,void 0,function*(){let n=this.splitManager.tryParseMessageSplitPayload(e.message);if(n){let i={topicId:e.topic,messageId:null==e?void 0:e.messageId,messageObject:n,publishedAt:null==e?void 0:e.publishedAt};t((yield this.splitManager.onReceivedPackageCheck(i)))}else t({isSplitPackage:!1})})))}sendRaw(e){return a(this,void 0,void 0,function*(){_.logDebug(`message send =====> ${e}`),_.reportLog("connect send raw msg"),_.logDebug(`message send =====encrypt message.length>>>> ${e.length}`);let t=this.connectStorage.getItem(d.OKXCONNECTOR_TOKEN_CACHE);_.logDebug(`message send =====topic>>>> ${null==t?void 0:t.content}`),this.refreshPackageId();let n={id:this.packageId.toString(),method:l.CONNECT_METHOD_PUBLISH,jsonrpc:h.CONNECT_JSONRPC_VER,params:{message:{topic:null==t?void 0:t.content,message:e,ttl:h.OKXCONNECTOR_MESSAGE_TTL}}};return this.events.once(this.packageId.toString(),e=>a(this,void 0,void 0,function*(){e&&e.error?_.logError(`@${new Date().toUTCString()} >>> failed when send msg`):e&&!e.error&&_.logDebug(`CONNECTION @[${new Date().toUTCString()}] >>> send msg with id ${this.packageId} successed`)})),yield this.connector.send(()=>a(this,void 0,void 0,function*(){return _.logDebug("CONNECT: reconnect before send"),yield this.connector.connect()}),n),this.packageId})}sendEncryptedMsg(e,t){return a(this,arguments,void 0,function*(e,t,n=h.OKXCONNECTOR_MESSAGE_TTL){this.refreshPackageId();let i={id:this.packageId.toString(),method:l.CONNECT_METHOD_PUBLISH,jsonrpc:h.CONNECT_JSONRPC_VER,params:{message:{topic:e,message:t,ttl:n}}};this.events.once(this.packageId.toString(),e=>a(this,void 0,void 0,function*(){e&&e.error?_.logError(`@${new Date().toUTCString()} >>> failed when send msg`):e&&!e.error&&_.logDebug(`CONNECTION @[${new Date().toUTCString()}] >>> send msg with id ${this.packageId} successed`)})),yield this.connector.send(()=>a(this,void 0,void 0,function*(){return _.logDebug("CONNECT: reconnect before send"),yield this.connector.connect()}),i)})}send(e){return a(this,arguments,void 0,function*(e,t=h.OKXCONNECTOR_MESSAGE_TTL){if(_.logDebug(`message send =====> ${e}`),_.reportLog("connect send msg"),!this.isWalletPKReady())throw Error("connection not finish");let n=this.crypto.encrypt(e,this.connectedWalletPK);_.logDebug(`message send =====encrypt message.length>>>> ${n.length}`),_.reportEvent(y.OKXReportType.LOG,"msg_size",n.length.toString());let i=this.connectStorage.getItem(d.OKXCONNECTOR_TOKEN_CACHE);return _.logDebug(`message send =====topic>>>> ${null==i?void 0:i.content}`),yield this.splitManager.sendSplitPackages(null==i?void 0:i.content,n,this.sendEncryptedMsg.bind(this),this.sendRaw.bind(this)),this.packageId})}sendACK(e,t){return a(this,arguments,void 0,function*(e,t,n){if(!0===t){let t={id:e,jsonrpc:h.CONNECT_JSONRPC_VER,result:!0};yield this.connector.send(()=>a(this,void 0,void 0,function*(){return _.logDebug("CONNECT: reconnect before send"),yield this.connector.connect()}),t)}else if(n){let t={id:e,jsonrpc:h.CONNECT_JSONRPC_VER,error:{code:n.code,message:n.message}};yield this.connector.send(()=>a(this,void 0,void 0,function*(){return _.logDebug("CONNECT: reconnect before send"),yield this.connector.connect()}),t)}})}sendReceive(e,t,n){return a(this,void 0,void 0,function*(){let i={id:e,jsonrpc:h.CONNECT_JSONRPC_VER,method:l.CONNECT_METHOD_RECEIVE,params:{data:{messageId:t,topic:n}}};yield this.connector.send(()=>a(this,void 0,void 0,function*(){return _.logDebug("CONNECT: reconnect before send"),yield this.connector.connect()}),i)})}sendFetchAndConsumeMessages(e,t){return a(this,void 0,void 0,function*(){this.events.once(e,e=>a(this,void 0,void 0,function*(){var n,i;if(e.result){var r=e.result.hasMore,o=e.result.data;if(o)for(let e=0;e<o.length;e++){let n=o[e];if(n&&n.topic==t){let e=n.messageId;_.reportLog("5. get fetch result"),this.splitManager.tryParseMessageSplitPayload(n.message)?(yield this.connector.getMsgPayloadFromHistory(n),_.logDebug("skip receive")):(yield this.connector.getMsgPayloadFromHistory(n),this.refreshPackageId(),yield this.sendReceive(this.packageId.toString(),e,t))}}r&&(this.refreshPackageId(),yield this.sendFetchAndConsumeMessages(this.packageId.toString(),t))}else _.logDebug(`CONNECT: get error rsp ${null===(n=e.error)||void 0===n?void 0:n.code} : ${null===(i=e.error)||void 0===i?void 0:i.message}`)})),_.logDebug("5. send fetch more"),_.reportLog("5. send fetch more");let n=new Date().getTime();(0,C.logDebug)("ConnectTime---5->",n-this.timeLog);let i={id:e,jsonrpc:h.CONNECT_JSONRPC_VER,method:l.CONNECT_METHOD_FETCHMSG,params:{data:{topic:t}}};yield this.connector.send(()=>a(this,void 0,void 0,function*(){return _.logDebug("CONNECT: reconnect before send"),yield this.connector.connect()}),i)})}cleanCache(){_.reportLog("connection cache clean called"),this.connectStorage.clearCache()}saveSessionContent(e,t){t||this.connectStorage.clearCache(d.OKXCONNECTOR_SESSION_PREFIX_KEY+e);let n=(0,O.safeJsonStringify)(t);this.connectStorage.encryptStoreMsg(n,d.OKXCONNECTOR_SESSION_PREFIX_KEY+e)}getSessionContent(e){try{let t=this.connectStorage.getAndDecrypt(d.OKXCONNECTOR_SESSION_PREFIX_KEY+e);if(t)return(0,O.safeJsonParse)(t)}catch(t){this.connectStorage.clearCache(d.OKXCONNECTOR_SESSION_PREFIX_KEY+e)}}getCurrentConnectionReady(){let e=!1;try{this.getCachedCryptoKeyPair()&&(e=!0)}catch(e){_.logError("check connection ready failed")}return this.isWalletPKReady()&&e}getCryptoKeyEnable(){let e=!1;try{this.getCachedCryptoKeyPair()&&(e=!0)}catch(e){_.logError("check connection ready failed")}return e}}t.ConnectionManager=N},86273:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((i=i.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.logVersion=void 0,t.getDefaultReporter=function(){return o},t.logDebug=function(...e){if("undefined"!=typeof console)try{(null==window?void 0:window.okxLogDebug)&&console.log(`[OKX_CONNECT_SDK] ${s} `,...e)}catch(e){}},t.logError=function(...e){if("undefined"!=typeof console)try{(null==window?void 0:window.okxLogDebug)&&console.error(`[OKX_CONNECT_SDK] ${s} `,...e);{let t="";t+=[...e].reduce((e,t)=>{"string"==typeof t?e+=","+t:"object"==typeof t&&(e+=JSON.stringify(t))}),o.sendRecordContent(t,r.OKXReportType.LOG,"")}}catch(e){}},t.logWarning=function(...e){if("undefined"!=typeof console)try{(null==window?void 0:window.okxLogDebug)&&console.warn(`[OKX_CONNECT_SDK] ${s} `,...e)}catch(e){}},t.reportEvent=function(e,t,n){return i(this,void 0,void 0,function*(){yield o.sendRecordContent(n,e,t)})},t.reportLog=function(e){return i(this,arguments,void 0,function*(e,t="default"){})};let r=n(19207),o=new r.OKXReporter,s=n(83442).version;t.logVersion=s},86568:(e,t,n)=>{"use strict";n(68904)},86745:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(t,n);(!r||("get"in r?!t.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,r)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),r(n(34968),t),r(n(59564),t),r(n(83819),t),r(n(69405),t),r(n(28081),t)},86866:(e,t,n)=>{"use strict";n(66024)},87283:(e,t,n)=>{"use strict";var i;!function(e){e.Txt="TXT",e.Cname="CNAME"}(i||(i={}))},87680:(e,t,n)=>{"use strict";n(66024),n(31487),n(53421),n(97730)},87845:(e,t,n)=>{"use strict";n(66024)},87899:(e,t,n)=>{"use strict";var i;(i||(i={})).Csv="csv"},88558:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NAMES_CHAINS=t.TON_CHAINS=t.COSMOS_CHAINS=t.APTOS_CHAINS=t.SUI_CHAINS=t.SOLANA_CHAINS=t.BTC_CHAINS=void 0;let i=n(12240);t.BTC_CHAINS={MAINNET:"btc:mainnet",FRACTAL:"fractal:mainnet"},t.SOLANA_CHAINS={MAINNET:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",TESTNET:"solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z",SONIC_TESTNET:"sonic:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z"},t.SUI_CHAINS={MAINNET:"sui:mainnet"},t.APTOS_CHAINS={MAINNET:"aptos:mainnet",MOVEMENT_MAINNET:"movement:mainnet",MOVEMENT_TESTNET:"movement:testnet"},t.COSMOS_CHAINS={COSMOS_MAINNET:"cosmos:cosmoshub-4"},t.TON_CHAINS={MAINNET:"ton:-239"},t.NAMES_CHAINS={[i.NameSpaceKeyBtc]:Object.values(t.BTC_CHAINS),[i.NameSpaceKeySOL]:Object.values(t.SOLANA_CHAINS),[i.NameSpaceKeyTON]:Object.values(t.TON_CHAINS),[i.NameSpaceKeySui]:Object.values(t.SUI_CHAINS),[i.NameSpaceKeyAptos]:Object.values(t.APTOS_CHAINS),[i.NameSpaceKeyCosmos]:Object.values(t.COSMOS_CHAINS)}},89025:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(t,n);(!r||("get"in r?!t.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,r)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),r(n(83095),t),r(n(64675),t)},89166:(e,t,n)=>{var i=n(62446),r=n(87177),o=n(87694),s=0/0,a=/^[-+]0x[0-9a-f]+$/i,c=/^0b[01]+$/i,l=/^0o[0-7]+$/i,d=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(o(e))return s;if(r(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=r(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=i(e);var n=c.test(e);return n||l.test(e)?d(e.slice(2),n?2:8):a.test(e)?s:+e}},89169:(e,t,n)=>{"use strict";n(19425)},89793:(e,t,n)=>{"use strict";var i;!function(e){e.Healthy="healthy",e.Unhealthy="unhealthy"}(i||(i={}))},90995:(e,t,n)=>{"use strict";n.d(t,{M:()=>c});var i=n(70549),r=n(55126),o=n(57410),s=n(57278),a=n(4179);function c({signer:e,signerContractAddress:t=a.hI}){let n={...e,signTransaction:(e,t)=>{throw new o.s}};return{account:(0,s.t)({address:n.address,signMessage:async({message:e})=>(0,i.Av)(await n.signMessage({message:e})),async signTransaction(e,t){throw new o.s},signTypedData:async e=>(0,i.Av)(await n.signTypedData({...e}))}),signerContractAddress:t,getSignerData:()=>n.address,getDummySignature:()=>r.WB}}},91206:(e,t,n)=>{"use strict";var i;!function(e){e.Dynamic="dynamic",e.User="user"}(i||(i={}))},91408:(e,t,n)=>{"use strict";n(46238)},91492:(e,t,n)=>{"use strict";var i;!function(e){e.Standard="standard",e.Custom="custom"}(i||(i={}))},92122:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((i=i.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.OKXStarknetProvider=void 0;let r=n(86745);class o{constructor(e){this.STARKNET_CHAIN_ID="starknet:mainnet",this.provider=e}getChain(e){if(null==e&&(e=this.STARKNET_CHAIN_ID),e!=this.STARKNET_CHAIN_ID)throw new r.OKXConnectError(r.OKX_CONNECT_ERROR_CODES.CHAIN_NOT_SUPPORTED,"The chainId:"+e+"is wrong for OKXStarknetProvider");return e}getAccount(e){var t,n,i,o,s;let a=null===(n=null===(t=this.provider.session)||void 0===t?void 0:t.namespaces[r.NameSpaceKeyStarknet])||void 0===n?void 0:n.accounts.filter(function(t){return t.startsWith(e)})[0];if(!a)return;let c=a.split(":"),l=a.split(":")[2],d=null===(s=null===(o=null===(i=this.provider.session)||void 0===i?void 0:i.namespaces[r.NameSpaceKeyStarknet])||void 0===o?void 0:o.extra)||void 0===s?void 0:s[`${c[0]}:${c[1]}`],u="";if(void 0!=d&&(u=d.publicKey),l)return{address:l,pubKey:u}}signMessage(e,t,n){return i(this,void 0,void 0,function*(){n=this.getChain(n),0==e.length&&(e=this.getAccount(n).address);let i={chainId:n,method:"starknet_signMessage",params:{accountAddress:e,typedData:t}};try{let e=yield this.provider.request(i,n);if(!("result"in e))return e.error;{let t=e.result;return"string"==typeof t&&(t=JSON.parse(t)),[t.signedDataR,t.signedDataS]}}catch(e){return e}})}sendTransaction(e,t,n){return i(this,void 0,void 0,function*(){n=this.getChain(n);let i={method:"starknet_sendTransaction",params:{data:JSON.stringify({accountAddress:e,executionRequest:t}),from:e}};try{let e=yield this.provider.request(i,n);if("result"in e)return{transaction_hash:e.result};return e.error}catch(e){return e}})}signMessageDeclareContractPayload(e,t){return i(this,void 0,void 0,function*(){t=this.getChain(t);try{let n=yield this.provider.request({method:"starknet_signMessage",params:e},t);if("result"in n)return{transaction_hash:n.result.txHash,class_hash:n.result.classHash};return n.error}catch(e){return e}})}sendMessageExecuteTransactionDetail(e,t,n,r,o){return i(this,void 0,void 0,function*(){o=this.getChain(o);let i={calls:Array.isArray(t)?t:[t],abis:n,transactionsDetail:{nonce:null==r?void 0:r.nonce,maxFee:null==r?void 0:r.nonce,version:null==r?void 0:r.version}};return this.sendTransaction(e,i,o)})}}t.OKXStarknetProvider=o},92523:(e,t,n)=>{"use strict";n.d(t,{O:()=>r});var i=n(57278);function r(e){return{...(0,i.t)({address:e,async signMessage(){throw Error("Method not supported")},async signTransaction(e){throw Error("Method not supported")},async signTypedData(e){throw Error("Method not supported")}}),publicKey:"0x",source:"empty"}}},93106:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WalletConnectionManagerEvent=t.WalletConnectionManagerTopicInfoCacheKey=void 0,t.WalletConnectionManagerTopicInfoCacheKey="wcmtic",t.WalletConnectionManagerEvent={RECEIVE_REQUEST:"payload"}},93138:(e,t,n)=>{"use strict";n(66024)},93367:(e,t,n)=>{"use strict";n(66024)},93720:(e,t,n)=>{"use strict";n(74484),n(59293)},93946:(e,t,n)=>{"use strict";var i;!function(e){e.Certificate="certificate",e.Ownership="ownership",e.Alias="alias"}(i||(i={}))},94151:(e,t,n)=>{"use strict";n(66024)},94517:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IJSONRpcProvider=t.IJSONRpcConnection=void 0;class n{}t.IJSONRpcConnection=n;class i{constructor(e){}}t.IJSONRpcProvider=i},94647:(e,t,n)=>{"use strict";n(66024),n(72839),n(84396),n(96468),n(91408),n(10002),n(28447),n(61377),n(67530),n(60047),n(45684),n(21680)},94797:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((i=i.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.OKXTronProvider=void 0;let r=n(86745);class o{constructor(e){this.TRON_CHAIN_ID="tron:mainnet",this.provider=e}getChain(e){if(null==e&&(e=this.TRON_CHAIN_ID),e!=this.TRON_CHAIN_ID)throw new r.OKXConnectError(r.OKX_CONNECT_ERROR_CODES.CHAIN_NOT_SUPPORTED,"The chainId:"+e+"is wrong for OKXTronProvider");return e}getAccount(e){var t,n,i,o,s;e=this.getChain(e);let a=null===(n=null===(t=this.provider.session)||void 0===t?void 0:t.namespaces[r.NameSpaceKeyTron])||void 0===n?void 0:n.accounts.filter(function(t){return t.startsWith(e)})[0];if(!a)return;let c=a.split(":"),l=a.split(":")[2],d=null===(s=null===(o=null===(i=this.provider.session)||void 0===i?void 0:i.namespaces[r.NameSpaceKeyTron])||void 0===o?void 0:o.extra)||void 0===s?void 0:s[`${c[0]}:${c[1]}`];if(void 0!=d&&d.publicKey,l)return{address:l}}stringToHex(e){let t="";for(let n=0;n<e.length;n++)t+=e.charCodeAt(n).toString(16).padStart(2,"0");return t}signMessage(e,t){return i(this,void 0,void 0,function*(){let n={chainId:t=this.getChain(t),method:"tron_signMessage",params:{message:this.stringToHex(e)}};try{let e=yield this.provider.request(n,t);if("result"in e)return e.result;return e.error}catch(e){return e}})}signMessageV2(e,t){return i(this,void 0,void 0,function*(){let n={chainId:t=this.getChain(t),method:"tron_signMessageV2",params:{message:e}};try{let e=yield this.provider.request(n,t);if("result"in e)return e.result;return e.error}catch(e){return e}})}signTransaction(e,t){return i(this,void 0,void 0,function*(){t=this.getChain(t);try{let n=yield this.provider.request({method:"tron_signTransaction",params:e},t);if("result"in n){let e;e="string"==typeof n.result?JSON.parse(n.result):n.result;let t={};t.visible=e.visible,t.txID=e.txID;let i={};return i.contract=e.raw_data.contract,i.expiration=e.raw_data.expiration,i.ref_block_bytes=e.raw_data.ref_block_bytes,i.fee_limit=e.raw_data.fee_limit,i.ref_block_hash=e.raw_data.ref_block_hash,i.timestamp=e.raw_data.timestamp,t.raw_data=i,t.raw_data_hex=e.raw_data_hex,t.signature=e.signature,t}}catch(e){return e}})}signAndSendTransaction(e,t){return i(this,void 0,void 0,function*(){t=this.getChain(t);try{let n=yield this.provider.request({method:"tron_signAndSendTransaction",params:e},t);if("result"in n)return n.result}catch(e){return e}})}}t.OKXTronProvider=o},95212:(e,t,n)=>{"use strict";var i;!function(e){e.V24="v2_4",e.V30="v3_0",e.V31="v3_1"}(i||(i={}))},95367:(e,t,n)=>{"use strict";n(66024),n(26493)},95572:(e,t,n)=>{"use strict";var i;!function(e){e.GoogleDrive="googleDrive",e.Icloud="icloud"}(i||(i={}))},95576:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.openLink=a,t.openLinkBlank=function(e){a(e,"_blank")},t.openDeeplinkWithFallback=function(e,t){let n=()=>{!(d("safari")||l("android")&&d("firefox"))&&t()},i=setTimeout(()=>n(),500);window.addEventListener("blur",()=>clearTimeout(i),{once:!0}),l("android")&&(0,s.inTg)()?a(e,"_blank"):a(e,"_self")},t.isMobileUserAgent=function(){var e;let t=!1;return e=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.slice(0,4)))&&(t=!0),t},t.getUserAgent=c,t.isOS=l,t.isBrowser=d;let r=i(n(51945)),o=n(86273),s=n(66776);function a(e,t="_self"){(0,o.logDebug)("openLink",e,t),window.open(e,t,"noopener noreferrer")}function c(){var e,t,n;let i,o;let s=new r.default().getResult(),a=null===(e=s.os.name)||void 0===e?void 0:e.toLowerCase(),c=null===(t=s.device.model)||void 0===t?void 0:t.toLowerCase();switch(!0){case"ipad"===c:i="ipad";break;case"ios"===a:i="ios";break;case"android"===a:i="android";break;case"mac os"===a:i="macos";break;case"linux"===a:i="linux";break;case null==a?void 0:a.includes("windows"):i="windows"}let l=null===(n=s.browser.name)||void 0===n?void 0:n.toLowerCase();switch(!0){case"chrome"===l:o="chrome";break;case"firefox"===l:o="firefox";break;case null==l?void 0:l.includes("safari"):o="safari";break;case null==l?void 0:l.includes("opera"):o="opera"}return{os:i,browser:o}}function l(...e){return e.includes(c().os)}function d(...e){return e.includes(c().browser)}},95879:(e,t,n)=>{"use strict";n(66024),n(32655),n(97607),n(32214),n(13160),n(68042)},96382:(e,t,n)=>{"use strict";n.d(t,{E:()=>i});var i=function(){return null}},96468:(e,t,n)=>{"use strict";n(66024)},96720:(e,t,n)=>{"use strict";n(66024),n(61284)},97097:(e,t,n)=>{"use strict";n(66024)},97367:(e,t,n)=>{"use strict";var i;!function(e){e.Users="users",e.Visits="visits"}(i||(i={}))},97516:(e,t,n)=>{"use strict";n(38949)},97607:(e,t,n)=>{"use strict";n(75942)},97724:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((i=i.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.JsonRpcProvider=void 0;let r=n(22585),o=n(83095),s=n(86745),a=n(86745);class c extends o.IJSONRpcProvider{constructor(e){super(e),this.events=new r.EventEmitter,this.connected=!1,this.connecting=!1,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}connect(){return i(this,arguments,void 0,function*(e=this.connection){yield this.open(e)})}disconnect(){return i(this,void 0,void 0,function*(){yield this.close()})}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}request(e,t){return i(this,void 0,void 0,function*(){return this.requestStrict((0,s.formatJsonRpcRequest)(e.method,e.params||[],(0,s.getBigIntRpcId)().toString()),t)})}requestStrict(e,t){return i(this,void 0,void 0,function*(){return new Promise((n,r)=>i(this,void 0,void 0,function*(){if(!this.connection.connected)try{yield this.open()}catch(e){r(e)}this.events.on(`${e.id}`,e=>{(0,s.isJsonRpcError)(e)?r(e.error):n(e.result)});try{(0,a.logDebug)("[RPC] >>> send request",e,t),yield this.connection.send(e,t)}catch(e){r(e)}}))})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),(0,s.isJsonRpcResponse)(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&3e3===e.code&&this.events.emit("error",Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}open(){return i(this,arguments,void 0,function*(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),"string"==typeof e&&(yield this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),yield this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))})}close(){return i(this,void 0,void 0,function*(){yield this.connection.close()})}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}}t.JsonRpcProvider=c},97730:(e,t,n)=>{"use strict";var i;!function(e){e.BrowserExtension="browserExtension",e.CustodialService="custodialService",e.WalletConnect="walletConnect",e.QrCode="qrCode",e.DeepLink="deepLink",e.EmbeddedWallet="embeddedWallet",e.SmartContractWallet="smartContractWallet"}(i||(i={}))},98112:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((i=i.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.SolanaProvider=void 0;let r=n(9407),o=n(86745),s=n(64675),a=n(32881),c=n(97724);class l{constructor(e,t,n,i){this.name="solana",this.namespace=e.namespace,this.events=i,this.client=n,this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders(),this.name=t}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return i(this,void 0,void 0,function*(){if((0,o.logDebug)("solana request --args--string>",JSON.stringify(e)),(0,o.logDebug)("solana provider namespace: ",this.namespace),!this.client.needCheckRequestMethod()||this.namespace.methods.includes(e.method))return this.client.request(e);throw new o.OKXConnectError(o.OKX_CONNECT_ERROR_CODES.METHOD_NOT_SUPPORTED,"Please upgrade OKX APP")})}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(r.PROVIDER_EVENTS.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw Error("ChainId not found");return e.split(":")[1]}getAccounts(){let e=this.namespace.accounts;return e?[...new Set(e.filter(e=>e.split(":")[1]===this.chainId.toString()).map(e=>e.split(":")[2]))]:[]}createHttpProviders(){let e={};return this.namespace.chains.forEach(t=>{let n=(0,s.getChainId)(t),i=(0,s.getRpcUrl)(t,this.namespace),r=this.createHttpProvider(n,i);r&&(e[n]=r)}),e}getHttpProvider(){let e=`${this.chainId}`,t=this.httpProviders[e];if(void 0===t)throw Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){let n=this.createHttpProvider(e,t);n&&(this.httpProviders[e]=n)}createHttpProvider(e,t){if(t)return new c.JsonRpcProvider(new a.JsonRpcConnection(t,(0,s.getGlobal)("disableProviderPing")))}getPubkey(e){return this.getWalletAddress(e)}getWalletAddress(e){return e||(null==(e=this.namespace.defaultChain)?void 0:e.startsWith("solana"))||(e=`solana:${e}`),this.namespace.accounts.filter(function(t){return t.split(":").length>2&&t.startsWith(e)}).map(function(e){return e.split(":")[2]})[0]}showRequestModal(e){return!0}}t.SolanaProvider=l,t.default=l},99019:(e,t,n)=>{"use strict";n(79626)},99109:(e,t,n)=>{"use strict";n(66024)},99300:(e,t,n)=>{"use strict";n(66024)},99331:(e,t,n)=>{"use strict";n(66024)},99883:(e,t,n)=>{"use strict";n(72139)}}]);