try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="ef07bb23-c10c-4ede-98d8-a2d4ea6d75ef",e._sentryDebugIdIdentifier="sentry-dbid-ef07bb23-c10c-4ede-98d8-a2d4ea6d75ef")}catch(e){}(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1242],{6658:(e,t,n)=>{"use strict";n.d(t,{SA:()=>r,Tv:()=>i,aq:()=>s,i1:()=>a,pF:()=>o});let o="anon_token",i="signed_token",r="dynamic_authentication_token",s="/api/auth/anon",a="".concat("https://auth-514527224954.us-central1.run.app","/v1/auth/exchange")},8932:(e,t,n)=>{"use strict";n.d(t,{D8:()=>d,eP:()=>a,tX:()=>s});var o=n(56272),i=n(62217);let r="Please try again using a different e-mail address or contact support.",s={INVALID_PARAMS_ERROR:{showReloadCta:!1,message:"One or more parameters are missing or invalid. Please close this window and try starting over."},NO_SOLANA_EMBEDDED_WALLET:{showReloadCta:!0,message:"Could not find a Solana wallet to use. ".concat(r)},CREATE_PROFILE_ERROR:{showReloadCta:!0,message:"Could not save data. ".concat(r)},UPDATE_PROFILE_ERROR:{showReloadCta:!0,message:"Could not update data. ".concat(r)},INIT_KERNEL_CLIENT_ERROR:{showReloadCta:!0,message:"Could not initialize client. ".concat(r)},INIT_KERNEL_CLIENTS_ERROR:{showReloadCta:!0,message:"Could not initialize one or more clients. ".concat(r)},FETCH_REMOTE_SIGNER_ERROR:{showReloadCta:!0,message:"Could not fetch data. ".concat(r)},NO_REMOTE_SIGNER_PUBLIC_KEY_ERROR:{showReloadCta:!0,message:"Required data missing. ".concat(r)},SESSION_KEYS_INIT_ERROR:{showReloadCta:!0,message:"Could not initialize. ".concat(r)},NO_SERIALIZED_SESSION_KEYS_ERROR:{showReloadCta:!0,message:"Could not find data. ".concat(r)},SESSION_KEYS_CREATE_ERROR:{showReloadCta:!0,message:"Could not create key data. ".concat(r)},SESSION_KEYS_NOT_SAVED_ERROR:{showReloadCta:!0,message:"Could not save key data. ".concat(r)},SESSION_KEYS_AIRDROP_ERROR:{showReloadCta:!0,message:"Airdrop wallet creation failed. ".concat(r)},SESSION_KEYS_SAVE_ERROR:{showReloadCta:!0,message:"Could not save key data at this time. ".concat(r)},SESSION_KEYS_UNKNOWN_ERROR:{showReloadCta:!0,message:"Unknown error while saving data. ".concat(r)},GET_WALLET_CLIENT_ERROR:{showReloadCta:!0,message:"Could not get wallet data. ".concat(r)},CREATE_SOLANA_AIRDROP_WALLET_ERROR:{showReloadCta:!0,message:"Could not create Solana wallet. ".concat(r)},SESSION_KEYS_CREATION_TIMEOUT_ERROR:{showReloadCta:!0,message:"Timed out while saving data. ".concat(r)},FETCH_REMOTE_SIGNER_PUBLIC_KEY_TIMEOUT_ERROR:{showReloadCta:!0,message:"Timed out while fetching data. ".concat(r)},SAVING_SESSION_KEYS_TIMEOUT_ERROR:{showReloadCta:!0,message:"Timed out while saving key data. ".concat(r)},ALREADY_HAS_PERSONAL_WALLET_ERROR:{showReloadCta:!0,message:"This Telegram user already has a personal wallet. ".concat(r)},SOLANA_SIGN_TX_ERROR:{showReloadCta:!0,message:"An error occurred while checking the transaction integrity. ".concat(r)},MISSING_REMOTE_SIGNER_DATA_ERROR:{showReloadCta:!0,message:"Could not get transaction data. ".concat(r)}};function a(e){return e in s}class l{constructor(){this.logError=(e,t,n,r)=>{let s={[i.wL.SMART_CONTRACT_WALLET_ERROR]:t,SHORT_WALLET_ADDRESS:o._.shortenAddress(n,6),...r};i.KR.logException({exception:e,context:r,selectedAccount:n,severity:"error",tags:s,fingerprint:[t]})}}}let d=new l},16101:(e,t,n)=>{"use strict";n.d(t,{l:()=>o});let o=e=>{try{let t=e.split("."),n=atob(t[1]);return JSON.parse(n)}catch(e){return{}}}},21057:(e,t,n)=>{"use strict";n.d(t,{B:()=>u});var o=n(36074),i=n(4198),r=n(91649),s=n(54169),a=n(5900),l=n(6805),d=n(42067);class c{isValidEthereumNetwork(e){return Object.values(d._1).includes(e)}constructor(){var e=this;this.toBaseUnit=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"0",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;try{if(e.includes(".")){let n=e.split(".");n.length>1&&n[1]&&n[1].length>t&&(e="".concat(n[0],".").concat(n[1].substring(0,t)))}return(0,r.XS)(e.length?e:"0",t)}catch(e){return BigInt(0)}},this.fromBaseUnit=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"0",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;try{return(0,r.Js)(e,t)}catch(e){return"0"}},this.isSolanaAddress=e=>!!/^([1-9A-HJ-NP-Za-km-z]{32,44})$/.test(e),this.isEVMAddress=e=>!!(/^0x[a-fA-F0-9]{40}$/.test(e)||(0,s.PW)(e)),this.isSuiAddress=e=>!!/^[0-9a-zA-Z]{1,100}::[0-9a-zA-Z_]+::[0-9a-zA-Z_]+$/i.test(e),this.isAddress=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.isSolanaAddress(t)||e.isEVMAddress(t)||e.isSuiAddress(t)},this.getChecksum=e=>(0,s.PW)(e)?(0,a.b)(e):"",this.createContract=(e,t)=>new l.NZ(e,t),this.areSameAddress=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return(t&&(0,s.PW)(t)?e.getChecksum(t):e.isSolanaAddress(t)?t:t.toLowerCase())===(n&&(0,s.PW)(n)?e.getChecksum(n):e.isSolanaAddress(n)?n:n.toLowerCase())},this.areSameNetwork=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return(null==e?void 0:e.toLowerCase())===(null==t?void 0:t.toLowerCase())},this.areSameToken=(e,t)=>this.areSameAddress(null==e?void 0:e.address,null==t?void 0:t.address)&&this.areSameNetwork(null==e?void 0:e.network,null==t?void 0:t.network),this.areSameTokenByAddressAndNetwork=(e,t)=>this.areSameAddress(null==e?void 0:e.address,null==t?void 0:t.address)&&this.areSameNetwork(null==e?void 0:e.network,null==t?void 0:t.network),this.isNativeToken=e=>!!e&&(this.areSameAddress(d.CW[e.network].nativeCurrency.address,e.address)||this.areSameAddress(d.Fm,e.address)),this.isNativeTokenAddress=(e,t)=>!!t&&this.areSameAddress(d.CW[t].nativeCurrency.address,e),this.getWeb3Library=e=>e?new i.j(e,"any"):void 0,this.calculateTransactionFees=(e,t)=>{let{gasLimit:n,maxFeePerGas:i,gasPrice:r}=null!=e?e:{};if(!n||!r&&!i)return;let s=parseFloat(null!=t?t:"0"),a=o.gH.from(n).mul(o.gH.from(null!=r?r:i)).toString(),l=u.fromBaseUnit(a,d.yt.decimals),c=(parseFloat(l)*s).toString();return{wei:a,eth:l,usd:c}},this.isValidEthOrSolanaAddress=e=>{let t=u.isEVMAddress(e),n=u.isSolanaAddress(e);return{isValid:t||n,isEvm:t,isSolana:n}},this.translateFloozNetworkToDefineNetwork=e=>{switch(e){case d._1.POLYGON_MAINNET:return"matic";case d._1.AVALANCHE:return"avax";case d._1.OPTIMISM:return"opti";case d._1.ARBITRUM:return"arb";case d._1.CRONOS:return"cro";case d._1.FANTOM:return"ftm";case d._1.GNOSIS:return;case d._1.POLYGONZKEVM:return"polygonzkevm";case d._1.SHIBARIUM:return"shib";case d._1.SOLANA_MAINNET:return"sol";case d._1.ABSTRACT:return"abs";case d._1.DOGECHAIN:return"doge";default:return e}}}}let u=new c},27899:(e,t,n)=>{"use strict";n.d(t,{p:()=>c});var o=n(86987),i=n(35981),r=n(54129),s=n(61227),a=n(7578);class l{constructor({firebaseAppConfig:e}){this.getToken=async()=>{var e;let t=await (null===(e=this.firebaseAuth.currentUser)||void 0===e?void 0:e.getIdTokenResult());return null!=t?t.token:null},this.initialiseMessaging=async()=>{let e=await (0,s.TT)();this.messaging=e?(0,s.dG)(this.firebaseApp):void 0},this.isIframeContext=()=>{try{return window.self!==window.top}catch(e){return!0}},this.firebaseApp=(0,o.Wp)(e),this.firebaseAuth=(0,i.xI)(this.firebaseApp),this.firebaseFunctions=(0,r.Uz)(this.firebaseApp),this.storage=(0,a.c7)(this.firebaseApp),this.initialiseMessaging()}}class d extends l{constructor(){super({firebaseAppConfig:{apiKey:"AIzaSyBcV-3qswc5QRFEBK8GBU6AsNp4KdW1UCg",authDomain:"flooz-profiles-prod.firebaseapp.com",projectId:"flooz-profiles-prod",storageBucket:"flooz-profiles-prod.appspot.com",messagingSenderId:"514527224954",appId:"1:514527224954:web:862b18433e1977b4c387c3"}})}}let c=new d},34149:()=>{},45776:(e,t,n)=>{"use strict";n.d(t,{W:()=>r});var o=n(62217);class i{constructor(){this.logError=e=>{let{error:t,event:n,context:i}=e,r={[o.wL.SOLANA_TX_ERROR]:n,...i};o.KR.logException({exception:t,context:i,severity:"error",tags:r,fingerprint:[n]})}}}let r=new i},51217:(e,t,n)=>{"use strict";n.d(t,{$:()=>A});var o=n(67387),i=n(89861),r=n(97707),s=n(98065),a=n(6658),l=n(86654),d=n(62217),c=n(16101);let u=(e,t)=>{var n;return!!e&&(e.wallet===t||(null!==(n=e.wallets)&&void 0!==n?n:[]).includes(t))},h=()=>{var e,t;let{sdkHasLoaded:n,primaryWallet:o}=(0,i.Ww)(),h=null!==(e=null==o?void 0:o.address)&&void 0!==e?e:void 0,[v,E]=(0,r.useState)(null),R=(0,r.useCallback)(()=>{let e=(0,l.EB)();E(e?(0,c.l)(e):null)},[]);if((0,r.useEffect)(()=>{R();let e=e=>{e.key===a.Tv&&R()};return window.addEventListener("storage",e),window.addEventListener(a.Tv,R),()=>{window.removeEventListener("storage",e),window.removeEventListener(a.Tv,R)}},[R]),(0,r.useEffect)(()=>{n&&h&&v&&!u(v,h)&&(s.N.logout(),E(null)),n&&!h&&E(null)},[h,v,n]),null==h||null==v)return{isAuthenticated:!1,jwtHasTelegramId:!1};let g=u(v,h);return v&&h&&!g&&d.KR.logException({exception:"Token does not contain wallet",tags:{[d.wL.AUTH_ERROR]:"TOKEN_DOES_NOT_CONTAIN_WALLET"},context:{primaryWalletAddress:h,walletInToken:v.wallet,otherWalletsInToken:null===(t=v.wallets)||void 0===t?void 0:t.join(",")}}),{isAuthenticated:g,jwtHasTelegramId:!!v.telegramId}};var v=n(82654),E=n(98423),R=n(92832),g=n(42067);n(73709);var _=n(56920),w=n(73979),S=n(8932);let m=e=>{let t=(0,_.usePathname)(),n=(0,r.useCallback)(e=>w.K.getKernelClient(e),[]);return(0,r.useEffect)(()=>{if(!e){w.K.clearSmartAccountAddress();return}(0,o.Z_)(e.connector)&&(async()=>{await Promise.all([w.K.initializeKernelClients(e).then(e=>{let t=e.filter(e=>!1===e.isInitialized);if(t.length>0){let n="".concat(t.length===e.length?"All":"Some"," kernel clients failed to initalize."),o={};e.forEach(e=>{o[e.network]=e.error}),S.D8.logError(Error(n),"INIT_KERNEL_CLIENTS_ERROR",void 0,o)}})])})()},[e,t]),{getKernelClient:n}};var f=n(78152);let A=()=>{var e,t;let{setShowAuthFlow:n,primaryWallet:a,handleLogOut:d,network:c,user:u}=(0,i.Ww)(),{getKernelClient:_}=m(a),w=(0,i.rf)(),S=(0,i.zy)(),A=(0,i.YO)(),{modalHistory:p}=(0,R.s)(),y=null!==(t=null==a?void 0:a.address)&&void 0!==t?t:void 0,[T,O]=(0,r.useState)(c?g.TQ[Number(c)]:void 0),N=(0,r.useRef)(n);N.current=n;let C=(0,r.useMemo)(()=>({onSubmit:async()=>{await d(),N.current(!0)}}),[d]),k=(0,r.useCallback)(e=>{let{chainId:t}=e;if(a&&T){if((0,g.PM)(T)&&!(0,g.sY)(t)||!(0,g.PM)(T)&&(0,g.sY)(t)){if((0,g.sY)(t)){let e=(0,f.eC)(S);if(e){w(e.id),(0,f.NR)(e)&&A({network:t,wallet:e});return}}else{let e=(0,f.k_)(S);if(e){w(e.id);return}}p.push(v.A.switchEvmSvm,void 0,{...C,connectIntent:(0,g.sY)(t)?"EVM":"SVM"});return}A({network:t,wallet:a})}},[a,A,T,p,C,S,w]);(0,r.useEffect)(()=>{E.E.updateContext({user_id:y,network:T})},[y,T]),(0,r.useEffect)(()=>{var e;if((null==a?void 0:null===(e=a.connector)||void 0===e?void 0:e.connectedChain)==="SOL"){O(g._1.SOLANA_MAINNET);return}O(c?g.TQ[Number(c)]:void 0)},[c,a]);let I=null!=a&&!!a.connector&&(0,o.Z_)(a.connector),{isAuthenticated:L,jwtHasTelegramId:b}=h();return{selectedAccount:y,providerNetwork:T,disconnect:(0,r.useCallback)(()=>{d(),s.N.logout(),(0,l.R9)()},[d]),switchNetwork:k,setShowAuthFlow:n,primaryWallet:a,userWallets:S,isZeroDevAccount:I,getKernelClient:_,switchWallet:w,isAuthenticated:L,jwtHasTelegramId:b,isSolanaWallet:(null==a?void 0:null===(e=a.connector)||void 0===e?void 0:e.connectedChain)==="SOL",isEmbeddedWallet:!!a&&!(0,f.NR)(a),user:u}}},62217:(e,t,n)=>{"use strict";n.d(t,{KR:()=>c,gV:()=>a,wL:()=>l});var o=n(63677),i=n(93958),r=n(45976),s=n(55036),a=function(e){return e.CREATE_SCW="CREATE_SCW",e}({}),l=function(e){return e.GENERAL_ERROR="GENERAL_ERROR",e.PAGE_NOT_FOUND="PAGE_NOT_FOUND",e.HUB_ERROR="HUB_ERROR",e.MEME_ERROR="MEME_ERROR",e.SWAP_ERROR="SWAP_ERROR",e.SWAP_QUOTE_ENDPOINT_ERROR="SWAP_QUOTE_ENDPOINT_ERROR",e.SWAP_TRANSACTION_ERROR="SWAP_TRANSACTION_ERROR",e.SMART_CONTRACT_WALLET_ERROR="SMART_CONTRACT_WALLET_ERROR",e.SITEMAP_GENERATOR_ERROR="SITEMAP_GENERATOR_ERROR",e.AUTH_ERROR="AUTH_ERROR",e.OKX_ERROR="OKX_ERROR",e.SOLANA_TX_ERROR="SOLANA_TX_ERROR",e}({});class d{constructor(){this.shouldLogToConsole=!1,this.shouldLogToApi="true"===s.env.NEXT_PUBLIC_USE_ERROR_LOGGER_LOG_TO_API,this.shouldLogToSentry=!0,this.logInfo=e=>{let{message:t,context:n,selectedAccount:i,network:r,tags:s}=e,a=null==i?void 0:i.toLowerCase();if(this.shouldLogToConsole&&console.log("[FLOOZ INFO] ".concat(t,"\n                user.id: ").concat(a,"\n                network: ").concat(r,"                 \n                tags: ").concat(JSON.stringify(s)," \n                context: ").concat(JSON.stringify(n),"\n            ")),this.shouldLogToSentry){let e={...s,network:r};o.wd(t,{user:{id:a},tags:e,contexts:n?{context:n}:void 0})}this.shouldLogToApi&&fetch("/api/log",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:e})}).catch(()=>{})},this.logException=e=>{let{exception:t,context:n,selectedAccount:r,network:s,severity:a,tags:l,fingerprint:d}=e,c=null==r?void 0:r.toLowerCase();this.shouldLogToConsole&&console.error("[FLOOZ_ERROR] ".concat(null==t?void 0:t.toString(),"\n                user.id: ").concat(c,"\n                network: ").concat(s,"\n                severity: ").concat(a,"\n                tags: ").concat(JSON.stringify(l),"\n                fingerprint: ").concat(JSON.stringify(d),"\n                context: ").concat(JSON.stringify(n),"\n            ")),this.shouldLogToApi&&fetch("/api/log",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:e})}).catch(()=>{}),this.shouldLogToSentry&&i.v4(function(e){let i=Object.fromEntries(Object.entries({...l,network:s}).map(e=>{let[t,n]=e;return[t,JSON.stringify(n,null,2)]}));d&&e.setFingerprint(d),o.Cp(t,{user:{id:c},tags:i,contexts:n?{context:n}:void 0,level:a})})},this.instrumentServerAction=async(e,t)=>await r.K(e,{recordResponse:!0},t),this.flush=e=>o.bX(e)}}let c=new d},73979:(e,t,n)=>{"use strict";n.d(t,{K:()=>g});var o=n(67387),i=n(29262),r=n(15586),s=n(20177),a=n(55126),l=n(76851),d=n(78476),c=n(58553),u=n(12994),h=n(42067),v=n(21057),E=n(8932);class R{setKernelClient(e,t){this.kernelClients[e]=t}async initializeKernelClient(e,t){var n;let o={rpcUrl:"".concat("https://rpc.zerodev.app/api/v2/bundler","/").concat(h.s3[t]),viemChain:h.JV[t]},i=this.getKernelClient(t);if(i&&(null==i?void 0:null===(n=i.account)||void 0===n?void 0:n.address)&&v.B.areSameAddress(this.walletAddress,i.account.address))return{network:t,isInitialized:!0};try{let n=await this.initializeAccount(e,t),i=(0,r._)({account:n,entryPoint:this.entryPoint,chain:o.viemChain,bundlerTransport:(0,c.L)(o.rpcUrl)});return this.setKernelClient(t,i),{network:t,isInitialized:!0}}catch(e){return{network:t,isInitialized:!1,error:e}}}async initializeAccount(e,t){let n;let o="/api/proxy-rpc/".concat(t),r=(0,u.l)({transport:(0,c.L)(o)});try{var a,d;let t=await (null==e?void 0:null===(d=e.connector)||void 0===d?void 0:null===(a=d.eoaConnector)||void 0===a?void 0:a.getWalletClient()),o=(0,l.y)(t);if(!o)return;let c=await (0,i.o)(r,{signer:o,entryPoint:this.entryPoint,kernelVersion:this.kernelVersion});n=await (0,s.H)(r,{plugins:{sudo:c},entryPoint:this.entryPoint,kernelVersion:this.kernelVersion})}catch(e){E.D8.logError(e,"SESSION_KEYS_CREATE_ERROR",void 0,{network:t,rpcURL:o})}return n}getKernelClient(e){if((0,h.KH)(e))return this.kernelClients[e]}clearSmartAccountAddress(){this.walletAddress=void 0}getEntryPoint(){return this.entryPoint}async initializeKernelClients(e){if(!e||!e.connector||!(0,o.Z_)(null==e?void 0:e.connector)||v.B.areSameAddress(this.walletAddress,e.address))return[];this.walletAddress=e.address;let t=[];return await Promise.all(Object.keys(this.kernelClients).map(n=>this.initializeKernelClient(e,n).then(e=>{t.push(e)}))),t}constructor(){this.entryPoint=d.IL,this.kernelVersion=a.iF,this.kernelClients={[h._1.BASE]:void 0,[h._1.BINANCE_MAINNET]:void 0,[h._1.ETHEREUM_MAINNET]:void 0,[h._1.POLYGON_MAINNET]:void 0,[h._1.OPTIMISM]:void 0,[h._1.ARBITRUM]:void 0,[h._1.AVALANCHE]:void 0,[h._1.MANTLE]:void 0,[h._1.LINEA]:void 0,[h._1.BLAST]:void 0}}}let g=new R},76230:(e,t,n)=>{"use strict";n.d(t,{c:()=>a,s:()=>l});var o=n(24059),i=n(97707),r=n(51217);let s=(0,i.createContext)(void 0),a=e=>{let{children:t}=e,n=(0,r.$)();return(0,o.jsx)(s.Provider,{value:n,"data-sentry-element":"unknown","data-sentry-component":"Web3ContextProvider","data-sentry-source-file":"web3-context.tsx",children:t})},l=()=>{let e=(0,i.useContext)(s);if(!e)throw Error("useWeb3Context: the hook must be used inside a Web3ContextProvider to work properly.");return e}},78152:(e,t,n)=>{"use strict";n.d(t,{GF:()=>h,Jb:()=>v,NR:()=>c,Sl:()=>u,eC:()=>d,k_:()=>l,lw:()=>_,r3:()=>R,rr:()=>E,vl:()=>g});var o=n(92943),i=n(24786),r=n(42067),s=n(45776);let a=["turnkeyhd","zerodev"],l=e=>{let t=e.filter(e=>{var t,n;return null===(n=e.connector)||void 0===n?void 0:null===(t=n.supportedChains)||void 0===t?void 0:t.includes(o.uPd.Sol)}),n=t.find(e=>{var t;return(null===(t=e.connector)||void 0===t?void 0:t.key)==="turnkeyhd"});return null!=n?n:t[0]},d=e=>{let t=e.filter(e=>{var t,n;return null===(n=e.connector)||void 0===n?void 0:null===(t=n.supportedChains)||void 0===t?void 0:t.includes(o.uPd.Evm)}),n=t.find(e=>{var t;return(null===(t=e.connector)||void 0===t?void 0:t.key)==="zerodev"});return null!=n?n:t[0]},c=e=>{var t,n;return!a.includes(null!==(n=null===(t=e.connector)||void 0===t?void 0:t.key)&&void 0!==n?n:"")},u=e=>{let t=d(e);return(null==t?void 0:t.connector.key)==="zerodev"?t:void 0},h=e=>{let t=l(e);return(null==t?void 0:t.connector.key)==="turnkeyhd"?t:void 0},v=(e,t)=>t===r._1.SOLANA_MAINNET?h(e):u(e),E=new i.Connection("https://rpc-proxy.billing-887.workers.dev/","confirmed"),R=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,n=0,o=[];for(;n<t;)try{var i;let{blockhash:t,lastValidBlockHeight:n}=await E.getLatestBlockhash("confirmed"),o=await E.confirmTransaction({blockhash:t,lastValidBlockHeight:n-150,signature:e},"confirmed");if(null==o?void 0:null===(i=o.value)||void 0===i?void 0:i.err)throw o.value.err;return}catch(e){if(o.push(e),n>=t-1)throw Error("Transaction could not be confirmed within the retry limit, errors: ".concat(JSON.stringify(o)));n++,await new Promise(e=>setTimeout(e,2e3))}throw Error("Transaction Confirm: could not be confirmed within the retry limit")},g=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,n=0,o=[];for(;n<t;){try{var i,r;let t=await E.getSignatureStatus(e);if(null==t?void 0:null===(i=t.value)||void 0===i?void 0:i.err)throw t.value.err;let n=null==t?void 0:null===(r=t.value)||void 0===r?void 0:r.confirmationStatus;if("confirmed"===n||"finalized"===n)return}catch(e){if(o.push(e),n>=t-1)throw Error("Transaction Status could not be confirmed within the retry limit, errors: ".concat(JSON.stringify(o)))}n++,await new Promise(e=>setTimeout(e,2e3))}throw Error("Transaction Status: could not be confirmed within the retry limit")},_=async(e,t)=>{try{var n,o,i,r;let a=await E.getTransaction(e,{commitment:"confirmed"});if((null==a?void 0:null===(n=a.meta)||void 0===n?void 0:n.err)&&(s.W.logError({error:null===(o=a.meta)||void 0===o?void 0:o.err,event:"TX_ERROR_DETAILS",context:{txHash:e,logMessages:null===(i=a.meta)||void 0===i?void 0:i.logMessages,meta:a.meta,wallet:t}}),null===(r=a.meta)||void 0===r?void 0:r.logMessages))return a.meta.logMessages;return}catch(e){console.error("Error fetching transaction details",e);return}}},82654:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});let o={authentication:"authentication",tosUpdated:"tosUpdated",switchEvmSvm:"switchEvmSvm",more:"more",wallet:"wallet"}},86654:(e,t,n)=>{"use strict";n.d(t,{EB:()=>_,R9:()=>S,cU:()=>v,gf:()=>c});var o=n(51439),i=n(98065),r=n(62217),s=n(78909),a=n(66761),l=n(6658);let d=null,c=async()=>{let e=_();if(e)return e;let t=w();if(t){let e=await p(t);return null!=e?e:t}return d||(d=(async()=>{let e=(await u()).token;E(l.pF,e);let t=await p(e);return d=null,null!=t?t:e})())},u=async()=>{let e=(0,s.tW)(l.aq),t=await fetch(e,{method:"POST",body:"{}"});if(!t.ok)throw Error("Failed to fetch data: ".concat(JSON.stringify({url:t.url,status:t.status}),")}"));return t.json()},h=async e=>{let{walletAddress:t,dynamicJwtToken:n,anonToken:o}=e;try{let e=await fetch(l.i1,{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)},method:"POST",body:JSON.stringify({walletAddress:t,dynamicJwtToken:n})});if(!e.ok)throw Error("Authentication failed");return await e.text()}catch(e){throw r.KR.logException({exception:e,context:{anonToken:o},severity:"error",tags:{[r.wL.AUTH_ERROR]:"ERROR_EXCHANGING_BACKEND_TOKEN"},fingerprint:["ERROR_EXCHANGING_BACKEND_TOKEN"]}),e}},v=async(e,t)=>{S();let n=await h({walletAddress:e,dynamicJwtToken:t,anonToken:w()}),o=await i.N.loginAnonymous({token:n}),r=await o.user.getIdToken();E(l.Tv,r);let s=new Event(l.Tv);return window.dispatchEvent(s),r},E=(e,t)=>{let n=1e3*f(t).exp;a.v.set(e,{token:t,maxAge:n},!1),(0,o.setCookie)(e,t,{path:"/",maxAge:n})},R=e=>{let t=a.v.get(e);if(!t||!g(t))return null;let{token:n,maxAge:o}=t;return new Date().getTime()>o?(a.v.remove(e),null):n},g=e=>"object"==typeof e&&null!==e&&"token"in e&&"maxAge"in e,_=()=>R(l.Tv),w=()=>R(l.pF),S=()=>{a.v.remove(l.Tv),(0,o.deleteCookie)(l.Tv)},m=()=>{var e;let t=a.v.get(l.SA);if(!t)return;let n=f(t),o=null==n?void 0:n.last_verified_credential_id,i=null==n?void 0:null===(e=n.verified_credentials)||void 0===e?void 0:e.find(e=>e.id===o);if(o&&i)return null==i?void 0:i.address},f=e=>{let t=e.split(".")[1],n=null==t?void 0:t.replace(/-/g,"+").replace(/_/g,"/"),o=null==n?void 0:n.padEnd(n.length+(4-n.length%4)%4,"=");return JSON.parse(decodeURIComponent(escape(window.atob(null!=o?o:""))))},A=null,p=async e=>{if(A)return A;A=(async()=>{let t;let n=a.v.get(l.SA),o=m();return e&&n&&o&&(t=await v(o,n)),t})();try{return await A}finally{A=null}}},92832:(e,t,n)=>{"use strict";n.d(t,{e:()=>c,s:()=>u});var o=n(24059),i=n(97707),r=n(56920);let s=e=>{let t=(0,r.usePathname)(),n=(0,i.useRef)(t);(0,i.useEffect)(()=>{n.current!==t&&(e(),n.current=t)},[t,e])};class a{constructor(){this.isEmpty=!0,this.emptyModalRoute="/",this.push=(e,t,n)=>{let o=this.buildHistoryLocation(e,t,n),i=this.history.concat(o);this.updateState(i,o)},this.replace=(e,t,n)=>{let o=this.buildHistoryLocation(e,t,n),i=this.history.length>1?this.history.slice(0,1).concat(o):this.history.concat(o);this.updateState(i,o)},this.back=e=>{if(1!==this.history.length){if(2===this.history.length){let e=this.history.slice(0,1),t=this.buildHistoryLocation(this.emptyModalRoute);this.updateState(e,t)}else{let t=this.history[this.history.length-2];if(null==e&&null==t.search){let e=this.history.slice(0,-1);this.updateState(e,t);return}let n=new URLSearchParams(t.search);for(let[t,o]of new URLSearchParams(e))n.set(t,o);let o=this.buildHistoryLocation(t.route,n),i=this.history.slice(0,-2).concat(o);this.updateState(i,o)}}},this.close=()=>{let e=[this.buildHistoryLocation(this.emptyModalRoute)],t=this.buildHistoryLocation(this.emptyModalRoute);this.updateState(e,t)},this.listen=e=>(this.listeners.push(e),()=>{this.listeners=this.listeners.filter(t=>t!==e)}),this.buildHistoryLocation=(e,t,n)=>t&&Array.from(t.entries()).length>0?{pathname:"".concat(e,"?").concat(t.toString()),search:t.toString(),route:e,state:n}:{pathname:e,route:e,state:n},this.updateState=(e,t)=>{this.history=e,this.location=t,this.isEmpty=1===e.length,this.listeners.forEach(e=>{e(t)})},this.history=[this.buildHistoryLocation(this.emptyModalRoute)],this.location=this.buildHistoryLocation(this.emptyModalRoute),this.listeners=[]}}let l=(0,i.createContext)(void 0),d=new a,c=e=>{let{history:t,children:n}=e,r=(0,i.useMemo)(()=>null!=t?t:d,[t]),[a,c]=(0,i.useState)(),[u,h]=(0,i.useState)(r.history);s(()=>r.close()),(0,i.useEffect)(()=>r.listen(()=>{h(r.history)}),[r]);let v=(0,i.useMemo)(()=>({modalHistory:r,rootClassNames:a,setRootClassNames:c,modalRoutesHistory:u}),[a,c,u,r]);return(0,o.jsx)(l.Provider,{value:v,"data-sentry-element":"unknown","data-sentry-component":"ModalRootContextProvider","data-sentry-source-file":"modal-root-context.tsx",children:n})},u=()=>{let e=(0,i.useContext)(l);if(!e)throw Error("useModalRootContext: the hook must be used inside a ModalRootContextProvider to work properly.");return e}},98065:(e,t,n)=>{"use strict";n.d(t,{N:()=>l});var o=n(35981),i=n(54129),r=n(27899),s=function(e){return e.EXCHANGE_SIGNATURE="exchangeSignatureForToken",e.EXCHANGE_DYNAMIC_TOKEN_FOR_FIREBASE_TOKEN="exchangeDynamicTokenForFirebaseToken",e}(s||{});class a{async exchangeDynamicToken(e){let{token:t,walletAddress:n}=e,s=(0,i.Qg)(r.p.firebaseFunctions,"exchangeDynamicTokenForFirebaseToken"),{data:a}=await s({token:t,walletAddress:n});await (0,o.p)((0,o.xI)(),a.token)}async login(e){let{signature:t,walletAddress:n}=e,s=(0,i.Qg)(r.p.firebaseFunctions,"exchangeSignatureForToken"),{data:a}=await s({signature:t,walletAddress:n});await (0,o.p)((0,o.xI)(),a.token)}async loginAnonymous(e){let{token:t}=e;return await (0,o.p)((0,o.xI)(),t)}async logout(){await r.p.firebaseAuth.signOut()}constructor(){this.getLoginMessage=e=>"".concat(e," is my wallet"),this.getDynamicLoginMessage=()=>"Welcome to Flooz. Signing is the only way we can truly know that you are the owner of the wallet you are connecting. Signing is a safe, gas-less transaction that does not in any way give Flooz or its third-party providers permission to perform any transactions with your wallet."}}let l=new a},98423:(e,t,n)=>{"use strict";n.d(t,{E:()=>s});var o=n(56272),i=n(66761);class r{async setEnabled(e){this.enabled=e,this.enabled&&!i.v.get(i.w.cookiesAccepted)&&(this.emitEvent("consent_granted",{analytics_storage:"granted",ad_storage:"granted",personalization_storage:"granted",functionality_storage:"granted",security_storage:"granted"}),i.v.set(i.w.cookiesAccepted,!0))}updateContext(e){this.context={...this.context,...e}}emitEvent(e,t,n){this.emitEventInternal(e,t,n)}emitEventInternal(e,t,n){var i,r,s,a,l,d;if(!this.enabled||!window.google_tag_manager){this.pushTrackingEventsToSessionStorage(e,t,n);return}let c=this.parseAnalyticsObject(t),u={user_id:o._.anonymizeAddress(null===(i=this.context)||void 0===i?void 0:i.user_id),experimentation_platform_user:JSON.stringify(null===(r=this.context)||void 0===r?void 0:r.experimentation_platform_user),network:null===(s=this.context)||void 0===s?void 0:s.network,app_version:null===(a=this.context)||void 0===a?void 0:a.app_version,mode:null===(l=this.context)||void 0===l?void 0:l.mode,...c};null===(d=this.getService())||void 0===d||d.push({event:e,...u})}getService(){var e;return null!==(e=window.dataLayer)&&void 0!==e?e:[]}processStoredEvents(){let e=this.getTrackingEventsFromSessionStorage();e.length&&this.enabled&&e.forEach(e=>{this.emitEventInternal(e.eventName,e.data,e.conversionEvent),this.removeTrackingEventFromSessionStorage(e)})}pushTrackingEventsToSessionStorage(e,t,n){let o=this.getTrackingEventsFromSessionStorage();o.push({eventName:e,data:t,conversionEvent:n,id:Date.now()}),i.v.set(i.w.trackingEvents,o,!0)}getTrackingEventsFromSessionStorage(){var e;return null!==(e=i.v.get(i.w.trackingEvents,!0))&&void 0!==e?e:[]}removeTrackingEventFromSessionStorage(e){let t=this.getTrackingEventsFromSessionStorage();i.v.set(i.w.trackingEvents,t.filter(t=>t.id!==e.id),!0)}parseAnalyticsObject(e){if(null==e)return{};let t={...e};return Object.keys(e).map(n=>{let o=e[n];"string"==typeof o&&o.startsWith("0x")?t[n]=o.replace("0x",""):"object"==typeof o&&(t[n]=JSON.stringify(o))}),t}constructor(){this.enabled=!1}}let s=new r}}]);